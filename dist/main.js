(()=>{"use strict";function e(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function t(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function n(e){pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l,pageTitle.dataset.catId=e.dataset.catId}function l(e,n){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of J){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(t(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==n&&a.name!==n?l.style.display="none":l.style.display="block"}))}const o=document.querySelector(".content"),s=document.querySelector("nav"),a=document.querySelector("#modal"),d=document.querySelector("#catModal"),i=document.querySelector(".tasksContainer"),c=document.getElementById("collapseBtn"),r=document.querySelector(".sortOptions"),u=document.getElementById("sortBtn"),m=(document.getElementById("dateBtn"),document.getElementById("importanceBtn"),document.getElementById("createTask")),g=document.getElementById("okTaskBtn"),y=document.getElementById("cancelTaskBtn"),p=document.getElementById("delete"),k=document.getElementById("newCatBtn"),v=document.getElementById("okCatBtn"),E=document.getElementById("cancelCatBtn"),f=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),h=document.getElementById("allBtn"),C=document.getElementById("todayBtn"),B=document.getElementById("thisWeekBtn"),L=document.getElementById("thisMonthBtn"),b=document.getElementById("pageTimeline");let x=document.getElementsByClassName("close")[0],D=document.getElementsByClassName("closeCatModal")[0],w=document.querySelector("form"),T=document.getElementById("pageTitle"),S=document.getElementById("title"),q=document.getElementById("category"),M=document.getElementById("dueDate"),A=document.getElementById("priority"),F=document.getElementById("description"),N=document.querySelectorAll(".catBtns"),P=document.querySelectorAll(".timelineBtns"),$="All Inbox",H=document.getElementById($),z=null,W=document.getElementById("allBtn");const R=function(){const e=new Date;return e.setHours(0,0,0,0),e}();function O(e){return N.forEach((e=>{e.classList.remove("selectedFilter")})),H=document.getElementById(e),H.classList.add("selectedFilter"),n(H),l(z,e),H}function Y(e,t){return console.log(t),P.forEach((e=>{e.classList.remove("selectedFilter")})),n(H),l(e,$),t.classList.add("selectedFilter"),t}u.addEventListener("click",(function(){"none"===r.style.display?(r.style.display="flex",u.style.borderRadius="5px 5px 0px 0px"):(r.style.display="none",u.style.borderRadius="")}));class _{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++j}addTaskToCat(e){this.tasks.push(e),e.id=Q,Q++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let V,j=Math.max(...Array.from(N).map((e=>parseInt(e.dataset.catId)))),G=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>j&&(j=t),new _(e.textContent.trim(),null,t)}))}(),J=[...G],K=null,Q=0;class U{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return a.style.display="none",void delete S.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete S.dataset.editingTaskId;for(let l of J)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),Q--,Q=J.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),a.style.display="none",delete S.dataset.editingTaskId}m.addEventListener("click",(function(){S.value="",q.value=$;let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,M.value=e,A.value="Low",F.value="",a.style.display="block"})),y.addEventListener("click",(function(e){e.preventDefault(),a.style.display="none"})),g.addEventListener("click",(function(l){if(document.querySelector("form").reportValidity()){l.preventDefault(),S.classList.remove("error");let n=document.getElementById("title").value,o=document.getElementById("category").value,s=document.getElementById("category").value,d=J.find((e=>e.name===s)),c=document.getElementById("dueDate").value,r=document.getElementById("priority").value,u=document.getElementById("description").value;S.dataset.editingTaskId?function(e,n,l,o,s){let d,i=S.dataset.editingTaskId;for(let e of J)if(d=e.tasks.find((e=>e.id==i)),d)break;if(void 0===d)return void console.error(`No task found with id ${i}`);d.title=e,d.category=n,d.dueDate=l,d.priority=o,d.description=s,console.log("editing task, title: "+e+" id: "+i);let c=document.getElementById(i);c.querySelector(".taskTitle").textContent=e,c.querySelector(".taskCategory").textContent=`(${n.name})`,c.querySelector(".taskDueDate").textContent=t(l),c.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete S.dataset.editingTaskId,a.style.display="none"}(n,d,c,r,u):function(n,l,o,s,d,c){let r=new U(Q,n,o,s,d,c);Q++,o.addTaskToCat(r);let u=r.id;const m=document.createElement("div");function g(e){console.log(e),S.value=e.title,q.value=e.category.name,M.value=e.dueDate,A.value=e.priority,F.value=e.description,S.dataset.editingTaskId=e.id,a.style.display="block"}m.classList.add("taskContainerDiv"),function(n,l,o,s,a,d){const c=document.createElement("div");c.classList.add("taskBigDiv");const u=document.createElement("div");u.classList.add("taskDiv"),u.id=n,u.dataset.taskId=n,u.addEventListener("click",(function(){g(r)}));const y=document.createElement("div");y.classList.add("taskPrim"),u.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),f.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),f.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const E=document.createElement("div");E.classList.add("taskSec"),u.appendChild(E);const f=document.createElement("div");f.classList.add("taskDueDate"),f.textContent=t(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=n,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),E.appendChild(f),E.appendChild(I),c.appendChild(u),c.appendChild(C);const B=document.createElement("hr");m.appendChild(c),m.appendChild(B),i.appendChild(m)}(u,n,l,s,0,A)}(n,o,d,c,r,u),a.style.display="none"}else S.classList.add("error");z=null,W=h,Y(z,W),$=q.value,O($),n(H)})),p.addEventListener("click",(function(t){t.stopPropagation();let n=S.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),S.addEventListener("input",(function(){this.classList.remove("error")}))}(),k.addEventListener("click",(function(){K="new",d.style.display="block",catTitle.value="",I.style.backgroundColor="#8a59b9",console.log(I.style.backgroundColor)})),v.addEventListener("click",(function(t){if(t.preventDefault(),"new"===K){let t=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=I.style.backgroundColor,console.log(n);let l=new _(t,n);J.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=t,s.id=t,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,e(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),o.appendChild(s),document.getElementById("categoriesList").appendChild(o),initializeCatFilterEvListeners()}else if("edit"===K){console.log(V),"number"!=typeof V&&console.error("catId is not a number at [description of the code location]",V);let t=J.find((e=>e.catId===V));if(t){t.name=document.getElementById("catTitle").value,t.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${V}"]`);n&&(n.innerText=t.name,n.style.backgroundColor=t.color,e(t.color)?(n.style.color="white",T.style.color="white",console.log(T.style.color)):(n.style.color="black",T.style.color="black",console.log(T.style.color)))}else console.error("Could not find category with ID:",V);T.innerHTML=catTitle.value,console.log(f.value),T.style.backgroundColor=f.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);J.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),d.style.display="none"})),E.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),T.addEventListener("click",(function(){V=parseInt(this.dataset.catId),K="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,d.style.display="block"}(T)})),I.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);f.value=e,f.click()})),f.addEventListener("input",(function(){I.style.background=f.value})),H.classList.add("selectedFilter"),W.classList.add("selectedFilter"),n(H),l(z,$),C.addEventListener("click",(function(){z=R,W=C,Y(z,W),b.textContent=this.textContent})),B.addEventListener("click",(function(){const e=new Date;e.setDate(R.getDate()+7),z=e,W=B,Y(z,W),b.textContent=this.textContent})),L.addEventListener("click",(function(){const e=new Date;e.setDate(R.getDate()+30),z=e,W=L,Y(z,W),b.textContent=this.textContent})),h.addEventListener("click",(function(){z=null,W=h,Y(z,W),b.textContent=this.textContent})),N=document.querySelectorAll(".catBtns"),N.forEach((e=>{e.addEventListener("click",(function(){$=this.textContent,V=parseInt(this.dataset.catId),O($)}))})),c.addEventListener("click",(function(){const e=window.getComputedStyle(s).display;window.innerWidth<750?"none"===e?(s.style.display="block",s.style.zIndex="2",o.style.gridColumn="1 / 3",o.classList.add("overlay"),c.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),c.src="./images/expand3.png"):"none"===e?(s.style.display="block",s.style.zIndex="",o.style.gridColumn="2/3",o.classList.remove("overlay"),c.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),c.src="./images/expand3.png")})),x.onclick=function(){a.style.display="none",delete S.dataset.editingTaskId},D.onclick=function(){d.style.display="none"},window.onclick=function(e){e.target==a?a.style.display="none":e.target==d&&(d.style.display="none")},w.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),g.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFDM0IzSSxFQUFRc0MsVUFBVUMsT0FBTyxXQUN6QmxDLEVBQVlvRixJQUFNLDJCQUdsQnhGLEVBQUkxQixNQUFNd0IsUUFBVSxPQUNwQkUsRUFBSTFCLE1BQU1tSyxPQUFTLEdBQ25CMUksRUFBUXpCLE1BQU1vSyxXQUFhLFNBQzNCM0ksRUFBUXNDLFVBQVVDLE9BQU8sV0FDekJ6RixRQUFRQyxJQUFJLFVBQ1pzRCxFQUFZb0YsSUFBTSx1QkFJeEIsSUFDRmxFLEVBQUtxSCxRQUFVLFdBQ1gxSSxFQUFNM0IsTUFBTXdCLFFBQVUsY0FDZjJCLEVBQVdsRCxRQUFRZ0csYUFDOUIsRUFDQS9DLEVBQWFtSCxRQUFVLFdBQ25CekksRUFBUzVCLE1BQU13QixRQUFVLE1BQzdCLEVBQ0E3QixPQUFPMEssUUFBVSxTQUFTekQsR0FDbEJBLEVBQU0wRCxRQUFVM0ksRUFDbEJBLEVBQU0zQixNQUFNd0IsUUFBVSxPQUNkb0YsRUFBTTBELFFBQVUxSSxJQUN0QkEsRUFBUzVCLE1BQU13QixRQUFVLE9BRWpDLEVBQ0EsRUFBSzJDLGlCQUFpQixXQUFXLFNBQVN5QyxHQUNwQixVQUFkQSxFQUFNMkQsTUFDTjNELEVBQU1DLGlCQUNOMUUsRUFBVXdILFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgbGV0IHJnYjtcbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgbGV0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgbGV0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgbGV0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgcmdiID0geyByLCBnLCBiIH07XG4gIH0gZWxzZSBpZiAoY29sb3Iuc3RhcnRzV2l0aCgncmdiKCcpKSB7XG4gICAgLy8gRXh0cmFjdCBSR0IgdmFsdWVzIGZyb20gYW4gUkdCIHN0cmluZ1xuICAgIGxldCB2YWx1ZXMgPSBjb2xvci5zdWJzdHJpbmcoNCwgY29sb3IubGVuZ3RoIC0gMSkuc3BsaXQoJywnKTtcbiAgICBsZXQgciA9IHBhcnNlSW50KHZhbHVlc1swXSwgMTApO1xuICAgIGxldCBnID0gcGFyc2VJbnQodmFsdWVzWzFdLCAxMCk7XG4gICAgbGV0IGIgPSBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKTtcbiAgICByZ2IgPSB7IHIsIGcsIGIgfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBicmlnaHRuZXNzIG9uIGEgc2NhbGUgZnJvbSAwIHRvIDI1NVxuICBsZXQgYnJpZ2h0bmVzcyA9IE1hdGgucm91bmQoKChyZ2IuciAqIDI5OSkgKyAocmdiLmcgKiA1ODcpICsgKHJnYi5iICogMTE0KSkgLyAxMDAwKTtcbiAgY29uc29sZS5sb2coYnJpZ2h0bmVzcyk7XG4gIHJldHVybiBicmlnaHRuZXNzIDwgMTcwOyAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29sb3IgaXMgZGFya1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JJbnB1dChkYXRlU3RyaW5nKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyAvLyBHZXQgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzXG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG9mZnNldCk7IC8vIEFkanVzdCB0aGUgZGF0ZSBieSB0aGUgdGltZXpvbmUgb2Zmc2V0XG4gIGNvbnN0IG1tID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRkID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCB5eXl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gYCR7bW19LyR7ZGR9LyR7eXl5eX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAvLyBTZXBhcmF0ZSBSR0IgdmFsdWVzXG4gIGxldCB2YWx1ZXMgPSByZ2IubWF0Y2goL15yZ2JcXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspXFwpJC8pO1xuXG4gIC8vIENvbnZlcnQgZWFjaCB2YWx1ZSB0byBoZXhhZGVjaW1hbFxuICBsZXQgaGV4Q29sb3IgPSBcIiNcIiArIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1sxXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzJdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbM10sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIGhleENvbG9yO1xufVxuICAiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JJbnB1dCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IHsgY3VycmVudENhdGVnb3J5IH0gZnJvbSBcIi4vZG9tRWxlbWVudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKXtcbiAgLy9BcHBseSBwYWdlIHRpdGxlIGJhc2VkIG9uIGNhdGVncnlcbiAgcGFnZVRpdGxlLnRleHRDb250ZW50ID0gc2VsZWN0ZWRDYXRlZ29yeUJ0bi50ZXh0Q29udGVudDtcblxuICAvLyBDaGFuZ2UgcGFnZSB0aXRsZSBhY2NvcmRpbmcgdG8gc2VsZWN0ZWQgYnV0dG9uXG4gIGxldCBzZWxlY3RlZENhdEJ0biA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICBsZXQgYmdDb2xvciA9IHNlbGVjdGVkQ2F0QnRuLmJhY2tncm91bmRDb2xvcjtcbiAgbGV0IGZvbnRDb2xvciA9IHNlbGVjdGVkQ2F0QnRuLmNvbG9yO1xuICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcbiAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gZm9udENvbG9yO1xuICBwYWdlVGl0bGUuZGF0YXNldC5jYXRJZCA9IHNlbGVjdGVkQ2F0ZWdvcnlCdG4uZGF0YXNldC5jYXRJZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KSB7XG4gIC8vIExvb3AgdGhyb3VnaCBhbGwgdGFza0NvbnRhaW5lckRpdiBlbGVtZW50cyBhbmQgY2hlY2sgdGhlaXIgdGFza3MnIGR1ZSBkYXRlc1xuICBjb25zdCBhbGxUYXNrQ29udGFpbmVyRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrQ29udGFpbmVyRGl2Jyk7XG4gIGFsbFRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbiAgICAgIGNvbnN0IHRhc2tEaXYgPSB0YXNrQ29udGFpbmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRGl2Jyk7IC8vIEdldCB0aGUgdGFza0RpdiBpbnNpZGUgdGhlIGN1cnJlbnQgdGFza0NvbnRhaW5lckRpdlxuICAgICAgY29uc3QgdGFza0lkID0gdGFza0Rpdi5kYXRhc2V0LnRhc2tJZDtcbiAgICAgIFxuICAgICAgY29uc3QgdGFzayA9IGdldFRhc2tCeUlkKHRhc2tJZCk7IC8vIFJldHJpZXZlIHRoZSB0YXNrIG9iamVjdCBieSBJRFxuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgdGFzaydzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBzZWxlY3RlZFRpbWVsaW5lXG4gICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IG5ldyBEYXRlKGZvcm1hdERhdGVGb3JJbnB1dCh0YXNrLmR1ZURhdGUpKTtcbiAgICAgIHRhc2tEdWVEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAvLyBBc3NpZ24gdGhlIHRhc2sgY2F0ZWdvcnkgdG8gdGFza0NhdGVnb3J5XG4gICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSB0YXNrLmNhdGVnb3J5O1xuXG4gICAgICBpZiAoKHNlbGVjdGVkVGltZWxpbmUgPT09IG51bGwgfHwgdGFza0R1ZURhdGUgPD0gc2VsZWN0ZWRUaW1lbGluZSkgJiYgKHNlbGVjdGVkQ2F0ZWdvcnkgPT09IFwiQWxsIEluYm94XCIgfHwgdGFza0NhdGVnb3J5Lm5hbWUgPT09IHNlbGVjdGVkQ2F0ZWdvcnkpKSB7XG4gICAgICAgICAgLy8gU2hvdyB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIGVuZERhdGUsIGFuZCBjYXRlZ29yeSBtYXRjaGVzXG4gICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSGlkZSB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgb3V0c2lkZSB0aGUgcmFuZ2Ugb3IgY2F0ZWdvcnkgZG9lc24ndCBtYXRjaFxuICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH1cblxuICAgICAgLy9IZWxwZXIgZnVuY3Rpb25cbiAgICAgIGZ1bmN0aW9uIGdldFRhc2tCeUlkKHRhc2tJZCkge1xuICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNhdGVnb3J5XG4gICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSB0YXNrIGluIHRoZSBjYXRlZ29yeSdzIHRhc2tzIGFycmF5IHdpdGggdGhlIG1hdGNoaW5nIElEXG4gICAgICAgICAgICBjb25zdCB0YXNrID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7IC8vIFJldHVybiB0aGUgdGFzayBpZiBmb3VuZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gUmV0dXJuIG51bGwgaWYgbm8gdGFzayB3aXRoIHRoZSBnaXZlbiBJRCBpcyBmb3VuZFxuICAgICAgICB9XG4gIH0pO1xufTtcblxuXG4iLCJpbXBvcnQgeyBUYXNrLCB0YXNrQ291bnRlciB9IGZyb20gXCIuL3Rhc2tGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnREYXRlLCBmb3JtYXREYXRlRm9ySW5wdXQsIGlzRGFya0NvbG9yLCByZ2JUb0hleCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdXBkYXRlUGFnZVRpdGxlLCB1cGRhdGVQYWdlVGFza3N9IGZyb20gXCIuL2Rpc3BsYXlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IENhdGVnb3J5LCBjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGUgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbmF2Jyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xuY29uc3QgY2F0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0TW9kYWwnKTtcbmNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5jb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsYXBzZUJ0bicpO1xuY29uc3Qgc29ydE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29ydE9wdGlvbnMnKTtcbmNvbnN0IHNvcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydEJ0bicpO1xuY29uc3QgZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlQnRuJyk7XG5jb25zdCBJbXBvcnRhbmNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydGFuY2VCdG4nKTtcblxuXG5jb25zdCBjcmVhdGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZVRhc2snKTtcbmNvbnN0IG9rVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva1Rhc2tCdG4nKVxuY29uc3QgY2FuY2VsVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxUYXNrQnRuJyk7XG5jb25zdCBkZWxldGVCdG5Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcbmNvbnN0IG5ld0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdDYXRCdG4nKTtcbmNvbnN0IG9rQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rQ2F0QnRuJyk7XG5jb25zdCBjYW5jZWxDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsQ2F0QnRuJyk7XG5jb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbGwgSW5ib3gnKVxuY29uc3QgcmVzcG9uc2liaWxpdGllc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSZXNwb25zaWJpbGl0aWVzJyk7XG5jb25zdCBldmVudHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRXZlbnRzICYgU29jaWFsJyk7XG5jb25zdCBwcm9ncmFtbWluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9ncmFtbWluZyBDb3Vyc2UnKTtcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJyk7XG5jb25zdCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG5jb25zdCBhbGxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG5jb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheUJ0bicpO1xuY29uc3QgdGhpc1dlZWtCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc1dlZWtCdG4nKTtcbmNvbnN0IHRoaXNNb250aEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzTW9udGhCdG4nKTtcbmNvbnN0IHBhZ2VUaW1lbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGltZWxpbmUnKTtcbmxldCBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xubGV0IHNwYW5DYXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZUNhdE1vZGFsXCIpWzBdO1xubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5sZXQgcGFnZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpO1xuXG5sZXQgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIilcbmxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIik7XG5sZXQgZHVlRGF0ZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKTtcbmxldCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIik7XG5sZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG5sZXQgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTtcbmxldCB0aW1lbGluZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZWxpbmVCdG5zJyk7XG5cbmxldCBzZWxlY3RlZENhdGVnb3J5ID0gJ0FsbCBJbmJveCc7XG5sZXQgc2VsZWN0ZWRDYXRlZ29yeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkQ2F0ZWdvcnkpO1xubGV0IHNlbGVjdGVkVGltZWxpbmUgPSBudWxsO1xubGV0IHNlbGVjdGVkVGltZWxpbmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbEJ0blwiKTtcblxuY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuXG5leHBvcnQge1xuICBjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCwgc3BhbkNhdE1vZGFsLHRhc2tzQ29udGFpbmVyLGZvcm0scGFnZVRpdGxlLGNvbGxhcHNlQnRuLGNyZWF0ZVRhc2tCdG4sb2tUYXNrQnRuLGNhbmNlbFRhc2tCdG4sZGVsZXRlQnRuTW9kYWwsbmV3Q2F0QnRuLG9rQ2F0QnRuLGNhbmNlbENhdEJ0bixpbmJveEJ0bixyZXNwb25zaWJpbGl0aWVzQnRuLGV2ZW50c0J0bixwcm9ncmFtbWluZ0J0bix0aXRsZUlucHV0LGNhdGVnb3J5U2VsZWN0LGR1ZURhdGVTZWxlY3QscHJpb3JpdHlTZWxlY3QsZGVzY3JpcHRpb25JbnB1dCxjYXRlZ29yeUJ1dHRvbnMsYWxsQnRuLCB0b2RheUJ0biwgdGhpc1dlZWtCdG4sIHRoaXNNb250aEJ0biwgcGFnZVRpbWVsaW5lLCBjb2xvclBpY2tlciwgY29sb3JEaXNwbGF5ICBcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0YXNrRXZMaXN0ZW5lcnMoKXtcbiAgY3JlYXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBCcmluZ3MgdXAgbmV3IHRhc2sgbW9kYWwgXG4gICAgICAvLyBTZXQgZGVmYXVsdCBpbnB1dHNcbiAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgY2F0ZWdvcnlTZWxlY3QudmFsdWUgPSBzZWxlY3RlZENhdGVnb3J5O1xuICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGxldCBkZCA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgbW0gPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICBcbiAgICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSBhcyBcIm1tLWRkLXl5eXlcIlxuICAgICAgdG9kYXkgPSB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZDtcbiAgICAgIGR1ZURhdGVTZWxlY3QudmFsdWUgPSB0b2RheVxuICAgICAgXG4gICAgICBwcmlvcml0eVNlbGVjdC52YWx1ZSA9IFwiTG93XCI7XG4gICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gXCJcIjtcbiAgXG4gICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgfSk7XG4gIFxuICBjYW5jZWxUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0pO1xuXG4gIG9rVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vQ2FsbHMgYWRkVGFzayBvciBlZGl0VGFza1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVwb3J0VmFsaWRpdHkoKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFzc2lnbiBwcm9wZXJ0eSB2YWx1ZXMgYmFzZWQgb2ZmIGlucHV0c1xuICAgICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5T2JqZWN0ID0gY2F0ZWdvcmllcy5maW5kKGNhdGVnb3J5ID0+IGNhdGVnb3J5Lm5hbWUgPT09IGNhdGVnb3J5VmFsdWUpO1xuICAgICAgICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBpbXBvcnRhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgY3JlYXRpbmcgYSBuZXcgdGFzayBvciB1cGRhdGluZyBhbiBleGlzdGluZyBvbmVcbiAgICAgICAgICBpZiAodGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQpIHtcbiAgICAgICAgICAgICAgZWRpdFRhc2sodGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWRkVGFzayh0aXRsZSwgY2F0ZWdvcnksIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcbiAgICAgICAgfSBlbHNlIHsgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOyB9XG4gICAgICBcbiAgICBmdW5jdGlvbiBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgLy8gQ3JlYXRlIFRhc2sgT2JqZWN0IFxuICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tDb3VudGVyLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICBcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICAgICAgY2F0ZWdvcnlPYmplY3QuYWRkVGFza1RvQ2F0KG5ld1Rhc2spO1xuICAgICAgICBsZXQgdGFza0lkID0gbmV3VGFzay5pZFxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGFpbmVyIGRpdiBmb3IgdGhlIHRhc2sgYW5kIHRoZSBsaW5lIGJyZWFrXG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0NvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQ29udGFpbmVyRGl2Jyk7XG4gICAgXG4gICAgICAgIC8vIEFkZCBUYXNrIERpdlxuICAgICAgICBmdW5jdGlvbiBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3Qpe1xuICAgICAgICAgICAgY29uc3QgdGFza0JpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFza0JpZ0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQmlnRGl2Jyk7XG4gICAgICAgICAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICB0YXNrRGl2LmRhdGFzZXQudGFza0lkID0gdGFza0lkO1xuICAgIFxuICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKG5ld1Rhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0YXNrUHJpbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tQcmltLmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmltJyk7XG4gICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tQcmltKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDYXRlZ29yeScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkudGV4dENvbnRlbnQgPSBcIihcIiArIGNhdGVnb3J5ICsgXCIpXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1ByaW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO3Rhc2tQcmltLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza0NhdGVnb3J5KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhc2tTZWMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmNsYXNzTGlzdC5hZGQoJ3Rhc2tTZWMnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1NlYyk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgndGFza0R1ZURhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlRm9ySW5wdXQoZHVlRGF0ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaGVzdFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTMzMy5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTIyMi5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2Uge3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIn1cbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5SW1nLmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5SW1nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG5CaWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmlkID0gdGFza0lkO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuc3JjID0gXCIuL2ltYWdlcy9kZWxldGUucG5nXCI7IC8vIENoYW5nZSB0byB5b3VyIGRlbGV0ZSBpbWFnZSdzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgIFxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tJZCA9IGRlbGV0ZUJ0bkJpZ0Rpdi5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXNrSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSBkZWxldGVUYXNrKHRhc2tJZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZSk7IHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO3Rhc2tCaWdEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuQmlnRGl2KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxpbmVicmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XG4gICAgXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRhc2tCaWdEaXYpO3Rhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobGluZWJyZWFrKTt0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrQ29udGFpbmVyRGl2KTsgICAgXG4gICAgICAgIH0gYWRkVGFza0Rpdih0YXNrSWQsIHRpdGxlLCBjYXRlZ29yeSwgZHVlRGF0ZSwgdGFza0NvdW50ZXIsIHByaW9yaXR5U2VsZWN0KTtcbiAgICAgICAgXG4gICAgICAgIC8vSGVscGVyIEZ1bmN0aW9uXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgIFxuICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IGFsbEJ0bjtcbiAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSBjYXRlZ29yeVNlbGVjdC52YWx1ZTtcbiAgICBzZWxlY3RDYXRGaWx0ZXIoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICB9KTtcblxuICBkZWxldGVCdG5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgXG4gICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgZGVsZXRlVGFzayh0YXNrSWQpO1xuICB9KTsgIC8vIChpbnNpZGUgbW9kYWwpLiBPdXRzaWRlIG1vZGFsIGV2IGxpc3RlbmVyIGlzIGluc2lkZSBhZGRUYXNrRGl2IGV2bGlzdGVuZXIgJ0RlbGV0ZUJ0bkJpZ0RpdidcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBlcnJvciBjbGFzcyB3aGVuIHRoZSB0aXRsZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gIH0pO1xuICBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tJZCkge1xuICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz8nKSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbmNlbHMsIGp1c3QgY2xvc2UgdGhlIG1vZGFsXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgICAgaWYgKCF0YXNrRGl2KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBkaXYgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEZpbmQgdGhlIHRhc2sgb2JqZWN0IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyB0YXNrSWRcbiAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgbGV0IHRhc2tDYXRlZ29yeTtcbiAgICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgIGlmICh0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgIHRhc2tDYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLy8gUmVtb3ZlIHRoZSB0YXNrIGZyb20gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXlcbiAgICAgIHRhc2tDYXRlZ29yeS5yZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpO1xuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0NvdW50ZXJcbiAgICAgIHRhc2tDb3VudGVyLS07XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXIgPSBjYXRlZ29yaWVzLnJlZHVjZSgoY291bnQsIGNhdGVnb3J5KSA9PiBjb3VudCArIGNhdGVnb3J5LnRhc2tzLmxlbmd0aCwgMCk7XG4gIFxuICAgICAgLy8gRGVsZXRlIHRoZSB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBsZXQgdGFza0NvbnRhaW5lckRpdiA9IHRhc2tEaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgdGFza0NvbnRhaW5lckRpdi5yZW1vdmUoKTsgLy8gUmVtb3ZlIHRhc2tDb250YWluZXJEaXZcbiAgXG4gICAgICAvLyBIaWRlIHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBcbiAgICAgIC8vIENsZWFyIHRoZSBlZGl0aW5nVGFza0lkIHNpbmNlIHdlJ3ZlIGp1c3QgZGVsZXRlZCB0aGUgdGFza1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY2F0RXZMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGNhdFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzhhNTliOSc7XG4gICAgICBjb25zb2xlLmxvZyhjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcblxuICAgfSk7XG4gICBva0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcblxuICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ25ldycpIHtcblxuICAgICAgICAgICAvLyBHZXQgdGhlIGNhdGVnb3J5IG5hbWUgYW5kIGNvbG9yIGZyb20gdGhlIGZvcm0gaW5wdXRzXG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICBsZXQgY2F0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcblxuICAgICAgICAgICAvL1NldCBkZWZhdWx0IGNhdCBjb2xvciBwaWNrZXJcbiAgICAgICAgICAgY2F0Q29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGNhdGVnb3J5IGluc3RhbmNlXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeSA9IG5ldyBDYXRlZ29yeShjYXRUaXRsZSwgY2F0Q29sb3IpO1xuICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2gobmV3Q2F0ZWdvcnkpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsaXN0IGl0ZW1cbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlubmVyVGV4dCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uaWQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhdEJ0bnMnKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNhdENvbG9yO1xuICAgICAgICAgICBuZXdCdXR0b24uZGF0YXNldC5jYXRJZCA9IG5ld0NhdGVnb3J5LmNhdElkO1xuICAgXG4gICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihjYXRDb2xvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXJrJyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpZ2h0Jyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICBuZXdDYXRlZ29yeUVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3JpZXNMaXN0JykuYXBwZW5kQ2hpbGQobmV3Q2F0ZWdvcnlFbGVtZW50KTtcbiAgICAgICAgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG4gICAgICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgIC8vUmV0cmlldmUgdGhlIGNhdGVnb3J5IGZyb20gdGhlIGNhdGVnb3JpZXMgYXJyYXkgYmFzZWQgb24gdGhlIGNhdElEXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdElEKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBjYXRJRCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2F0SWQgaXMgbm90IGEgbnVtYmVyIGF0IFtkZXNjcmlwdGlvbiBvZiB0aGUgY29kZSBsb2NhdGlvbl0nLCBjYXRJRCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgbGV0IGVkaXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChjYXQgPT4gY2F0LmNhdElkID09PSBjYXRJRCk7XG4gICAgICAgXG4gICAgICAgICAgIC8vVXBkYXRlIHRoZSBjYXRlZ29yeSB2YWx1ZXNcbiAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5Lm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5jb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgICAgIFxuICAgICAgICAgICAgICAgLy9VcGRhdGUgdGhlIFVJIGVsZW1lbnQgKGJ1dHRvbiBpbiB0aGlzIGNhc2UpIHJlcHJlc2VudGluZyB0aGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgIGxldCBhc3NvY2lhdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW2RhdGEtY2F0LWlkPVwiJHtjYXRJRH1cIl1gKTtcbiAgICAgICAgICAgICAgIGlmIChhc3NvY2lhdGVkQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5pbm5lclRleHQgPSBlZGl0aW5nQ2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVkaXRpbmdDYXRlZ29yeS5jb2xvcjtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGNvbG9yIGJyaWdodG5lc3MgdG8gYWRqdXN0IHRleHQgY29sb3IgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGVkaXRpbmdDYXRlZ29yeS5jb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvL1VwZGF0ZSBwYWdlIHRpdGxlXG4gICAgICAgICAgIHBhZ2VUaXRsZS5pbm5lckhUTUwgPSBjYXRUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgY29uc29sZS5sb2coY29sb3JQaWNrZXIudmFsdWUpO1xuICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgICAgfVxuICAgICAgIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKTtcbiAgIFxuICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgIFxuICAgICAgIC8vIEhlbHBlciBGdW5jdGlvblxuICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKSB7XG4gICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBvcHRpb25zXG4gICAgICAgICAgIGxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpO1xuICAgICAgICAgICB3aGlsZSAoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QucmVtb3ZlQ2hpbGQoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLy8gQWRkIG5ldyBvcHRpb25zIGJhc2VkIG9uIHRoZSBjYXRlZ29yaWVzIGFycmF5XG4gICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgICAgIH0pO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY2FuY2VsQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgICAgXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgY3VycmVudE1vZGUgPSAnZWRpdCc7XG4gICAgICAgb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKTtcbiAgICAgICBmdW5jdGlvbiBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpe1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKTtcbiAgICAgICAgICAgbGV0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbiAgICAgICBcbiAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICBjYXRUaXRsZS52YWx1ZSA9IHBhZ2VUaXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY29sb3JEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBoZXhDb2xvciA9IHJnYlRvSGV4KHJnYkNvbG9yKTtcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9IGhleENvbG9yO1xuICAgIGNvbG9yUGlja2VyLmNsaWNrKCk7XG4gICAgICBcbiAgICB9KTtcbiAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7ICAgICAvLyBXaGVuIHlvdSBwaWNrIGEgY29sb3IsIHVwZGF0ZSB0aGUgZGlzcGxheVxuICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdEZpbHRlcnMoKXtcbiAgc2VsZWN0ZWRDYXRlZ29yeUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG4gIHNlbGVjdGVkVGltZWxpbmVCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKVxuICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdGltZUZpbHRlckV2TGlzdGVuZXJzKCl7XG4gIC8vVGltZWxpbmUgYnV0dG9ucyBldmVudCBsaXN0ZW5lcnNcbiAgdG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZWN0ZWRUaW1lbGluZSA9IHRvZGF5O1xuICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSB0b2RheUJ0bjtcbiAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmUgPSBvbmVXZWVrTGF0ZXI7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gdGhpc1dlZWtCdG47XG4gICAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIHRoaXNNb250aEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9uZU1vbnRoTGF0ZXIgPSBuZXcgRGF0ZSgpO1xuICAgICAgb25lTW9udGhMYXRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDMwKTtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmUgPSBvbmVNb250aExhdGVyO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IHRoaXNNb250aEJ0bjtcbiAgICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgYWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gYWxsQnRuO1xuICAgICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjYXRGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1Jlc2VsZWN0IGNhdGVnb3J5IGJ1dHRvbnMgdG8gcGljayB1cCBhbnkgbmV3bHkgYWRkZWQgb25lICBcbiAgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTsgXG4gIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChjYXRCdG4pID0+IHtcbiAgICBjYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gU2V0IHNlbGVjdGVkQ2F0ZWdvcnkgdG8gdGhlIGNsaWNrZWQgYnV0dG9uJ3MgdGV4dCBjb250ZW50XG4gICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB9KTtcbiAgfSk7IFxufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlTZXR0aW5ncygpe1xuICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBOYXYgQ29sbGFwc2UgJiBFeHBhbmRcbiAgICAgIGNvbnN0IG5hdkRpc3BsYXlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdikuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gc2NyZWVuV2lkdGggPCA3NTA7XG4gICAgXG4gICAgICBpZiAoaXNTbWFsbFNjcmVlbikge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIDMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMi8zJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcyNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyB0YXNrIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn07XG5cbmZ1bmN0aW9uIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KXtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCBjYXRlZ29yeSBidXR0b25zXG4gICAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcblxuICAgIC8vIEdldCBhbmQgYWRkICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgdG8gdGhlIGNsaWNrZWQgYnV0dG9uXG4gICAgc2VsZWN0ZWRDYXRlZ29yeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKTtcblxuICAgIC8vIFVwZGF0ZSBQYWdlXG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICByZXR1cm4gc2VsZWN0ZWRDYXRlZ29yeUJ0bjtcbn1cblxuZnVuY3Rpb24gc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKXtcbiAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCB0aW1lbGluZSBidXR0b25zXG4gICAgdGltZWxpbmVCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBQYWdlXG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICBcbiAgICBzZWxlY3RlZFRpbWVsaW5lQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgcmV0dXJuIHNlbGVjdGVkVGltZWxpbmVCdG47XG59XG5cbnNvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpZihzb3J0T3B0aW9ucy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpe1xuICAgIHNvcnRPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgc29ydEJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4IDVweCAwcHggMHB4JztcblxuICAgIH1lbHNlIHtcbiAgICAgICAgc29ydE9wdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgXG4gICAgICAgIHNvcnRCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJyc7XG4gICAgfVxufSk7IiwiaW1wb3J0IHtjYXRlZ29yeUJ1dHRvbnN9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHsgdGFza0NvdW50ZXIgfSBmcm9tICcuL3Rhc2tGdW5jdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgQ2F0ZWdvcnkge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbG9yLCBjYXRJZCA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY2F0SWQgPSBjYXRJZCB8fCArK2xhc3RDYXRJZDtcbiAgICB9XG4gICAgYWRkVGFza1RvQ2F0KHRhc2spIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAvLyBTZXQgdGhlIHRhc2sncyBJRCB0byBtYXRjaCB0aGUgY29ycmVjdCBjb3VudGVyIHZhbHVlXG4gICAgICAgIHRhc2suaWQgPSB0YXNrQ291bnRlcjtcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICB9XG4gICAgcmVtb3ZlVGFza0Zyb21DYXQodGFza0lkKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gICAgfVxufVxuXG5sZXQgbGFzdENhdElkID0gTWF0aC5tYXgoLi4uQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidG4gPT4gcGFyc2VJbnQoYnRuLmRhdGFzZXQuY2F0SWQpKSk7XG5sZXQgZGVmYXVsdENhdGVnb3JpZXMgPSBpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMoKTtcbmxldCBjYXRlZ29yaWVzID0gWy4uLmRlZmF1bHRDYXRlZ29yaWVzXTsgXG5cbi8vQ2hlY2tzIGlmIHdlIGFyZSBlZGRpdGluZyBvciBjcmVhdGluZyBhIG5ldyBjYXQgIFxubGV0IGN1cnJlbnRNb2RlID0gbnVsbDtcbmxldCBjYXRJRDtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCkge1xuICAgIGNvbnN0IGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzRGl2IGJ1dHRvbicpO1xuICAgIGxldCBjYXRlZ29yaWVzID0gQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidXR0b24gPT4ge1xuICAgICAgICBsZXQgY2F0SWQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5jYXRJZCk7IFxuICAgICAgICBpZiAoY2F0SWQgPiBsYXN0Q2F0SWQpIGxhc3RDYXRJZCA9IGNhdElkO1xuICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KGJ1dHRvbi50ZXh0Q29udGVudC50cmltKCksIG51bGwsIGNhdElkKTsgLy8gUGFzc2luZyBjYXRJZCB0byB0aGUgY29uc3RydWN0b3JcbiAgICB9KTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufSBcblxuZXhwb3J0IHtjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGV9OyIsImltcG9ydCB7IGNhdGVnb3JpZXMgfSBmcm9tICcuL2NhdGVnb3J5RnVuY3Rpb25zJztcblxubGV0IHRhc2tDb3VudGVyID0gMDtcblxuZXhwb3J0IGNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIHByaW9yaXR5LCBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5T2JqZWN0XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7IFxuICAgIH1cbiAgICB0b2dnbGVDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9ICF0aGlzLmNvbXBsZXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IHt0YXNrQ291bnRlcn07XG5cblxuIiwiaW1wb3J0IHtUYXNrfSBmcm9tJy4vdGFza0Z1bmN0aW9ucyc7XG5pbXBvcnQge0NhdGVnb3J5fSBmcm9tJy4vY2F0ZWdvcnlGdW5jdGlvbnMnO1xuaW1wb3J0IHt0YXNrRXZMaXN0ZW5lcnMsIHNldERlZmF1bHRGaWx0ZXJzLCB0aW1lRmlsdGVyRXZMaXN0ZW5lcnMsIGNhdEZpbHRlckV2TGlzdGVuZXJzLGNhdEV2TGlzdGVuZXJzLCBkaXNwbGF5U2V0dGluZ3N9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHtjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCxzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXl9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG50YXNrRXZMaXN0ZW5lcnMoKTtcbmNhdEV2TGlzdGVuZXJzKCk7XG5zZXREZWZhdWx0RmlsdGVycygpO1xudGltZUZpbHRlckV2TGlzdGVuZXJzKCk7XG5jYXRGaWx0ZXJFdkxpc3RlbmVycygpO1xuZGlzcGxheVNldHRpbmdzKCk7XG5cbiJdLCJuYW1lcyI6WyJpc0RhcmtDb2xvciIsImNvbG9yIiwicmdiIiwic3RhcnRzV2l0aCIsInIiLCJwYXJzZUludCIsInNsaWNlIiwiZyIsImIiLCJ2YWx1ZXMiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJzcGxpdCIsImJyaWdodG5lc3MiLCJNYXRoIiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0RGF0ZUZvcklucHV0IiwiZGF0ZVN0cmluZyIsImRhdGUiLCJEYXRlIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJ1cGRhdGVQYWdlVGl0bGUiLCJzZWxlY3RlZENhdGVnb3J5QnRuIiwicGFnZVRpdGxlIiwidGV4dENvbnRlbnQiLCJzZWxlY3RlZENhdEJ0biIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJiZ0NvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZm9udENvbG9yIiwic3R5bGUiLCJkYXRhc2V0IiwiY2F0SWQiLCJ1cGRhdGVQYWdlVGFza3MiLCJzZWxlY3RlZFRpbWVsaW5lIiwic2VsZWN0ZWRDYXRlZ29yeSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrQ29udGFpbmVyRGl2IiwidGFzayIsInRhc2tJZCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRhc2tzIiwiZmluZCIsImlkIiwiZ2V0VGFza0J5SWQiLCJxdWVyeVNlbGVjdG9yIiwidGFza0R1ZURhdGUiLCJkdWVEYXRlIiwic2V0SG91cnMiLCJ0YXNrQ2F0ZWdvcnkiLCJuYW1lIiwiZGlzcGxheSIsImNvbnRlbnQiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwic29ydE9wdGlvbnMiLCJzb3J0QnRuIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJhbGxCdG4iLCJ0b2RheUJ0biIsInRoaXNXZWVrQnRuIiwidGhpc01vbnRoQnRuIiwicGFnZVRpbWVsaW5lIiwic3BhbiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzcGFuQ2F0TW9kYWwiLCJ0aXRsZUlucHV0IiwiY2F0ZWdvcnlTZWxlY3QiLCJkdWVEYXRlU2VsZWN0IiwicHJpb3JpdHlTZWxlY3QiLCJkZXNjcmlwdGlvbklucHV0IiwiY2F0ZWdvcnlCdXR0b25zIiwidGltZWxpbmVCdXR0b25zIiwic2VsZWN0ZWRUaW1lbGluZUJ0biIsInRvZGF5IiwiZ2V0Q3VycmVudERhdGUiLCJzZWxlY3RDYXRGaWx0ZXIiLCJidXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzZWxlY3RUaW1lRmlsdGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvcmRlclJhZGl1cyIsIkNhdGVnb3J5IiwiY29uc3RydWN0b3IiLCJ0aGlzIiwibGFzdENhdElkIiwiYWRkVGFza1RvQ2F0IiwicHVzaCIsInRhc2tDb3VudGVyIiwicmVtb3ZlVGFza0Zyb21DYXQiLCJmaWx0ZXIiLCJjYXRJRCIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiZXJyb3IiLCJyZWR1Y2UiLCJjb3VudCIsInBhcmVudE5vZGUiLCJ2YWx1ZSIsImRkIiwibW0iLCJ5eXl5IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlcG9ydFZhbGlkaXR5IiwiY2F0ZWdvcnlWYWx1ZSIsImltcG9ydGFuY2UiLCJ1bmRlZmluZWQiLCJzcmMiLCJlZGl0VGFzayIsIm5ld1Rhc2siLCJjcmVhdGVFbGVtZW50Iiwib3BlblRhc2tNb2RhbEZvckVkaXRpbmciLCJ0YXNrQmlnRGl2IiwidGFza1ByaW0iLCJhcHBlbmRDaGlsZCIsImNoZWNrYm94IiwidHlwZSIsInN0b3BQcm9wYWdhdGlvbiIsImNoZWNrZWQiLCJ0YXNrVGl0bGUiLCJ0YXNrUHJpb3JpdHkiLCJ0YXNrU2VjIiwidGFza1ByaW9yaXR5SW1nIiwiZGVsZXRlQnRuQmlnRGl2IiwibGluZWJyZWFrIiwiYWRkVGFza0RpdiIsImFkZFRhc2siLCJ0YXNrRXZMaXN0ZW5lcnMiLCJjYXRUaXRsZSIsImNhdENvbG9yIiwibmV3Q2F0ZWdvcnkiLCJuZXdDYXRlZ29yeUVsZW1lbnQiLCJuZXdCdXR0b24iLCJpbm5lclRleHQiLCJpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMiLCJlZGl0aW5nQ2F0ZWdvcnkiLCJjYXQiLCJhc3NvY2lhdGVkQnV0dG9uIiwiaW5uZXJIVE1MIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwib3B0aW9uIiwidXBkYXRlQ2F0ZWdvcnlEcm9wZG93biIsIm9wZW5DYXRNb2RhbEZvckVkaXRpbmciLCJoZXhDb2xvciIsIm1hdGNoIiwidG9TdHJpbmciLCJyZ2JUb0hleCIsImNsaWNrIiwiYmFja2dyb3VuZCIsIm9uZVdlZWtMYXRlciIsInNldERhdGUiLCJvbmVNb250aExhdGVyIiwiY2F0QnRuIiwibmF2RGlzcGxheVN0eWxlIiwiaW5uZXJXaWR0aCIsInpJbmRleCIsImdyaWRDb2x1bW4iLCJvbmNsaWNrIiwidGFyZ2V0Iiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==