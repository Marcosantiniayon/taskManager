(()=>{"use strict";function e(){const e=new Date;return e.setHours(0,0,0,0),e}function t(e){let t;return t=e.startsWith("#")?{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)}:e,Math.round((299*t.r+587*t.g+114*t.b)/1e3)<170}function n(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function l(e){let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l}function o(){thisWeekBtn.classList.remove("selectedFilter"),thisMonthBtn.classList.remove("selectedFilter"),allBtn.classList.remove("selectedFilter"),todayBtn.classList.remove("selectedFilter")}function s(e,t,l){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of R){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(n(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==t&&a.name!==t?l.style.display="none":l.style.display="block"})),pageTitle.textContent=t,pageTitle.dataset.catId=l}const a=document.querySelector(".content"),d=document.querySelector("nav"),i=document.querySelector("#modal"),c=document.querySelector("#catModal"),r=document.querySelector(".tasksContainer"),u=document.getElementById("collapseBtn"),m=document.getElementById("createTask"),g=document.getElementById("okTaskBtn"),y=document.getElementById("cancelTaskBtn"),p=document.getElementById("delete"),k=document.getElementById("newCatBtn"),v=document.getElementById("okCatBtn"),E=document.getElementById("cancelCatBtn"),f=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),h=document.getElementById("allBtn"),C=document.getElementById("todayBtn"),B=document.getElementById("thisWeekBtn"),L=document.getElementById("thisMonthBtn"),b=document.getElementById("pageTimeline");let D=document.getElementsByClassName("close")[0],w=document.getElementsByClassName("closeCatModal")[0],x=document.querySelector("form"),T=document.getElementById("pageTitle"),S=document.getElementById("title"),q=document.getElementById("category"),F=document.getElementById("dueDate"),M=document.getElementById("priority"),A=document.getElementById("description"),N=document.querySelectorAll(".catBtns"),P="All Inbox",$=document.getElementById(P),H=e();function z(){N=document.querySelectorAll(".catBtns"),N.forEach((e=>{e.addEventListener("click",(function(){N.forEach((e=>{e.classList.remove("selectedFilter")})),this.classList.add("selectedFilter"),P=this.textContent,Y=parseInt(this.dataset.catId),l(this),s(H,P,Y)}))}))}class W{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++_}addTaskToCat(e){this.tasks.push(e),e.id=j,j++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let Y,_=Math.max(...Array.from(N).map((e=>parseInt(e.dataset.catId)))),O=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>_&&(_=t),new W(e.textContent.trim(),null,t)}))}(),R=[...O],V=null,j=0;class G{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return i.style.display="none",void delete S.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete S.dataset.editingTaskId;for(let l of R)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),j--,j=R.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),i.style.display="none",delete S.dataset.editingTaskId}m.addEventListener("click",(function(){S.value="",q.value="All Inbox";let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,F.value=e,M.value="Low",A.value="",i.style.display="block"})),y.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none"})),g.addEventListener("click",(function(t){if(document.querySelector("form").reportValidity()){t.preventDefault(),S.classList.remove("error");let l=document.getElementById("title").value,o=document.getElementById("category").value,a=document.getElementById("category").value,d=R.find((e=>e.name===a)),c=document.getElementById("dueDate").value,u=document.getElementById("priority").value,m=document.getElementById("description").value;S.dataset.editingTaskId?function(e,t,l,o,a){let d,c=S.dataset.editingTaskId;for(let e of R)if(d=e.tasks.find((e=>e.id==c)),d)break;if(void 0===d)return void console.error(`No task found with id ${c}`);d.title=e,d.category=t,d.dueDate=l,d.priority=o,d.description=a,console.log("editing task, title: "+e+" id: "+c);let r=document.getElementById(c);r.querySelector(".taskTitle").textContent=e,r.querySelector(".taskCategory").textContent=`(${t.name})`,r.querySelector(".taskDueDate").textContent=n(l),r.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete S.dataset.editingTaskId,i.style.display="none",s(H,P)}(l,d,c,u,m):function(t,l,o,a,d,c){let u=new G(j,t,o,a,d,c);j++,console.log(o),o.addTaskToCat(u);let m=u.id;const g=document.createElement("div");function y(e){console.log(e),S.value=e.title,q.value=e.category.name,F.value=e.dueDate,M.value=e.priority,A.value=e.description,S.dataset.editingTaskId=e.id,i.style.display="block"}g.classList.add("taskContainerDiv"),function(t,l,o,s,a,d){const i=document.createElement("div");i.classList.add("taskBigDiv");const c=document.createElement("div");c.classList.add("taskDiv"),c.id=t,c.dataset.taskId=t,c.addEventListener("click",(function(){y(u)}));const m=document.createElement("div");m.classList.add("taskPrim"),c.appendChild(m);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),f.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),f.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",m.appendChild(p),m.appendChild(k),m.appendChild(v);const E=document.createElement("div");E.classList.add("taskSec"),c.appendChild(E);const f=document.createElement("div");f.classList.add("taskDueDate"),f.textContent=n(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=t,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),E.appendChild(f),E.appendChild(I),i.appendChild(c),i.appendChild(C);const B=document.createElement("hr");g.appendChild(i),g.appendChild(B),r.appendChild(g)}(m,t,l,a,0,M),s(H,P)}(l,o,d,c,u,m),i.style.display="none"}else S.classList.add("error");P=q.value,$=document.getElementById(P),console.log($),l($)})),p.addEventListener("click",(function(t){t.stopPropagation();let n=S.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),S.addEventListener("input",(function(){this.classList.remove("error")}))}(),k.addEventListener("click",(function(){V="new",c.style.display="block",catTitle.value="",I.style.backgroundColor="#8a59b9"})),v.addEventListener("click",(function(e){e.preventDefault();let n=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);if(I.style.background=n,f.value=n,"new"===V){let e=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value,l=new W(e,n);R.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=e,s.id=e,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,t(n)?s.style.color="white":s.style.color="black",o.appendChild(s),document.getElementById("categoriesList").appendChild(o),z()}else if("edit"===V){console.log(Y),"number"!=typeof Y&&console.error("catId is not a number at [description of the code location]",Y);let e=R.find((e=>e.catId===Y));if(e){e.name=document.getElementById("catTitle").value,e.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${Y}"]`);n&&(n.innerText=e.name,n.style.backgroundColor=e.color,t(e.color)?(n.style.color="white",T.style.color="white",console.log(T.style.color)):(n.style.color="black",T.style.color="black",console.log(T.style.color)))}else console.error("Could not find category with ID:",Y);T.innerHTML=catTitle.value,console.log(f.value),T.style.backgroundColor=f.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);R.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),c.style.display="none"})),E.addEventListener("click",(function(e){e.preventDefault(),c.style.display="none"})),T.addEventListener("click",(function(){Y=parseInt(this.dataset.catId),V="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,c.style.display="block"}(T)})),I.addEventListener("click",(function(){console.log(I.style.backgroundColor),f.click()})),f.addEventListener("input",(function(){I.style.background=f.value})),$.classList.add("selectedFilter"),l($),document.getElementById("allBtn").classList.add("selectedFilter"),C.addEventListener("click",(function(){const t=e();H=t,s(H,P),o(),C.classList.add("selectedFilter"),b.textContent=this.textContent})),B.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+7),H=n,s(H,P),o(),B.classList.add("selectedFilter"),b.textContent=this.textContent})),L.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+30),H=n,s(H,P),o(),L.classList.add("selectedFilter"),b.textContent=this.textContent})),h.addEventListener("click",(function(){H=null,s(H,P),o(),h.classList.add("selectedFilter"),b.textContent=this.textContent,h.classList.add("selectedFilter")})),z(),u.addEventListener("click",(function(){const e=window.getComputedStyle(d).display;window.innerWidth<750?"none"===e?(d.style.display="block",d.style.zIndex="2",a.style.gridColumn="1 / 3",a.classList.add("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png"):"none"===e?(d.style.display="block",d.style.zIndex="",a.style.gridColumn="2/3",a.classList.remove("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png")})),D.onclick=function(){i.style.display="none",delete S.dataset.editingTaskId},w.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target==i?i.style.display="none":e.target==c&&(c.style.display="none")},x.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),g.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kaXNwbGF5RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2RvbUVsZW1lbnRzLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2NhdGVnb3J5RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL3Rhc2tGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvaW5kZXgzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpeyBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7IC8vIFNldCBob3VycywgbWludXRlcywgc2Vjb25kcywgYW5kIG1pbGxpc2Vjb25kcyB0byAwIHRvIGNvbXBhcmUgb25seSB0aGUgZGF0ZXNcbiAgICByZXR1cm4gdG9kYXk7XG4gIH1cbmV4cG9ydCBmdW5jdGlvbiBpc0RhcmtDb2xvcihjb2xvcikge1xuICAvLyBDb252ZXJ0IGhleCBjb2xvciB0byByZ2JcbiAgbGV0IHJnYjtcbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgbGV0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgbGV0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgbGV0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgcmdiID0geyByLCBnLCBiIH07XG4gIH0gZWxzZSB7XG4gICAgICAvLyBBc3N1bWUgaXQncyBhbHJlYWR5IGFuIHJnYiBjb2xvclxuICAgICAgcmdiID0gY29sb3I7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgYnJpZ2h0bmVzcyBvbiBhIHNjYWxlIGZyb20gMCB0byAyNTVcbiAgbGV0IGJyaWdodG5lc3MgPSBNYXRoLnJvdW5kKCgocmdiLnIgKiAyOTkpICsgKHJnYi5nICogNTg3KSArIChyZ2IuYiAqIDExNCkpIC8gMTAwMCk7XG4gIFxuICByZXR1cm4gYnJpZ2h0bmVzcyA8IDE3MDsgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGNvbG9yIGlzIGRhcmtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlRm9ySW5wdXQoZGF0ZVN0cmluZykge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gIGNvbnN0IG9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsgLy8gR2V0IHRoZSB0aW1lem9uZSBvZmZzZXQgaW4gbWludXRlc1xuICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBvZmZzZXQpOyAvLyBBZGp1c3QgdGhlIGRhdGUgYnkgdGhlIHRpbWV6b25lIG9mZnNldFxuICBjb25zdCBtbSA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBkZCA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgeXl5eSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGAke21tfS8ke2RkfS8ke3l5eXl9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgLy8gU2VwYXJhdGUgUkdCIHZhbHVlc1xuICBsZXQgdmFsdWVzID0gcmdiLm1hdGNoKC9ecmdiXFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKVxcKSQvKTtcblxuICAvLyBDb252ZXJ0IGVhY2ggdmFsdWUgdG8gaGV4YWRlY2ltYWxcbiAgbGV0IGhleENvbG9yID0gXCIjXCIgKyAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMV0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1syXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzNdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG5cbiAgcmV0dXJuIGhleENvbG9yO1xufVxuICAiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JJbnB1dCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IHsgY3VycmVudENhdGVnb3J5IH0gZnJvbSBcIi4vZG9tRWxlbWVudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclBhZ2VDaGFuZ2VzKGNhdGVnb3J5QnV0dG9uKXtcbiAgICBsZXQgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhdGVnb3J5QnV0dG9uKTtcbiAgICBsZXQgYmdDb2xvciA9IGNvbXB1dGVkU3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBmb250Q29sb3IgPSBjb21wdXRlZFN0eWxlLmNvbG9yO1xuICAgIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9IGZvbnRDb2xvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbHRlcnMoKXtcbiAgICB0aGlzV2Vla0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIGFsbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHRvZGF5QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KGVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnksIGNhdElEKSB7XG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0YXNrQ29udGFpbmVyRGl2IGVsZW1lbnRzIGFuZCBjaGVjayB0aGVpciB0YXNrcycgZHVlIGRhdGVzXG4gICAgY29uc3QgYWxsVGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuICAgIGFsbFRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0RpdiA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEaXYnKTsgLy8gR2V0IHRoZSB0YXNrRGl2IGluc2lkZSB0aGUgY3VycmVudCB0YXNrQ29udGFpbmVyRGl2XG4gICAgICAgIGNvbnN0IHRhc2tJZCA9IHRhc2tEaXYuZGF0YXNldC50YXNrSWQ7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBnZXRUYXNrQnlJZCh0YXNrSWQpOyAvLyBSZXRyaWV2ZSB0aGUgdGFzayBvYmplY3QgYnkgSURcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFzaydzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBlbmREYXRlXG4gICAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gbmV3IERhdGUoZm9ybWF0RGF0ZUZvcklucHV0KHRhc2suZHVlRGF0ZSkpO1xuICAgICAgICB0YXNrRHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFzaydzIGNhdGVnb3J5IG1hdGNoZXMgdGhlIHNlbGVjdGVkIGNhdGVnb3J5XG4gICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IHRhc2suY2F0ZWdvcnk7XG5cbiAgICAgICAgaWYgKChlbmREYXRlID09PSBudWxsIHx8IHRhc2tEdWVEYXRlIDw9IGVuZERhdGUpICYmIChzZWxlY3RlZENhdGVnb3J5ID09PSBcIkFsbCBJbmJveFwiIHx8IHRhc2tDYXRlZ29yeS5uYW1lID09PSBzZWxlY3RlZENhdGVnb3J5KSkge1xuICAgICAgICAgICAgLy8gU2hvdyB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIGVuZERhdGUsIGFuZCBjYXRlZ29yeSBtYXRjaGVzXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSGlkZSB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgb3V0c2lkZSB0aGUgcmFuZ2Ugb3IgY2F0ZWdvcnkgZG9lc24ndCBtYXRjaFxuICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGFza0J5SWQodGFza0lkKSB7XG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXRlZ29yeVxuICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhc2sgaW4gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXkgd2l0aCB0aGUgbWF0Y2hpbmcgSURcbiAgICAgICAgICAgICAgY29uc3QgdGFzayA9IGNhdGVnb3J5LnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzazsgLy8gUmV0dXJuIHRoZSB0YXNrIGlmIGZvdW5kXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCBpZiBubyB0YXNrIHdpdGggdGhlIGdpdmVuIElEIGlzIGZvdW5kXG4gICAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9hcHBseSBwYWdlIHRpdGxlIGJhc2VkIG9uIGNhdGVncnlcbiAgICBwYWdlVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZENhdGVnb3J5O1xuICAgIHBhZ2VUaXRsZS5kYXRhc2V0LmNhdElkID0gY2F0SUQ7XG4gIH07IiwiaW1wb3J0IHsgVGFzaywgdGFza0NvdW50ZXIgfSBmcm9tIFwiLi90YXNrRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50RGF0ZSwgZm9ybWF0RGF0ZUZvcklucHV0LCBpc0RhcmtDb2xvciwgcmdiVG9IZXggfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZpbHRlclBhZ2VDaGFuZ2VzLCByZW1vdmVGaWx0ZXJzLCBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5IH0gZnJvbSBcIi4vZGlzcGxheUZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgQ2F0ZWdvcnksIGNhdGVnb3JpZXMsIGNhdElELCBjdXJyZW50TW9kZSB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5cblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG5jb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCduYXYnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJyk7XG5jb25zdCBjYXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXRNb2RhbCcpO1xuY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3NDb250YWluZXInKTtcbmNvbnN0IGNvbGxhcHNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbGxhcHNlQnRuJyk7XG5jb25zdCBjcmVhdGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZVRhc2snKTtcbmNvbnN0IG9rVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva1Rhc2tCdG4nKVxuY29uc3QgY2FuY2VsVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxUYXNrQnRuJyk7XG5jb25zdCBkZWxldGVCdG5Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcbmNvbnN0IG5ld0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdDYXRCdG4nKTtcbmNvbnN0IG9rQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rQ2F0QnRuJyk7XG5jb25zdCBjYW5jZWxDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsQ2F0QnRuJyk7XG5jb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbGwgSW5ib3gnKVxuY29uc3QgcmVzcG9uc2liaWxpdGllc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSZXNwb25zaWJpbGl0aWVzJyk7XG5jb25zdCBldmVudHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRXZlbnRzICYgU29jaWFsJyk7XG5jb25zdCBwcm9ncmFtbWluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9ncmFtbWluZyBDb3Vyc2UnKTtcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJyk7XG5jb25zdCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG5jb25zdCBhbGxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG5jb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheUJ0bicpO1xuY29uc3QgdGhpc1dlZWtCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc1dlZWtCdG4nKTtcbmNvbnN0IHRoaXNNb250aEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzTW9udGhCdG4nKTtcbmNvbnN0IHBhZ2VUaW1lbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGltZWxpbmUnKTtcbmxldCBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xubGV0IHNwYW5DYXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZUNhdE1vZGFsXCIpWzBdO1xubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5sZXQgcGFnZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpO1xuXG5sZXQgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIilcbmxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIik7XG5sZXQgZHVlRGF0ZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKTtcbmxldCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIik7XG5sZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG5sZXQgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTtcblxuLy8gbGV0IGRlZmF1bHRDYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbGwgSW5ib3gnKTtcbmxldCBzZWxlY3RlZENhdGVnb3J5ID0gJ0FsbCBJbmJveCc7XG5sZXQgc2VsZWN0ZWRDYXRlZ29yeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkQ2F0ZWdvcnkpO1xubGV0IHNlbGVjdGVkRW5kRGF0ZSA9IGdldEN1cnJlbnREYXRlKCk7XG5cbmV4cG9ydCB7XG4gIGNvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLCBzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXkgIFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMoKXtcbiAgY3JlYXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBCcmluZ3MgdXAgbmV3IHRhc2sgbW9kYWwgXG4gICAgICAvLyBTZXQgZGVmYXVsdCBpbnB1dHNcbiAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgY2F0ZWdvcnlTZWxlY3QudmFsdWUgPSBcIkFsbCBJbmJveFwiO1xuICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGxldCBkZCA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgbW0gPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICBcbiAgICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSBhcyBcIm1tLWRkLXl5eXlcIlxuICAgICAgdG9kYXkgPSB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZDtcbiAgICAgIGR1ZURhdGVTZWxlY3QudmFsdWUgPSB0b2RheVxuICAgICAgXG4gICAgICBwcmlvcml0eVNlbGVjdC52YWx1ZSA9IFwiTG93XCI7XG4gICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gXCJcIjtcbiAgXG4gICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgfSk7XG4gIFxuICBjYW5jZWxUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0pO1xuXG4gIG9rVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vQ2FsbHMgYWRkVGFzayBvciBlZGl0VGFza1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVwb3J0VmFsaWRpdHkoKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFzc2lnbiBwcm9wZXJ0eSB2YWx1ZXMgYmFzZWQgb2ZmIGlucHV0c1xuICAgICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5T2JqZWN0ID0gY2F0ZWdvcmllcy5maW5kKGNhdGVnb3J5ID0+IGNhdGVnb3J5Lm5hbWUgPT09IGNhdGVnb3J5VmFsdWUpO1xuICAgICAgICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBpbXBvcnRhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgY3JlYXRpbmcgYSBuZXcgdGFzayBvciB1cGRhdGluZyBhbiBleGlzdGluZyBvbmVcbiAgICAgICAgICBpZiAodGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQpIHtcbiAgICAgICAgICAgICAgZWRpdFRhc2sodGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWRkVGFzayh0aXRsZSwgY2F0ZWdvcnksIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcbiAgICAgICAgfSBlbHNlIHsgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOyB9XG4gICAgICBcbiAgICBmdW5jdGlvbiBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgLy8gQ3JlYXRlIFRhc2sgT2JqZWN0IFxuICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tDb3VudGVyLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICBcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICAgICAgY29uc29sZS5sb2coY2F0ZWdvcnlPYmplY3QpO1xuICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgIFxuICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICBcbiAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgXG4gICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlJbWcuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkJpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTsgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHRhc2tCaWdEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7dGFza0JpZ0Rpdi5hcHBlbmRDaGlsZChkZWxldGVCdG5CaWdEaXYpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGluZWJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICBcbiAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQodGFza0JpZ0Rpdik7dGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChsaW5lYnJlYWspO3Rhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tDb250YWluZXJEaXYpOyAgICBcbiAgICAgICAgfSBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3QpO1xuICAgICAgICBcbiAgICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBvcGVuVGFza01vZGFsRm9yRWRpdGluZyh0YXNrKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IHRhc2sudGl0bGU7XG4gICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHRhc2suY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgIGR1ZURhdGVTZWxlY3QudmFsdWUgPSB0YXNrLmR1ZURhdGU7XG4gICAgICAgICAgICBwcmlvcml0eVNlbGVjdC52YWx1ZSA9IHRhc2sucHJpb3JpdHk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdGFzay5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBkYXRhIGF0dHJpYnV0ZSBvbiB0aGUgdGl0bGUgaW5wdXQgdG8gdGhlIHRhc2sncyBpZCBzbyB3ZSBrbm93IHdoaWNoIHRhc2sgaXMgYmVpbmcgZWRpdGVkXG4gICAgICAgICAgICB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCA9IHRhc2suaWQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgLy8gRWRpdGluZyBUYXNrIE9iamVjdFxuICAgICAgICBsZXQgdGFza0lkID0gdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgICBmb3IobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKHRhc2sgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgICAgaWYodGFza09iamVjdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrT2JqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHRhc2sgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRhc2sgb2JqZWN0J3MgdmFsdWVzXG4gICAgICAgIHRhc2tPYmplY3QudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGFza09iamVjdC5jYXRlZ29yeSA9IGNhdGVnb3J5T2JqZWN0O1xuICAgICAgICB0YXNrT2JqZWN0LmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0YXNrT2JqZWN0LnByaW9yaXR5ID0gaW1wb3J0YW5jZTtcbiAgICAgICAgdGFza09iamVjdC5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIFxuICAgICAgICAvLyBMb2cgdGhlIHRhc2tJZCBhbmQgdGFza0RpdiBoZXJlXG4gICAgICAgIGNvbnNvbGUubG9nKCdlZGl0aW5nIHRhc2ssIHRpdGxlOiAnICsgdGl0bGUgKyAnIGlkOiAnICsgdGFza0lkKTtcbiAgICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRhc2tEaXYncyB0ZXh0Q29udGVudCB0byByZWZsZWN0IHRoZSBuZXcgdmFsdWVzXG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tUaXRsZScpLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tDYXRlZ29yeScpLnRleHRDb250ZW50ID0gYCgke2NhdGVnb3J5T2JqZWN0Lm5hbWV9KWA7XG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEdWVEYXRlJykudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlRm9ySW5wdXQoZHVlRGF0ZSk7XG4gICAgICAgIGxldCB0YXNrUHJpb3JpdHlJbWcgPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy5zeW1ib2wnKTtcbiAgICAgICAgICAgIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiSGlnaFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTIyMi5wbmdcIn1cbiAgICAgICAgICAgIGVsc2UgaWYoaW1wb3J0YW5jZSA9PSBcIk1lZGl1bVwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTExMS5wbmdcIn1cbiAgICAgICAgICAgIGVsc2Uge3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIn1cbiAgICBcbiAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB9XG4gICAgc2VsZWN0ZWRDYXRlZ29yeSA9IGNhdGVnb3J5U2VsZWN0LnZhbHVlO1xuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcblxuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIGZpbHRlclBhZ2VDaGFuZ2VzKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICB9KTtcblxuICBkZWxldGVCdG5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgXG4gICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgZGVsZXRlVGFzayh0YXNrSWQpO1xuICB9KTsgIC8vIChpbnNpZGUgbW9kYWwpLiBPdXRzaWRlIG1vZGFsIGV2IGxpc3RlbmVyIGlzIGluc2lkZSBhZGRUYXNrRGl2IGV2bGlzdGVuZXIgJ0RlbGV0ZUJ0bkJpZ0RpdidcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBlcnJvciBjbGFzcyB3aGVuIHRoZSB0aXRsZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gIH0pO1xuICBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tJZCkge1xuICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz8nKSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbmNlbHMsIGp1c3QgY2xvc2UgdGhlIG1vZGFsXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgICAgaWYgKCF0YXNrRGl2KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBkaXYgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEZpbmQgdGhlIHRhc2sgb2JqZWN0IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyB0YXNrSWRcbiAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgbGV0IHRhc2tDYXRlZ29yeTtcbiAgICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgIGlmICh0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgIHRhc2tDYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLy8gUmVtb3ZlIHRoZSB0YXNrIGZyb20gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXlcbiAgICAgIHRhc2tDYXRlZ29yeS5yZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpO1xuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0NvdW50ZXJcbiAgICAgIHRhc2tDb3VudGVyLS07XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXIgPSBjYXRlZ29yaWVzLnJlZHVjZSgoY291bnQsIGNhdGVnb3J5KSA9PiBjb3VudCArIGNhdGVnb3J5LnRhc2tzLmxlbmd0aCwgMCk7XG4gIFxuICAgICAgLy8gRGVsZXRlIHRoZSB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBsZXQgdGFza0NvbnRhaW5lckRpdiA9IHRhc2tEaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgdGFza0NvbnRhaW5lckRpdi5yZW1vdmUoKTsgLy8gUmVtb3ZlIHRhc2tDb250YWluZXJEaXZcbiAgXG4gICAgICAvLyBIaWRlIHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBcbiAgICAgIC8vIENsZWFyIHRoZSBlZGl0aW5nVGFza0lkIHNpbmNlIHdlJ3ZlIGp1c3QgZGVsZXRlZCB0aGUgdGFza1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzKCl7XG4gIG5ld0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgY3VycmVudE1vZGUgPSAnbmV3JztcbiAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBjYXRUaXRsZS52YWx1ZSA9IFwiXCI7XG4gICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM4YTU5YjknO1xuXG4gICB9KTtcbiAgIG9rQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gc3VibWl0dGluZ1xuICAgXG4gICAgICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICAgICAgbGV0IHJnYkNvbG9yID0gY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgbGV0IGhleENvbG9yID0gcmdiVG9IZXgocmdiQ29sb3IpO1xuICAgICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGhleENvbG9yO1xuICAgICAgICBjb2xvclBpY2tlci52YWx1ZSA9IGhleENvbG9yO1xuXG4gICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAnbmV3Jykge1xuICAgICAgICAgICAvLyBHZXQgdGhlIGNhdGVnb3J5IG5hbWUgYW5kIGNvbG9yIGZyb20gdGhlIGZvcm0gaW5wdXRzXG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICBsZXQgY2F0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgY2F0ZWdvcnkgaW5zdGFuY2VcbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5ID0gbmV3IENhdGVnb3J5KGNhdFRpdGxlLCBjYXRDb2xvcik7XG4gICAgICAgICAgIGNhdGVnb3JpZXMucHVzaChuZXdDYXRlZ29yeSk7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxpc3QgaXRlbVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgbGV0IG5ld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICBuZXdCdXR0b24uaW5uZXJUZXh0ID0gY2F0VGl0bGU7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pZCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2F0QnRucycpO1xuICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY2F0Q29sb3I7XG4gICAgICAgICAgIG5ld0J1dHRvbi5kYXRhc2V0LmNhdElkID0gbmV3Q2F0ZWdvcnkuY2F0SWQ7XG4gICBcbiAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGNhdENvbG9yKSkge1xuICAgICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgXG4gICAgICAgIG5ld0NhdGVnb3J5RWxlbWVudC5hcHBlbmRDaGlsZChuZXdCdXR0b24pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcmllc0xpc3QnKS5hcHBlbmRDaGlsZChuZXdDYXRlZ29yeUVsZW1lbnQpO1xuICAgICAgICBpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMoKTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICAgLy9SZXRyaWV2ZSB0aGUgY2F0ZWdvcnkgZnJvbSB0aGUgY2F0ZWdvcmllcyBhcnJheSBiYXNlZCBvbiB0aGUgY2F0SURcbiAgICAgICAgICAgY29uc29sZS5sb2coY2F0SUQpO1xuICAgICAgICAgICBpZiAodHlwZW9mIGNhdElEICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdjYXRJZCBpcyBub3QgYSBudW1iZXIgYXQgW2Rlc2NyaXB0aW9uIG9mIHRoZSBjb2RlIGxvY2F0aW9uXScsIGNhdElEKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICBsZXQgZWRpdGluZ0NhdGVnb3J5ID0gY2F0ZWdvcmllcy5maW5kKGNhdCA9PiBjYXQuY2F0SWQgPT09IGNhdElEKTtcbiAgICAgICBcbiAgICAgICAgICAgLy9VcGRhdGUgdGhlIGNhdGVnb3J5IHZhbHVlc1xuICAgICAgICAgICBpZiAoZWRpdGluZ0NhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICBlZGl0aW5nQ2F0ZWdvcnkubmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5LmNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJykudmFsdWU7XG4gICAgICAgXG4gICAgICAgICAgICAgICAvL1VwZGF0ZSB0aGUgVUkgZWxlbWVudCAoYnV0dG9uIGluIHRoaXMgY2FzZSkgcmVwcmVzZW50aW5nIHRoZSBjYXRlZ29yeVxuICAgICAgICAgICAgICAgbGV0IGFzc29jaWF0ZWRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBidXR0b25bZGF0YS1jYXQtaWQ9XCIke2NhdElEfVwiXWApO1xuICAgICAgICAgICAgICAgaWYgKGFzc29jaWF0ZWRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLmlubmVyVGV4dCA9IGVkaXRpbmdDYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZWRpdGluZ0NhdGVnb3J5LmNvbG9yO1xuICAgICAgIFxuICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgY29sb3IgYnJpZ2h0bmVzcyB0byBhZGp1c3QgdGV4dCBjb2xvciBmb3IgYmV0dGVyIHZpc2liaWxpdHlcbiAgICAgICAgICAgICAgICAgICBpZiAoaXNEYXJrQ29sb3IoZWRpdGluZ0NhdGVnb3J5LmNvbG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZVRpdGxlLnN0eWxlLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZVRpdGxlLnN0eWxlLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBjYXRlZ29yeSB3aXRoIElEOicsIGNhdElEKTtcbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIC8vVXBkYXRlIHBhZ2UgdGl0bGVcbiAgICAgICAgICAgcGFnZVRpdGxlLmlubmVySFRNTCA9IGNhdFRpdGxlLnZhbHVlO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjb2xvclBpY2tlci52YWx1ZSk7XG4gICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICAgICB9XG4gICAgICAgdXBkYXRlQ2F0ZWdvcnlEcm9wZG93bigpO1xuICAgICAgLy8gIGZpbHRlckJ0bnNFdkxpc3RlbmVycygpO1xuICAgXG4gICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgXG4gICAgICAgZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnlEcm9wZG93bigpIHtcbiAgICAgICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIG9wdGlvbnNcbiAgICAgICAgICAgbGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3J5Jyk7XG4gICAgICAgICAgIHdoaWxlIChjYXRlZ29yeVNlbGVjdC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5yZW1vdmVDaGlsZChjYXRlZ29yeVNlbGVjdC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICAvLyBBZGQgbmV3IG9wdGlvbnMgYmFzZWQgb24gdGhlIGNhdGVnb3JpZXMgYXJyYXlcbiAgICAgICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IHtcbiAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgfVxuICAgfSk7XG4gICBjYW5jZWxDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgeyAgICBcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgfSk7XG4gICBwYWdlVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICBjdXJyZW50TW9kZSA9ICdlZGl0JztcbiAgICAgICBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpO1xuICAgICAgIGZ1bmN0aW9uIG9wZW5DYXRNb2RhbEZvckVkaXRpbmcocGFnZVRpdGxlLCBjYXRJRCl7XG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpO1xuICAgICAgICAgICBsZXQgY29sb3JEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yRGlzcGxheScpO1xuICAgICAgIFxuICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgIGNhdFRpdGxlLnZhbHVlID0gcGFnZVRpdGxlLnRleHRDb250ZW50O1xuICAgICAgICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgfVxuICAgfSk7XG4gICBjb2xvckRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZyhjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICBjb2xvclBpY2tlci5jbGljaygpO1xuICAgICAgXG4gICAgfSk7XG4gICBjb2xvclBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgeyAgICAgLy8gV2hlbiB5b3UgcGljayBhIGNvbG9yLCB1cGRhdGUgdGhlIGRpc3BsYXlcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpe1xuICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbiAgZmlsdGVyUGFnZUNoYW5nZXMoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBjdXJyZW50VGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG4gIGN1cnJlbnRUaW1lbGluZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgc2VsZWN0ZWRFbmREYXRlID0gdG9kYXk7XG4gICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICB0b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gb25lTW9udGhMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG51bGw7XG4gICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSlcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuXG4gIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9SZXNlbGVjdCBjYXRlZ29yeSBidXR0b25zIHRvIHBpY2sgdXAgYW55IG5ld2x5IGFkZGVkIG9uZSAgXG4gIGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRCdG5zJyk7IFxuICBjYXRlZ29yeUJ1dHRvbnMuZm9yRWFjaCgoY2F0QnRuKSA9PiB7XG4gICAgY2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFJlbW92ZSAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIGZyb20gYWxsIGNhdGVnb3J5IGJ1dHRvbnNcbiAgICAgICAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgLy8gQWRkICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgdG8gdGhlIGNsaWNrZWQgYnV0dG9uXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgXG4gICAgICAgIC8vIFNldCBzZWxlY3RlZENhdGVnb3J5IHRvIHRoZSBjbGlja2VkIGJ1dHRvbidzIHRleHQgY29udGVudFxuICAgICAgICBzZWxlY3RlZENhdGVnb3J5ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgY2F0SUQgPSBwYXJzZUludCh0aGlzLmRhdGFzZXQuY2F0SWQpO1xuICBcbiAgICAgICAgLy8gU2V0IHN0eWxpbmcgdG8gcGFnZSB0aXRsZVxuICAgICAgICBmaWx0ZXJQYWdlQ2hhbmdlcyh0aGlzKTtcbiAgICAgICAgLy8gQXBwbHkgdGhlIGZpbHRlclxuICAgICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSwgY2F0SUQpO1xuICAgIH0pO1xuICB9KTsgXG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncygpe1xuICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBOYXYgQ29sbGFwc2UgJiBFeHBhbmRcbiAgICAgIGNvbnN0IG5hdkRpc3BsYXlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdikuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gc2NyZWVuV2lkdGggPCA3NTA7XG4gICAgXG4gICAgICBpZiAoaXNTbWFsbFNjcmVlbikge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIDMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMi8zJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcyNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyB0YXNrIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn07IiwiaW1wb3J0IHtjYXRlZ29yeUJ1dHRvbnN9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHsgdGFza0NvdW50ZXIgfSBmcm9tICcuL3Rhc2tGdW5jdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgQ2F0ZWdvcnkge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbG9yLCBjYXRJZCA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY2F0SWQgPSBjYXRJZCB8fCArK2xhc3RDYXRJZDtcbiAgICB9XG4gICAgYWRkVGFza1RvQ2F0KHRhc2spIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAvLyBTZXQgdGhlIHRhc2sncyBJRCB0byBtYXRjaCB0aGUgY29ycmVjdCBjb3VudGVyIHZhbHVlXG4gICAgICAgIHRhc2suaWQgPSB0YXNrQ291bnRlcjtcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICB9XG4gICAgcmVtb3ZlVGFza0Zyb21DYXQodGFza0lkKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gICAgfVxufVxuXG5sZXQgbGFzdENhdElkID0gTWF0aC5tYXgoLi4uQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidG4gPT4gcGFyc2VJbnQoYnRuLmRhdGFzZXQuY2F0SWQpKSk7XG5sZXQgZGVmYXVsdENhdGVnb3JpZXMgPSBpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMoKTtcbmxldCBjYXRlZ29yaWVzID0gWy4uLmRlZmF1bHRDYXRlZ29yaWVzXTsgXG5cbi8vQ2hlY2tzIGlmIHdlIGFyZSBlZGRpdGluZyBvciBjcmVhdGluZyBhIG5ldyBjYXQgIFxubGV0IGN1cnJlbnRNb2RlID0gbnVsbDtcbmxldCBjYXRJRDtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCkge1xuICAgIGNvbnN0IGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzRGl2IGJ1dHRvbicpO1xuICAgIGxldCBjYXRlZ29yaWVzID0gQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidXR0b24gPT4ge1xuICAgICAgICBsZXQgY2F0SWQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5jYXRJZCk7IFxuICAgICAgICBpZiAoY2F0SWQgPiBsYXN0Q2F0SWQpIGxhc3RDYXRJZCA9IGNhdElkO1xuICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KGJ1dHRvbi50ZXh0Q29udGVudC50cmltKCksIG51bGwsIGNhdElkKTsgLy8gUGFzc2luZyBjYXRJZCB0byB0aGUgY29uc3RydWN0b3JcbiAgICB9KTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufSBcblxuZXhwb3J0IHtjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGV9OyIsImltcG9ydCB7IGNhdGVnb3JpZXMgfSBmcm9tICcuL2NhdGVnb3J5RnVuY3Rpb25zJztcblxubGV0IHRhc2tDb3VudGVyID0gMDtcblxuZXhwb3J0IGNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIHByaW9yaXR5LCBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5T2JqZWN0XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7IFxuICAgIH1cbiAgICB0b2dnbGVDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9ICF0aGlzLmNvbXBsZXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IHt0YXNrQ291bnRlcn07XG5cblxuIiwiaW1wb3J0IHtUYXNrfSBmcm9tJy4vdGFza0Z1bmN0aW9ucyc7XG5pbXBvcnQge0NhdGVnb3J5fSBmcm9tJy4vY2F0ZWdvcnlGdW5jdGlvbnMnO1xuaW1wb3J0IHtpbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMsIGluaXRpYWxpemVEZWZhdWx0RmlsdGVycywgaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzLCBpbml0aWFsaXplRGlzcGxheVNldHRpbmdzIH0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQge2NvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheX0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5cbmluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVDYXRFdmVudExpc3RlbmVycygpO1xuaW5pdGlhbGl6ZURlZmF1bHRGaWx0ZXJzKCk7XG5pbml0aWFsaXplVGltZUZpbHRlckV2TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVEaXNwbGF5U2V0dGluZ3MoKTtcblxuIl0sIm5hbWVzIjpbImdldEN1cnJlbnREYXRlIiwidG9kYXkiLCJEYXRlIiwic2V0SG91cnMiLCJpc0RhcmtDb2xvciIsImNvbG9yIiwicmdiIiwic3RhcnRzV2l0aCIsInIiLCJwYXJzZUludCIsInNsaWNlIiwiZyIsImIiLCJNYXRoIiwicm91bmQiLCJmb3JtYXREYXRlRm9ySW5wdXQiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIm9mZnNldCIsImdldFRpbWV6b25lT2Zmc2V0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZmlsdGVyUGFnZUNoYW5nZXMiLCJjYXRlZ29yeUJ1dHRvbiIsImNvbXB1dGVkU3R5bGUiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiYmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsImZvbnRDb2xvciIsInBhZ2VUaXRsZSIsInN0eWxlIiwicmVtb3ZlRmlsdGVycyIsInRoaXNXZWVrQnRuIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGhpc01vbnRoQnRuIiwiYWxsQnRuIiwidG9kYXlCdG4iLCJmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5IiwiZW5kRGF0ZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrQ29udGFpbmVyRGl2IiwidGFzayIsInRhc2tJZCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRhc2tzIiwiZmluZCIsImlkIiwiZ2V0VGFza0J5SWQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YXNldCIsInRhc2tEdWVEYXRlIiwiZHVlRGF0ZSIsInRhc2tDYXRlZ29yeSIsIm5hbWUiLCJkaXNwbGF5IiwidGV4dENvbnRlbnQiLCJjYXRJZCIsImNvbnRlbnQiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJzZWxlY3RlZENhdGVnb3J5QnRuIiwic2VsZWN0ZWRFbmREYXRlIiwiaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzIiwiY2F0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJ1dHRvbiIsInRoaXMiLCJhZGQiLCJDYXRlZ29yeSIsImNvbnN0cnVjdG9yIiwibGFzdENhdElkIiwiYWRkVGFza1RvQ2F0IiwicHVzaCIsInRhc2tDb3VudGVyIiwicmVtb3ZlVGFza0Zyb21DYXQiLCJmaWx0ZXIiLCJtYXgiLCJBcnJheSIsImZyb20iLCJtYXAiLCJidG4iLCJkZWZhdWx0Q2F0ZWdvcmllcyIsInRyaW0iLCJpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMiLCJjdXJyZW50TW9kZSIsIlRhc2siLCJ0aXRsZSIsImNhdGVnb3J5T2JqZWN0IiwicHJpb3JpdHkiLCJkZXNjcmlwdGlvbiIsImNvbXBsZXRlIiwidG9nZ2xlQ29tcGxldGUiLCJkZWxldGVUYXNrIiwiY29uZmlybSIsImVkaXRpbmdUYXNrSWQiLCJ0YXNrT2JqZWN0IiwidGFza0RpdiIsImNvbnNvbGUiLCJlcnJvciIsInJlZHVjZSIsImNvdW50IiwibGVuZ3RoIiwicGFyZW50Tm9kZSIsInZhbHVlIiwiZGQiLCJtbSIsInl5eXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwb3J0VmFsaWRpdHkiLCJjYXRlZ29yeVZhbHVlIiwiaW1wb3J0YW5jZSIsInVuZGVmaW5lZCIsImxvZyIsInNyYyIsImVkaXRUYXNrIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuVGFza01vZGFsRm9yRWRpdGluZyIsInRhc2tCaWdEaXYiLCJ0YXNrUHJpbSIsImFwcGVuZENoaWxkIiwiY2hlY2tib3giLCJ0eXBlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hlY2tlZCIsInRhc2tUaXRsZSIsInRhc2tQcmlvcml0eSIsInRhc2tTZWMiLCJ0YXNrUHJpb3JpdHlJbWciLCJkZWxldGVCdG5CaWdEaXYiLCJsaW5lYnJlYWsiLCJhZGRUYXNrRGl2IiwiYWRkVGFzayIsImluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMiLCJjYXRUaXRsZSIsImhleENvbG9yIiwidmFsdWVzIiwibWF0Y2giLCJ0b1N0cmluZyIsInJnYlRvSGV4IiwiYmFja2dyb3VuZCIsImNhdENvbG9yIiwibmV3Q2F0ZWdvcnkiLCJuZXdDYXRlZ29yeUVsZW1lbnQiLCJuZXdCdXR0b24iLCJpbm5lclRleHQiLCJlZGl0aW5nQ2F0ZWdvcnkiLCJjYXQiLCJhc3NvY2lhdGVkQnV0dG9uIiwiaW5uZXJIVE1MIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwib3B0aW9uIiwidXBkYXRlQ2F0ZWdvcnlEcm9wZG93biIsIm9wZW5DYXRNb2RhbEZvckVkaXRpbmciLCJjbGljayIsIm9uZVdlZWtMYXRlciIsInNldERhdGUiLCJvbmVNb250aExhdGVyIiwibmF2RGlzcGxheVN0eWxlIiwiaW5uZXJXaWR0aCIsInpJbmRleCIsImdyaWRDb2x1bW4iLCJvbmNsaWNrIiwidGFyZ2V0Iiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==