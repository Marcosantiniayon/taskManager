(()=>{"use strict";function e(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function t(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function n(e){pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,o=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=o,pageTitle.dataset.catId=e.dataset.catId}function o(e,n){document.querySelectorAll(".taskContainerDiv").forEach((o=>{const l=function(e){for(const t of U){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(o.querySelector(".taskDiv").dataset.taskId),s=new Date(t(l.dueDate));s.setHours(0,0,0,0);const a=l.category;!(null===e||s<=e)||"All Inbox"!==n&&a.name!==n?o.style.display="none":o.style.display="block"}))}function l(e){const t=document.querySelectorAll(".taskContainerDiv"),n=[];t.forEach((e=>{const t=e.querySelector(".taskDueDate").textContent,o=e.querySelector(".taskPriority img").src,l=o.substring(o.lastIndexOf("/")+1);n.push({taskContainerDiv:e,taskDueDate:t,taskPriorityFilename:l})})),"date"===e?n.sort(((e,t)=>new Date(e.taskDueDate)-new Date(t.taskDueDate))):"priority"===e&&function(){function e(e){switch(e){case"warning-333.png":return 3;case"warning-222.png":return 2;case"warning-111.png":return 1;case"warning_grey.png":return 0;default:return-1}}n.sort(((t,n)=>{const o=e(t.taskPriorityFilename);return e(n.taskPriorityFilename)-o}))}();const o=document.querySelector(".tasksContainer");t.forEach((e=>{o.removeChild(e)})),n.forEach((e=>{o.appendChild(e.taskContainerDiv)}))}const s=document.querySelector(".content"),a=document.querySelector("nav"),i=document.querySelector("#modal"),d=document.querySelector("#catModal"),c=document.querySelector(".tasksContainer"),r=document.getElementById("collapseBtn"),u=document.querySelector(".sortOptions"),m=document.getElementById("sortBtn"),g=document.getElementById("dateBtn"),y=document.getElementById("importanceBtn"),p=document.getElementById("createTask"),k=document.getElementById("okTaskBtn"),v=document.getElementById("cancelTaskBtn"),f=document.getElementById("delete"),E=document.getElementById("newCatBtn"),I=document.getElementById("okCatBtn"),h=document.getElementById("cancelCatBtn"),C=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),B=document.getElementById("colorDisplay"),L=document.getElementById("allBtn"),b=document.getElementById("todayBtn"),D=document.getElementById("thisWeekBtn"),w=document.getElementById("thisMonthBtn"),x=document.getElementById("pageTimeline");let S=document.getElementsByClassName("close")[0],T=document.getElementsByClassName("closeCatModal")[0],q=document.querySelector("form"),F=document.getElementById("pageTitle"),P=document.getElementById("title"),A=document.getElementById("category"),M=document.getElementById("dueDate"),N=document.getElementById("priority"),$=document.getElementById("description"),H=document.querySelectorAll(".catBtns"),z=document.querySelectorAll(".timelineBtns"),W="All Inbox",O=document.getElementById(W),R=null,_=document.getElementById("allBtn");const Y=function(){const e=new Date;return e.setHours(0,0,0,0),e}();function V(e){return H.forEach((e=>{e.classList.remove("selectedFilter")})),O=document.getElementById(e),O.classList.add("selectedFilter"),n(O),o(R,e),O}function j(e,t){return console.log(t),z.forEach((e=>{e.classList.remove("selectedFilter")})),n(O),o(e,W),t.classList.add("selectedFilter"),t}m.addEventListener("click",(function(){"none"===u.style.display?(u.style.display="flex",m.style.borderRadius="5px 5px 0px 0px"):(u.style.display="none",m.style.borderRadius="")})),g.addEventListener("click",(function(){l("date")})),y.addEventListener("click",(function(){l("priority")}));class G{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++K}addTaskToCat(e){this.tasks.push(e),e.id=Z,Z++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let J,K=Math.max(...Array.from(H).map((e=>parseInt(e.dataset.catId)))),Q=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>K&&(K=t),new G(e.textContent.trim(),null,t)}))}(),U=[...Q],X=null,Z=0;class ee{constructor(e,t,n,o,l,s){this.id=e,this.title=t,this.category=n,this.dueDate=o,this.priority=l,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return i.style.display="none",void delete P.dataset.editingTaskId;let t,n,o=document.getElementById(e);if(!o)return console.error(`No task div found with id ${e}`),void delete P.dataset.editingTaskId;for(let o of U)if(t=o.tasks.find((t=>t.id==e)),t){n=o;break}n.removeTaskFromCat(e),Z--,Z=U.reduce(((e,t)=>e+t.tasks.length),0),o.parentNode.parentNode.remove(),i.style.display="none",delete P.dataset.editingTaskId}p.addEventListener("click",(function(){P.value="",A.value=W;let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();e=o+"-"+n+"-"+t,M.value=e,N.value="Low",$.value="",i.style.display="block"})),v.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none"})),k.addEventListener("click",(function(o){if(document.querySelector("form").reportValidity()){o.preventDefault(),P.classList.remove("error");let n=document.getElementById("title").value,l=document.getElementById("category").value,s=document.getElementById("category").value,a=U.find((e=>e.name===s)),d=document.getElementById("dueDate").value,r=document.getElementById("priority").value,u=document.getElementById("description").value;P.dataset.editingTaskId?function(e,n,o,l,s){let a,d=P.dataset.editingTaskId;for(let e of U)if(a=e.tasks.find((e=>e.id==d)),a)break;if(void 0===a)return void console.error(`No task found with id ${d}`);a.title=e,a.category=n,a.dueDate=o,a.priority=l,a.description=s,console.log("editing task, title: "+e+" id: "+d);let c=document.getElementById(d);c.querySelector(".taskTitle").textContent=e,c.querySelector(".taskCategory").textContent=`(${n.name})`,c.querySelector(".taskDueDate").textContent=t(o),c.querySelector(".symbol").src="Highest"==l?"./images/warning-333.png":"High"==l?"./images/warning-222.png":"Medium"==l?"./images/warning-111.png":"./images/warning_grey.png",delete P.dataset.editingTaskId,i.style.display="none"}(n,a,d,r,u):function(n,o,l,s,a,d){let r=new ee(Z,n,l,s,a,d);Z++,l.addTaskToCat(r);let u=r.id;const m=document.createElement("div");function g(e){console.log(e),P.value=e.title,A.value=e.category.name,M.value=e.dueDate,N.value=e.priority,$.value=e.description,P.dataset.editingTaskId=e.id,i.style.display="block"}m.classList.add("taskContainerDiv"),function(n,o,l,s,a,i){const d=document.createElement("div");d.classList.add("taskBigDiv");const u=document.createElement("div");u.classList.add("taskDiv"),u.id=n,u.dataset.taskId=n,u.addEventListener("click",(function(){g(r)}));const y=document.createElement("div");y.classList.add("taskPrim"),u.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),E.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),E.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=o;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+l+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const f=document.createElement("div");f.classList.add("taskSec"),u.appendChild(f);const E=document.createElement("div");E.classList.add("taskDueDate"),E.textContent=t(s);const I=document.createElement("div");I.classList.add("taskPriority");const h=document.createElement("img");"Highest"==i.value?h.src="./images/warning-333.png":"High"==i.value?h.src="./images/warning-222.png":"Medium"==i.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=n,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),f.appendChild(E),f.appendChild(I),d.appendChild(u),d.appendChild(C);const B=document.createElement("hr");m.appendChild(d),m.appendChild(B),c.appendChild(m)}(u,n,o,s,0,N)}(n,l,a,d,r,u),i.style.display="none"}else P.classList.add("error");R=null,_=L,j(R,_),W=A.value,V(W),n(O),l("priority"),l("date")})),f.addEventListener("click",(function(t){t.stopPropagation();let n=P.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),P.addEventListener("input",(function(){this.classList.remove("error")}))}(),E.addEventListener("click",(function(){X="new",d.style.display="block",catTitle.value="",B.style.backgroundColor="#8a59b9",console.log(B.style.backgroundColor)})),I.addEventListener("click",(function(t){if(t.preventDefault(),"new"===X){let t=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=B.style.backgroundColor,console.log(n);let o=new G(t,n);U.push(o);let l=document.createElement("li"),s=document.createElement("button");s.innerText=t,s.id=t,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=o.catId,e(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),l.appendChild(s),document.getElementById("categoriesList").appendChild(l),initializeCatFilterEvListeners()}else if("edit"===X){console.log(J),"number"!=typeof J&&console.error("catId is not a number at [description of the code location]",J);let t=U.find((e=>e.catId===J));if(t){t.name=document.getElementById("catTitle").value,t.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${J}"]`);n&&(n.innerText=t.name,n.style.backgroundColor=t.color,e(t.color)?(n.style.color="white",F.style.color="white",console.log(F.style.color)):(n.style.color="black",F.style.color="black",console.log(F.style.color)))}else console.error("Could not find category with ID:",J);F.innerHTML=catTitle.value,console.log(C.value),F.style.backgroundColor=C.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);U.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),d.style.display="none"})),h.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),F.addEventListener("click",(function(){J=parseInt(this.dataset.catId),X="edit",function(e,t){let n=document.getElementById("catTitle"),o=document.getElementById("colorDisplay");n.value=e.textContent,o.style.backgroundColor=e.style.backgroundColor,d.style.display="block"}(F)})),B.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(B.style.backgroundColor);C.value=e,C.click()})),C.addEventListener("input",(function(){B.style.background=C.value})),O.classList.add("selectedFilter"),_.classList.add("selectedFilter"),n(O),o(R,W),b.addEventListener("click",(function(){R=Y,_=b,j(R,_),x.textContent=this.textContent})),D.addEventListener("click",(function(){const e=new Date;e.setDate(Y.getDate()+7),R=e,_=D,j(R,_),x.textContent=this.textContent})),w.addEventListener("click",(function(){const e=new Date;e.setDate(Y.getDate()+30),R=e,_=w,j(R,_),x.textContent=this.textContent})),L.addEventListener("click",(function(){R=null,_=L,j(R,_),x.textContent=this.textContent})),H=document.querySelectorAll(".catBtns"),H.forEach((e=>{e.addEventListener("click",(function(){W=this.textContent,J=parseInt(this.dataset.catId),V(W)}))})),r.addEventListener("click",(function(){const e=window.getComputedStyle(a).display;window.innerWidth<750?"none"===e?(a.style.display="block",a.style.zIndex="2",s.style.gridColumn="1 / 3",s.classList.add("overlay"),r.src="./images/collapse3.png"):(a.style.display="none",a.style.zIndex="",s.style.gridColumn="1 / -1",s.classList.remove("overlay"),console.log("expand"),r.src="./images/expand3.png"):"none"===e?(a.style.display="block",a.style.zIndex="",s.style.gridColumn="2/3",s.classList.remove("overlay"),r.src="./images/collapse3.png"):(a.style.display="none",a.style.zIndex="",s.style.gridColumn="1 / -1",s.classList.remove("overlay"),console.log("expand"),r.src="./images/expand3.png")})),S.onclick=function(){i.style.display="none",delete P.dataset.editingTaskId},T.onclick=function(){d.style.display="none"},window.onclick=function(e){e.target==i?i.style.display="none":e.target==d&&(d.style.display="none")},q.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),k.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNbUwsV0FBYSxNQUMzQnhJLEVBQVF3QyxVQUFVQyxPQUFPLFdBQ3pCcEMsRUFBWWxCLElBQU0sMkJBR2xCYyxFQUFJNUMsTUFBTXdCLFFBQVUsT0FDcEJvQixFQUFJNUMsTUFBTWtMLE9BQVMsR0FDbkJ2SSxFQUFRM0MsTUFBTW1MLFdBQWEsU0FDM0J4SSxFQUFRd0MsVUFBVUMsT0FBTyxXQUN6QjdHLFFBQVFDLElBQUksVUFDWndFLEVBQVlsQixJQUFNLHVCQTBDNUIsSUFFRXNDLEVBQUtnSCxRQUFVLFdBQ1h2SSxFQUFNN0MsTUFBTXdCLFFBQVUsY0FDZitDLEVBQVd0RSxRQUFRbUgsYUFDOUIsRUFDQTlDLEVBQWE4RyxRQUFVLFdBQ25CdEksRUFBUzlDLE1BQU13QixRQUFVLE1BQzdCLEVBQ0E3QixPQUFPeUwsUUFBVSxTQUFTckQsR0FDbEJBLEVBQU1zRCxRQUFVeEksRUFDbEJBLEVBQU03QyxNQUFNd0IsUUFBVSxPQUNkdUcsRUFBTXNELFFBQVV2SSxJQUN0QkEsRUFBUzlDLE1BQU13QixRQUFVLE9BRWpDLEVBQ0EsRUFBSytELGlCQUFpQixXQUFXLFNBQVN3QyxHQUNwQixVQUFkQSxFQUFNdUQsTUFDTnZELEVBQU1DLGlCQUNOekUsRUFBVW1ILFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgbGV0IHJnYjtcbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgbGV0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgbGV0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgbGV0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgcmdiID0geyByLCBnLCBiIH07XG4gIH0gZWxzZSBpZiAoY29sb3Iuc3RhcnRzV2l0aCgncmdiKCcpKSB7XG4gICAgLy8gRXh0cmFjdCBSR0IgdmFsdWVzIGZyb20gYW4gUkdCIHN0cmluZ1xuICAgIGxldCB2YWx1ZXMgPSBjb2xvci5zdWJzdHJpbmcoNCwgY29sb3IubGVuZ3RoIC0gMSkuc3BsaXQoJywnKTtcbiAgICBsZXQgciA9IHBhcnNlSW50KHZhbHVlc1swXSwgMTApO1xuICAgIGxldCBnID0gcGFyc2VJbnQodmFsdWVzWzFdLCAxMCk7XG4gICAgbGV0IGIgPSBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKTtcbiAgICByZ2IgPSB7IHIsIGcsIGIgfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBicmlnaHRuZXNzIG9uIGEgc2NhbGUgZnJvbSAwIHRvIDI1NVxuICBsZXQgYnJpZ2h0bmVzcyA9IE1hdGgucm91bmQoKChyZ2IuciAqIDI5OSkgKyAocmdiLmcgKiA1ODcpICsgKHJnYi5iICogMTE0KSkgLyAxMDAwKTtcbiAgY29uc29sZS5sb2coYnJpZ2h0bmVzcyk7XG4gIHJldHVybiBicmlnaHRuZXNzIDwgMTcwOyAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29sb3IgaXMgZGFya1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JJbnB1dChkYXRlU3RyaW5nKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyAvLyBHZXQgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzXG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG9mZnNldCk7IC8vIEFkanVzdCB0aGUgZGF0ZSBieSB0aGUgdGltZXpvbmUgb2Zmc2V0XG4gIGNvbnN0IG1tID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRkID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCB5eXl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gYCR7bW19LyR7ZGR9LyR7eXl5eX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAvLyBTZXBhcmF0ZSBSR0IgdmFsdWVzXG4gIGxldCB2YWx1ZXMgPSByZ2IubWF0Y2goL15yZ2JcXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspXFwpJC8pO1xuXG4gIC8vIENvbnZlcnQgZWFjaCB2YWx1ZSB0byBoZXhhZGVjaW1hbFxuICBsZXQgaGV4Q29sb3IgPSBcIiNcIiArIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1sxXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzJdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbM10sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIGhleENvbG9yO1xufVxuICAiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JJbnB1dCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IHsgY3VycmVudENhdGVnb3J5IH0gZnJvbSBcIi4vZG9tRWxlbWVudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKXtcbiAgLy9BcHBseSBwYWdlIHRpdGxlIGJhc2VkIG9uIGNhdGVncnlcbiAgcGFnZVRpdGxlLnRleHRDb250ZW50ID0gc2VsZWN0ZWRDYXRlZ29yeUJ0bi50ZXh0Q29udGVudDtcblxuICAvLyBDaGFuZ2UgcGFnZSB0aXRsZSBhY2NvcmRpbmcgdG8gc2VsZWN0ZWQgYnV0dG9uXG4gIGxldCBzZWxlY3RlZENhdEJ0biA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICBsZXQgYmdDb2xvciA9IHNlbGVjdGVkQ2F0QnRuLmJhY2tncm91bmRDb2xvcjtcbiAgbGV0IGZvbnRDb2xvciA9IHNlbGVjdGVkQ2F0QnRuLmNvbG9yO1xuICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcbiAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gZm9udENvbG9yO1xuICBwYWdlVGl0bGUuZGF0YXNldC5jYXRJZCA9IHNlbGVjdGVkQ2F0ZWdvcnlCdG4uZGF0YXNldC5jYXRJZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KSB7XG4gIC8vIExvb3AgdGhyb3VnaCBhbGwgdGFza0NvbnRhaW5lckRpdiBlbGVtZW50cyBcbiAgY29uc3QgYWxsVGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuICBhbGxUYXNrQ29udGFpbmVyRGl2cy5mb3JFYWNoKCh0YXNrQ29udGFpbmVyRGl2KSA9PiB7XG4gICAgICBjb25zdCB0YXNrRGl2ID0gdGFza0NvbnRhaW5lckRpdi5xdWVyeVNlbGVjdG9yKCcudGFza0RpdicpOyAvLyBHZXQgdGhlIHRhc2tEaXYgaW5zaWRlIHRoZSBjdXJyZW50IHRhc2tDb250YWluZXJEaXZcbiAgICAgIGNvbnN0IHRhc2tJZCA9IHRhc2tEaXYuZGF0YXNldC50YXNrSWQ7XG4gICAgICBcbiAgICAgIGNvbnN0IHRhc2sgPSBnZXRUYXNrQnlJZCh0YXNrSWQpOyAvLyBSZXRyaWV2ZSB0aGUgdGFzayBvYmplY3QgYnkgSURcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhc2sncyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgc2VsZWN0ZWRUaW1lbGluZVxuICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBuZXcgRGF0ZShmb3JtYXREYXRlRm9ySW5wdXQodGFzay5kdWVEYXRlKSk7XG4gICAgICB0YXNrRHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgLy8gQXNzaWduIHRoZSB0YXNrIGNhdGVnb3J5IHRvIHRhc2tDYXRlZ29yeVxuICAgICAgY29uc3QgdGFza0NhdGVnb3J5ID0gdGFzay5jYXRlZ29yeTtcblxuICAgICAgaWYgKChzZWxlY3RlZFRpbWVsaW5lID09PSBudWxsIHx8IHRhc2tEdWVEYXRlIDw9IHNlbGVjdGVkVGltZWxpbmUpICYmIChzZWxlY3RlZENhdGVnb3J5ID09PSBcIkFsbCBJbmJveFwiIHx8IHRhc2tDYXRlZ29yeS5uYW1lID09PSBzZWxlY3RlZENhdGVnb3J5KSkge1xuICAgICAgICAgIC8vIFNob3cgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBlbmREYXRlLCBhbmQgY2F0ZWdvcnkgbWF0Y2hlc1xuICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEhpZGUgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIG91dHNpZGUgdGhlIHJhbmdlIG9yIGNhdGVnb3J5IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG5cbiAgICAgIC8vSGVscGVyIGZ1bmN0aW9uXG4gICAgICBmdW5jdGlvbiBnZXRUYXNrQnlJZCh0YXNrSWQpIHtcbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXRlZ29yeVxuICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgdGFzayBpbiB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheSB3aXRoIHRoZSBtYXRjaGluZyBJRFxuICAgICAgICAgICAgY29uc3QgdGFzayA9IGNhdGVnb3J5LnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXNrOyAvLyBSZXR1cm4gdGhlIHRhc2sgaWYgZm91bmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIHRhc2sgd2l0aCB0aGUgZ2l2ZW4gSUQgaXMgZm91bmRcbiAgICAgICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0KHNvcnRPcHRpb24pe1xuICAvLyAxLiBFeHRyYWN0IGFuZCBzdG9yZSB0aGUgcmVsZXZhbnQgZGF0YSBmcm9tIGVhY2ggdGFza0NvbnRhaW5lckRpdlxuICBjb25zdCB0YXNrQ29udGFpbmVyRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrQ29udGFpbmVyRGl2Jyk7XG4gIGNvbnN0IGRhdGFUb1NvcnQgPSBbXTtcblxuICB0YXNrQ29udGFpbmVyRGl2cy5mb3JFYWNoKCh0YXNrQ29udGFpbmVyRGl2KSA9PiB7XG4gICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEdWVEYXRlJykudGV4dENvbnRlbnQ7IC8vIEV4dHJhY3QgdGFza0R1ZURhdGVcbiAgICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tQcmlvcml0eSBpbWcnKS5zcmM7IC8vIEV4dHJhY3QgdGFza1ByaW9yaXR5XG4gICAgICBjb25zdCB0YXNrUHJpb3JpdHlGaWxlbmFtZSA9IHRhc2tQcmlvcml0eS5zdWJzdHJpbmcodGFza1ByaW9yaXR5Lmxhc3RJbmRleE9mKCcvJykgKyAxKTsgLy8gR2V0IGltYWdlIGZvciB0aGUgdGFzayBwcmlvcml0eVxuXG4gICAgICAvLyBTdG9yZSB0aGUgZGF0YSBhbmQgdGhlIHRhc2tDb250YWluZXJEaXYgZm9yIHNvcnRpbmdcbiAgICAgIGRhdGFUb1NvcnQucHVzaCh7XG4gICAgICAgICAgdGFza0NvbnRhaW5lckRpdixcbiAgICAgICAgICB0YXNrRHVlRGF0ZSxcbiAgICAgICAgICB0YXNrUHJpb3JpdHlGaWxlbmFtZSxcbiAgICAgIH0pO1xuICB9KTtcblxuICAvLyAyLiBTb3J0IHRoZSBkYXRhIGJhc2VkIG9uIHlvdXIgc29ydGluZyBjcml0ZXJpYSAoZS5nLiwgdGFza0R1ZURhdGUgb3IgdGFza1ByaW9yaXR5KVxuICBpZihzb3J0T3B0aW9uID09PSAnZGF0ZScpe1xuICAgIHNvcnRCeURhdGUoKTtcbiAgfSBlbHNlIGlmKHNvcnRPcHRpb24gPT09ICdwcmlvcml0eScpe1xuICAgIHNvcnRCeVByaW9yaXR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBzb3J0QnlEYXRlKCl7XG4gICAgZGF0YVRvU29ydC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoYS50YXNrRHVlRGF0ZSkgLSBuZXcgRGF0ZShiLnRhc2tEdWVEYXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNvcnRCeVByaW9yaXR5KCl7XG4gICAgZGF0YVRvU29ydC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBHZXQgdGhlIHRhc2tQcmlvcml0eSBmcm9tIHRhc2tEYXRhIHByb3BlcnR5IGFuZCBjb252ZXJ0IGl0IHRvIGEgbnVtZXJpYyB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZUEgPSBnZXRQcmlvcml0eVZhbHVlKGEudGFza1ByaW9yaXR5RmlsZW5hbWUpO1xuICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZUIgPSBnZXRQcmlvcml0eVZhbHVlKGIudGFza1ByaW9yaXR5RmlsZW5hbWUpO1xuXG4gICAgICByZXR1cm4gcHJpb3JpdHlWYWx1ZUIgLSBwcmlvcml0eVZhbHVlQTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGdldFByaW9yaXR5VmFsdWUodGFza1ByaW9yaXR5U3JjKXsgLy9OZWVkZWQgZm9yIHNvcnRcbiAgICAgIHN3aXRjaCAodGFza1ByaW9yaXR5U3JjKSB7XG4gICAgICAgIGNhc2UgXCJ3YXJuaW5nLTMzMy5wbmdcIjpcbiAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICBjYXNlIFwid2FybmluZy0yMjIucG5nXCI6XG4gICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgY2FzZSBcIndhcm5pbmctMTExLnBuZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIGNhc2UgXCJ3YXJuaW5nX2dyZXkucG5nXCI6XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAtMTsgLy8gRGVmYXVsdCB2YWx1ZSBmb3IgdW5kZWZpbmVkIG9yIG90aGVyIHNvdXJjZXNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzLiBSZWluc2VydCB0aGUgc29ydGVkIHRhc2tDb250YWluZXJEaXZzIGludG8gdGhlIHBhcmVudCBjb250YWluZXJcbiAgY29uc3QgcGFyZW50Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5cbiAgLy8gUmVtb3ZlIGFsbCB0YXNrQ29udGFpbmVyRGl2cyBmcm9tIHRoZSBwYXJlbnQgY29udGFpbmVyXG4gIHRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbiAgICBwYXJlbnRDb250YWluZXIucmVtb3ZlQ2hpbGQodGFza0NvbnRhaW5lckRpdik7XG4gIH0pO1xuXG4gIC8vIEFwcGVuZCB0aGUgc29ydGVkIHRhc2tDb250YWluZXJEaXZzIGJhY2sgdG8gdGhlIHBhcmVudCBjb250YWluZXIgaW4gdGhlIGRlc2lyZWQgb3JkZXJcbiAgZGF0YVRvU29ydC5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgcGFyZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGEudGFza0NvbnRhaW5lckRpdik7IFxuICB9KTtcbn1cblxuXG4iLCJpbXBvcnQgeyBUYXNrLCB0YXNrQ291bnRlciB9IGZyb20gXCIuL3Rhc2tGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnREYXRlLCBmb3JtYXREYXRlRm9ySW5wdXQsIGlzRGFya0NvbG9yLCByZ2JUb0hleCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdXBkYXRlUGFnZVRpdGxlLCB1cGRhdGVQYWdlVGFza3MsIHNvcnR9IGZyb20gXCIuL2Rpc3BsYXlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IENhdGVnb3J5LCBjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGUgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbmF2Jyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xuY29uc3QgY2F0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0TW9kYWwnKTtcbmNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5jb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsYXBzZUJ0bicpO1xuY29uc3Qgc29ydE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29ydE9wdGlvbnMnKTtcbmNvbnN0IHNvcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydEJ0bicpO1xuY29uc3QgZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlQnRuJyk7XG5jb25zdCBpbXBvcnRhbmNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydGFuY2VCdG4nKTtcblxuXG5jb25zdCBjcmVhdGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZVRhc2snKTtcbmNvbnN0IG9rVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva1Rhc2tCdG4nKVxuY29uc3QgY2FuY2VsVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxUYXNrQnRuJyk7XG5jb25zdCBkZWxldGVCdG5Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcbmNvbnN0IG5ld0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdDYXRCdG4nKTtcbmNvbnN0IG9rQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rQ2F0QnRuJyk7XG5jb25zdCBjYW5jZWxDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsQ2F0QnRuJyk7XG5jb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbGwgSW5ib3gnKVxuY29uc3QgcmVzcG9uc2liaWxpdGllc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSZXNwb25zaWJpbGl0aWVzJyk7XG5jb25zdCBldmVudHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRXZlbnRzICYgU29jaWFsJyk7XG5jb25zdCBwcm9ncmFtbWluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9ncmFtbWluZyBDb3Vyc2UnKTtcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJyk7XG5jb25zdCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG5jb25zdCBhbGxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG5jb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheUJ0bicpO1xuY29uc3QgdGhpc1dlZWtCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc1dlZWtCdG4nKTtcbmNvbnN0IHRoaXNNb250aEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzTW9udGhCdG4nKTtcbmNvbnN0IHBhZ2VUaW1lbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGltZWxpbmUnKTtcbmxldCBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xubGV0IHNwYW5DYXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZUNhdE1vZGFsXCIpWzBdO1xubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5sZXQgcGFnZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpO1xuXG5sZXQgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIilcbmxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIik7XG5sZXQgZHVlRGF0ZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKTtcbmxldCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIik7XG5sZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG5sZXQgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTtcbmxldCB0aW1lbGluZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZWxpbmVCdG5zJyk7XG5cbmxldCBzZWxlY3RlZENhdGVnb3J5ID0gJ0FsbCBJbmJveCc7XG5sZXQgc2VsZWN0ZWRDYXRlZ29yeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkQ2F0ZWdvcnkpO1xubGV0IHNlbGVjdGVkVGltZWxpbmUgPSBudWxsO1xubGV0IHNlbGVjdGVkVGltZWxpbmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbEJ0blwiKTtcblxuY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuXG5leHBvcnQge1xuICBjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCwgc3BhbkNhdE1vZGFsLHRhc2tzQ29udGFpbmVyLGZvcm0scGFnZVRpdGxlLGNvbGxhcHNlQnRuLGNyZWF0ZVRhc2tCdG4sb2tUYXNrQnRuLGNhbmNlbFRhc2tCdG4sZGVsZXRlQnRuTW9kYWwsbmV3Q2F0QnRuLG9rQ2F0QnRuLGNhbmNlbENhdEJ0bixpbmJveEJ0bixyZXNwb25zaWJpbGl0aWVzQnRuLGV2ZW50c0J0bixwcm9ncmFtbWluZ0J0bix0aXRsZUlucHV0LGNhdGVnb3J5U2VsZWN0LGR1ZURhdGVTZWxlY3QscHJpb3JpdHlTZWxlY3QsZGVzY3JpcHRpb25JbnB1dCxjYXRlZ29yeUJ1dHRvbnMsYWxsQnRuLCB0b2RheUJ0biwgdGhpc1dlZWtCdG4sIHRoaXNNb250aEJ0biwgcGFnZVRpbWVsaW5lLCBjb2xvclBpY2tlciwgY29sb3JEaXNwbGF5ICBcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0YXNrRXZMaXN0ZW5lcnMoKXtcbiAgY3JlYXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBCcmluZ3MgdXAgbmV3IHRhc2sgbW9kYWwgXG4gICAgICAvLyBTZXQgZGVmYXVsdCBpbnB1dHNcbiAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgY2F0ZWdvcnlTZWxlY3QudmFsdWUgPSBzZWxlY3RlZENhdGVnb3J5O1xuICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGxldCBkZCA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgbW0gPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBsZXQgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICBcbiAgICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSBhcyBcIm1tLWRkLXl5eXlcIlxuICAgICAgdG9kYXkgPSB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZDtcbiAgICAgIGR1ZURhdGVTZWxlY3QudmFsdWUgPSB0b2RheVxuICAgICAgXG4gICAgICBwcmlvcml0eVNlbGVjdC52YWx1ZSA9IFwiTG93XCI7XG4gICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gXCJcIjtcbiAgXG4gICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgfSk7XG4gIFxuICBjYW5jZWxUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0pO1xuXG4gIG9rVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vQ2FsbHMgYWRkVGFzayBvciBlZGl0VGFza1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVwb3J0VmFsaWRpdHkoKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFzc2lnbiBwcm9wZXJ0eSB2YWx1ZXMgYmFzZWQgb2ZmIGlucHV0c1xuICAgICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5T2JqZWN0ID0gY2F0ZWdvcmllcy5maW5kKGNhdGVnb3J5ID0+IGNhdGVnb3J5Lm5hbWUgPT09IGNhdGVnb3J5VmFsdWUpO1xuICAgICAgICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBpbXBvcnRhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgY3JlYXRpbmcgYSBuZXcgdGFzayBvciB1cGRhdGluZyBhbiBleGlzdGluZyBvbmVcbiAgICAgICAgICBpZiAodGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQpIHtcbiAgICAgICAgICAgICAgZWRpdFRhc2sodGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWRkVGFzayh0aXRsZSwgY2F0ZWdvcnksIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcbiAgICAgICAgfSBlbHNlIHsgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOyB9XG4gICAgICBcbiAgICBmdW5jdGlvbiBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgLy8gQ3JlYXRlIFRhc2sgT2JqZWN0IFxuICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tDb3VudGVyLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICBcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICAgICAgY2F0ZWdvcnlPYmplY3QuYWRkVGFza1RvQ2F0KG5ld1Rhc2spO1xuICAgICAgICBsZXQgdGFza0lkID0gbmV3VGFzay5pZFxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGFpbmVyIGRpdiBmb3IgdGhlIHRhc2sgYW5kIHRoZSBsaW5lIGJyZWFrXG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0NvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQ29udGFpbmVyRGl2Jyk7XG4gICAgXG4gICAgICAgIC8vIEFkZCBUYXNrIERpdlxuICAgICAgICBmdW5jdGlvbiBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3Qpe1xuICAgICAgICAgICAgY29uc3QgdGFza0JpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFza0JpZ0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQmlnRGl2Jyk7XG4gICAgICAgICAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICB0YXNrRGl2LmRhdGFzZXQudGFza0lkID0gdGFza0lkO1xuICAgIFxuICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKG5ld1Rhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0YXNrUHJpbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tQcmltLmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmltJyk7XG4gICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tQcmltKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDYXRlZ29yeScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkudGV4dENvbnRlbnQgPSBcIihcIiArIGNhdGVnb3J5ICsgXCIpXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1ByaW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO3Rhc2tQcmltLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza0NhdGVnb3J5KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhc2tTZWMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmNsYXNzTGlzdC5hZGQoJ3Rhc2tTZWMnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1NlYyk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgndGFza0R1ZURhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlRm9ySW5wdXQoZHVlRGF0ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0YXNrUHJpb3JpdHknKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHlJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIkhpZ2hcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0yMjIucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIk1lZGl1bVwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTExMS5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIHt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nX2dyZXkucG5nXCJ9XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eUltZy5jbGFzc0xpc3QuYWRkKCdzeW1ib2wnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eUltZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LnNyYyA9IFwiLi9pbWFnZXMvZGVsZXRlLnBuZ1wiOyAvLyBDaGFuZ2UgdG8geW91ciBkZWxldGUgaW1hZ2UncyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5jbGFzc0xpc3QuYWRkKCdzeW1ib2wnKTtcbiAgICBcbiAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRhc2tJZCBmcm9tIHRoZSBlZGl0aW5nVGFza0lkIGRhdGEgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXNrSWQgPSBkZWxldGVCdG5CaWdEaXYuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gdGFzayBpcyBjdXJyZW50bHkgYmVpbmcgZWRpdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZGVsZXRlVGFzayh0YXNrSWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpOyB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgdGFza0JpZ0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTt0YXNrQmlnRGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkJpZ0Rpdik7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBsaW5lYnJlYWsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuICAgIFxuICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0YXNrQmlnRGl2KTt0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGxpbmVicmVhayk7dGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lckRpdik7ICAgIFxuICAgICAgICB9IGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCk7XG4gICAgICAgIFxuICAgICAgICAvL0hlbHBlciBGdW5jdGlvblxuICAgICAgICBmdW5jdGlvbiBvcGVuVGFza01vZGFsRm9yRWRpdGluZyh0YXNrKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IHRhc2sudGl0bGU7XG4gICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHRhc2suY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgIGR1ZURhdGVTZWxlY3QudmFsdWUgPSB0YXNrLmR1ZURhdGU7XG4gICAgICAgICAgICBwcmlvcml0eVNlbGVjdC52YWx1ZSA9IHRhc2sucHJpb3JpdHk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdGFzay5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBkYXRhIGF0dHJpYnV0ZSBvbiB0aGUgdGl0bGUgaW5wdXQgdG8gdGhlIHRhc2sncyBpZCBzbyB3ZSBrbm93IHdoaWNoIHRhc2sgaXMgYmVpbmcgZWRpdGVkXG4gICAgICAgICAgICB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCA9IHRhc2suaWQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgLy8gRWRpdGluZyBUYXNrIE9iamVjdFxuICAgICAgICBsZXQgdGFza0lkID0gdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgICBmb3IobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKHRhc2sgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgICAgaWYodGFza09iamVjdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrT2JqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHRhc2sgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRhc2sgb2JqZWN0J3MgdmFsdWVzXG4gICAgICAgIHRhc2tPYmplY3QudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGFza09iamVjdC5jYXRlZ29yeSA9IGNhdGVnb3J5T2JqZWN0O1xuICAgICAgICB0YXNrT2JqZWN0LmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0YXNrT2JqZWN0LnByaW9yaXR5ID0gaW1wb3J0YW5jZTtcbiAgICAgICAgdGFza09iamVjdC5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIFxuICAgICAgICAvLyBMb2cgdGhlIHRhc2tJZCBhbmQgdGFza0RpdiBoZXJlXG4gICAgICAgIGNvbnNvbGUubG9nKCdlZGl0aW5nIHRhc2ssIHRpdGxlOiAnICsgdGl0bGUgKyAnIGlkOiAnICsgdGFza0lkKTtcbiAgICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRhc2tEaXYncyB0ZXh0Q29udGVudCB0byByZWZsZWN0IHRoZSBuZXcgdmFsdWVzXG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tUaXRsZScpLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tDYXRlZ29yeScpLnRleHRDb250ZW50ID0gYCgke2NhdGVnb3J5T2JqZWN0Lm5hbWV9KWA7XG4gICAgICAgIHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEdWVEYXRlJykudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlRm9ySW5wdXQoZHVlRGF0ZSk7XG4gICAgICAgIGxldCB0YXNrUHJpb3JpdHlJbWcgPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy5zeW1ib2wnKTtcbiAgICAgICAgICAgIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiSGlnaFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTIyMi5wbmdcIn1cbiAgICAgICAgICAgIGVsc2UgaWYoaW1wb3J0YW5jZSA9PSBcIk1lZGl1bVwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTExMS5wbmdcIn1cbiAgICAgICAgICAgIGVsc2Uge3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIn1cbiAgICBcbiAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICAgIHNlbGVjdGVkVGltZWxpbmUgPSBudWxsO1xuICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSBhbGxCdG47XG4gICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICBzZWxlY3RlZENhdGVnb3J5ID0gY2F0ZWdvcnlTZWxlY3QudmFsdWU7XG4gICAgc2VsZWN0Q2F0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgICBzb3J0KCdwcmlvcml0eScpO1xuICAgIHNvcnQoJ2RhdGUnKTtcbiAgfSk7XG5cbiAgZGVsZXRlQnRuTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIFxuICAgICAgLy8gR2V0IHRhc2tJZCBmcm9tIHRoZSBlZGl0aW5nVGFza0lkIGRhdGEgYXR0cmlidXRlXG4gICAgICBsZXQgdGFza0lkID0gdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIFxuICAgICAgaWYgKCF0YXNrSWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTm8gdGFzayBpcyBjdXJyZW50bHkgYmVpbmcgZWRpdGVkJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgfSk7ICAvLyAoaW5zaWRlIG1vZGFsKS4gT3V0c2lkZSBtb2RhbCBldiBsaXN0ZW5lciBpcyBpbnNpZGUgYWRkVGFza0RpdiBldmxpc3RlbmVyICdEZWxldGVCdG5CaWdEaXYnXG4gIHRpdGxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFJlbW92ZSB0aGUgZXJyb3IgY2xhc3Mgd2hlbiB0aGUgdGl0bGUgaW5wdXQgdmFsdWUgY2hhbmdlc1xuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICB9KTtcbiAgZnVuY3Rpb24gZGVsZXRlVGFzayh0YXNrSWQpIHtcbiAgICAgIGlmICghY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHRhc2s/JykpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgdXNlciBjYW5jZWxzLCBqdXN0IGNsb3NlIHRoZSBtb2RhbFxuICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIGxldCB0YXNrRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFza0lkKTtcbiAgICAgIGlmICghdGFza0Rpdikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHRhc2sgZGl2IGZvdW5kIHdpdGggaWQgJHt0YXNrSWR9YCk7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBGaW5kIHRoZSB0YXNrIG9iamVjdCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoaXMgdGFza0lkXG4gICAgICBsZXQgdGFza09iamVjdDtcbiAgICAgIGxldCB0YXNrQ2F0ZWdvcnk7XG4gICAgICBmb3IgKGxldCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICBpZiAodGFza09iamVjdCkge1xuICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIC8vIFJlbW92ZSB0aGUgdGFzayBmcm9tIHRoZSBjYXRlZ29yeSdzIHRhc2tzIGFycmF5XG4gICAgICB0YXNrQ2F0ZWdvcnkucmVtb3ZlVGFza0Zyb21DYXQodGFza0lkKTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlci0tO1xuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0NvdW50ZXJcbiAgICAgIHRhc2tDb3VudGVyID0gY2F0ZWdvcmllcy5yZWR1Y2UoKGNvdW50LCBjYXRlZ29yeSkgPT4gY291bnQgKyBjYXRlZ29yeS50YXNrcy5sZW5ndGgsIDApO1xuICBcbiAgICAgIC8vIERlbGV0ZSB0aGUgdGFza0NvbnRhaW5lckRpdlxuICAgICAgbGV0IHRhc2tDb250YWluZXJEaXYgPSB0YXNrRGl2LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgIHRhc2tDb250YWluZXJEaXYucmVtb3ZlKCk7IC8vIFJlbW92ZSB0YXNrQ29udGFpbmVyRGl2XG4gIFxuICAgICAgLy8gSGlkZSB0aGUgbW9kYWxcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgXG4gICAgICAvLyBDbGVhciB0aGUgZWRpdGluZ1Rhc2tJZCBzaW5jZSB3ZSd2ZSBqdXN0IGRlbGV0ZWQgdGhlIHRhc2tcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNhdEV2TGlzdGVuZXJzKCl7XG4gIG5ld0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgY3VycmVudE1vZGUgPSAnbmV3JztcbiAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBjYXRUaXRsZS52YWx1ZSA9IFwiXCI7XG4gICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM4YTU5YjknO1xuICAgICAgY29uc29sZS5sb2coY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcik7XG5cbiAgIH0pO1xuICAgb2tDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG5cbiAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICduZXcnKSB7XG5cbiAgICAgICAgICAgLy8gR2V0IHRoZSBjYXRlZ29yeSBuYW1lIGFuZCBjb2xvciBmcm9tIHRoZSBmb3JtIGlucHV0c1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgbGV0IGNhdENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJykudmFsdWU7XG5cbiAgICAgICAgICAgLy9TZXQgZGVmYXVsdCBjYXQgY29sb3IgcGlja2VyXG4gICAgICAgICAgIGNhdENvbG9yID0gY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBjYXRlZ29yeSBpbnN0YW5jZVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoY2F0VGl0bGUsIGNhdENvbG9yKTtcbiAgICAgICAgICAgY2F0ZWdvcmllcy5wdXNoKG5ld0NhdGVnb3J5KTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGlzdCBpdGVtXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICBsZXQgbmV3QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pbm5lclRleHQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlkID0gY2F0VGl0bGU7XG4gICAgICAgICAgIG5ld0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXRCdG5zJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjYXRDb2xvcjtcbiAgICAgICAgICAgbmV3QnV0dG9uLmRhdGFzZXQuY2F0SWQgPSBuZXdDYXRlZ29yeS5jYXRJZDtcbiAgIFxuICAgICAgICAgICBpZiAoaXNEYXJrQ29sb3IoY2F0Q29sb3IpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGFyaycpO1xuICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaWdodCcpO1xuICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgfVxuICAgICAgICAgICBcbiAgICAgICAgbmV3Q2F0ZWdvcnlFbGVtZW50LmFwcGVuZENoaWxkKG5ld0J1dHRvbik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yaWVzTGlzdCcpLmFwcGVuZENoaWxkKG5ld0NhdGVnb3J5RWxlbWVudCk7XG4gICAgICAgIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpO1xuICAgICAgIH0gZWxzZSBpZiAoY3VycmVudE1vZGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAvL1JldHJpZXZlIHRoZSBjYXRlZ29yeSBmcm9tIHRoZSBjYXRlZ29yaWVzIGFycmF5IGJhc2VkIG9uIHRoZSBjYXRJRFxuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRJRCk7XG4gICAgICAgICAgIGlmICh0eXBlb2YgY2F0SUQgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhdElkIGlzIG5vdCBhIG51bWJlciBhdCBbZGVzY3JpcHRpb24gb2YgdGhlIGNvZGUgbG9jYXRpb25dJywgY2F0SUQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIGxldCBlZGl0aW5nQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ID0+IGNhdC5jYXRJZCA9PT0gY2F0SUQpO1xuICAgICAgIFxuICAgICAgICAgICAvL1VwZGF0ZSB0aGUgY2F0ZWdvcnkgdmFsdWVzXG4gICAgICAgICAgIGlmIChlZGl0aW5nQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgICAgICBlZGl0aW5nQ2F0ZWdvcnkuY29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcbiAgICAgICBcbiAgICAgICAgICAgICAgIC8vVXBkYXRlIHRoZSBVSSBlbGVtZW50IChidXR0b24gaW4gdGhpcyBjYXNlKSByZXByZXNlbnRpbmcgdGhlIGNhdGVnb3J5XG4gICAgICAgICAgICAgICBsZXQgYXNzb2NpYXRlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJ1dHRvbltkYXRhLWNhdC1pZD1cIiR7Y2F0SUR9XCJdYCk7XG4gICAgICAgICAgICAgICBpZiAoYXNzb2NpYXRlZEJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uaW5uZXJUZXh0ID0gZWRpdGluZ0NhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlZGl0aW5nQ2F0ZWdvcnkuY29sb3I7XG4gICAgICAgXG4gICAgICAgICAgICAgICAgICAgLy9DaGVjayBjb2xvciBicmlnaHRuZXNzIHRvIGFkanVzdCB0ZXh0IGNvbG9yIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihlZGl0aW5nQ2F0ZWdvcnkuY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGNhdGVnb3J5IHdpdGggSUQ6JywgY2F0SUQpO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgLy9VcGRhdGUgcGFnZSB0aXRsZVxuICAgICAgICAgICBwYWdlVGl0bGUuaW5uZXJIVE1MID0gY2F0VGl0bGUudmFsdWU7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNvbG9yUGlja2VyLnZhbHVlKTtcbiAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgICAgIH1cbiAgICAgICB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCk7XG4gICBcbiAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICBcbiAgICAgICAvLyBIZWxwZXIgRnVuY3Rpb25cbiAgICAgICBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCkge1xuICAgICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3Rpbmcgb3B0aW9uc1xuICAgICAgICAgICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnknKTtcbiAgICAgICAgICAgd2hpbGUgKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnJlbW92ZUNoaWxkKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC8vIEFkZCBuZXcgb3B0aW9ucyBiYXNlZCBvbiB0aGUgY2F0ZWdvcmllcyBhcnJheVxuICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICB9KTtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNhbmNlbENhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7ICAgIFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICB9KTtcbiAgIHBhZ2VUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgY2F0SUQgPSBwYXJzZUludCh0aGlzLmRhdGFzZXQuY2F0SWQpO1xuICAgICAgIGN1cnJlbnRNb2RlID0gJ2VkaXQnO1xuICAgICAgIG9wZW5DYXRNb2RhbEZvckVkaXRpbmcocGFnZVRpdGxlLCBjYXRJRCk7XG4gICAgICAgZnVuY3Rpb24gb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKXtcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJyk7XG4gICAgICAgICAgIGxldCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG4gICAgICAgXG4gICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBpbnB1dHMgdG8gdGhlIHRhc2sncyB2YWx1ZXNcbiAgICAgICAgICAgY2F0VGl0bGUudmFsdWUgPSBwYWdlVGl0bGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBcbiAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNvbG9yRGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIC8vIEdldCB0aGUgUkdCIGNvbG9yICYgY29udmVydCB0byBoZXguIFRoZW4gc2V0IHRoZSBjb2xvclBpY2tlciB2YWx1ZSB0byB0aGUgaGV4XG4gICAgbGV0IHJnYkNvbG9yID0gY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICBsZXQgaGV4Q29sb3IgPSByZ2JUb0hleChyZ2JDb2xvcik7XG4gICAgY29sb3JQaWNrZXIudmFsdWUgPSBoZXhDb2xvcjtcbiAgICBjb2xvclBpY2tlci5jbGljaygpO1xuICAgICAgXG4gICAgfSk7XG4gICBjb2xvclBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgeyAgICAgLy8gV2hlbiB5b3UgcGljayBhIGNvbG9yLCB1cGRhdGUgdGhlIGRpc3BsYXlcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRGaWx0ZXJzKCl7XG4gIHNlbGVjdGVkQ2F0ZWdvcnlCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKVxuICBzZWxlY3RlZFRpbWVsaW5lQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbiAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1RpbWVsaW5lIGJ1dHRvbnMgZXZlbnQgbGlzdGVuZXJzXG4gIHRvZGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIHNlbGVjdGVkVGltZWxpbmUgPSB0b2RheTtcbiAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gdG9kYXlCdG47XG4gICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuXG59KTtcbiAgdGhpc1dlZWtCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBvbmVXZWVrTGF0ZXIgPSBuZXcgRGF0ZSgpO1xuICAgICAgb25lV2Vla0xhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgNyk7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lID0gb25lV2Vla0xhdGVyO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IHRoaXNXZWVrQnRuO1xuICAgICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xuICB0aGlzTW9udGhCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBvbmVNb250aExhdGVyID0gbmV3IERhdGUoKTtcbiAgICAgIG9uZU1vbnRoTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyAzMCk7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lID0gb25lTW9udGhMYXRlcjtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSB0aGlzTW9udGhCdG47XG4gICAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmUgPSBudWxsO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IGFsbEJ0bjtcbiAgICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gY2F0RmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9SZXNlbGVjdCBjYXRlZ29yeSBidXR0b25zIHRvIHBpY2sgdXAgYW55IG5ld2x5IGFkZGVkIG9uZSAgXG4gIGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRCdG5zJyk7IFxuICBjYXRlZ29yeUJ1dHRvbnMuZm9yRWFjaCgoY2F0QnRuKSA9PiB7XG4gICAgY2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFNldCBzZWxlY3RlZENhdGVnb3J5IHRvIHRoZSBjbGlja2VkIGJ1dHRvbidzIHRleHQgY29udGVudFxuICAgICAgICBzZWxlY3RlZENhdGVnb3J5ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgY2F0SUQgPSBwYXJzZUludCh0aGlzLmRhdGFzZXQuY2F0SWQpO1xuICAgICAgICBzZWxlY3RDYXRGaWx0ZXIoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgfSk7XG4gIH0pOyBcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5U2V0dGluZ3MoKXtcbiAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgLy8gTmF2IENvbGxhcHNlICYgRXhwYW5kXG4gICAgICBjb25zdCBuYXZEaXNwbGF5U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShuYXYpLmRpc3BsYXk7XG4gICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY29uc3QgaXNTbWFsbFNjcmVlbiA9IHNjcmVlbldpZHRoIDwgNzUwO1xuICAgIFxuICAgICAgaWYgKGlzU21hbGxTY3JlZW4pIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnMic7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAzJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuYXZEaXNwbGF5U3R5bGUgPT09ICdub25lJykge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzIvMyc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMjQwcHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kJyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEycHgnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAvLyBjb25zdCBtZWRpYVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDc1MXB4KScpO1xuICAgIC8vIG1lZGlhUXVlcnkuYWRkTGlzdGVuZXIoaGFuZGxlTWVkaWFRdWVyeUNoYW5nZSk7XG4gICAgLy8gLy8gSW5pdGlhbCBjaGVjayB0byBhcHBseSB0aGUgY2hhbmdlcyBiYXNlZCBvbiB0aGUgc2NyZWVuIHNpemVcbiAgICAvLyBoYW5kbGVNZWRpYVF1ZXJ5Q2hhbmdlKG1lZGlhUXVlcnkpO1xuXG4gICAgLy8gZnVuY3Rpb24gaGFuZGxlTWVkaWFRdWVyeUNoYW5nZShtZWRpYVF1ZXJ5KXtcbiAgICAvLyAgICAgaWYoc2NyZWVuV2lkdGggPCA3NTEpe1xuICAgIC8vICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgLy8gICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgLy8gICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAvLyAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgIC8vICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcblxuICAgIC8vICAgICAgICAgLy8gaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgLy8gICAgICAgICAvLyAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgIC8vICAgICAgICAgLy8gICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgIC8vICAgICAgICAgLy8gICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgIC8vICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAvLyAgICAgICAgIC8vICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgIC8vICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgICAgICAgIC8vICAgICBuYXYuc3R5bGUuekluZGV4ID0gJzInO1xuICAgIC8vICAgICAgICAgLy8gICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gMyc7XG4gICAgLy8gICAgICAgICAvLyAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XG4gICAgLy8gICAgICAgICAvLyAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnOyAgICBcbiAgICAvLyAgICAgICAgIC8vIH1cbiAgICAvLyAgICAgICAgIC8vIC8vIFNjcmVlbiBzaXplIGlzIHVuZGVyICA3NTFweCwgYXBwbHkgdGhlIGNoYW5nZXNcbiAgICAvLyAgICAgICAgIC8vIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgIC8vICAgICAgICAgLy8gY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgIC8vICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgLy8gU2NyZWVuIHNpemUgaXMgNzUxcHggb3IgYWJvdmUsIHJlbW92ZSB0aGUgY2hhbmdlc1xuICAgIC8vICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgLy8gICAgICAgICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBzcmMgYXR0cmlidXRlIG9mIGNvbGxhcHNlQnRuXG4gICAgLy8gICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7IC8vIFJlcGxhY2UgJ29yaWdpbmFsLnBuZycgd2l0aCB5b3VyIGFjdHVhbCBpbWFnZSBzb3VyY2VcbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxufSk7XG4gICAgXG4gIHNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyAvLyBDbG9zZXMgdGFzayBtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH07IFxuICBzcGFuQ2F0TW9kYWwub25jbGljayA9IGZ1bmN0aW9uKCkgeyAvLyBDbG9zZXMgY2F0bW9kYWwgb24gY2xpY2tpbmcgWFxuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9ICAgICBcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyAvLyBDbG9zZXMgTW9kYWxzIHdoZW4gY2xpY2tpbmcgb3V0c2lkZSBvZiBpdCBcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfSBlbHNlIGlmKGV2ZW50LnRhcmdldCA9PSBjYXRNb2RhbCkge1xuICAgICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuICB9XG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vIEVudGVyIGFjdHMgYXMgYSBjbGlja1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgXG4gICAgICAgICAgb2tUYXNrQnRuLmNsaWNrKCk7IFxuICAgICAgfVxuICB9KTtcbiAgXG59O1xuXG5mdW5jdGlvbiBzZWxlY3RDYXRGaWx0ZXIoc2VsZWN0ZWRDYXRlZ29yeSl7XG4gICAgLy8gUmVtb3ZlICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgZnJvbSBhbGwgY2F0ZWdvcnkgYnV0dG9uc1xuICAgIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgYW5kIGFkZCAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIHRvIHRoZSBjbGlja2VkIGJ1dHRvblxuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcbiAgICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG5cbiAgICAvLyBVcGRhdGUgUGFnZVxuICAgIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgICB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgcmV0dXJuIHNlbGVjdGVkQ2F0ZWdvcnlCdG47XG59XG5cbmZ1bmN0aW9uIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bil7XG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgLy8gUmVtb3ZlICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgZnJvbSBhbGwgdGltZWxpbmUgYnV0dG9uc1xuICAgIHRpbWVsaW5lQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgUGFnZVxuICAgIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgICB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgXG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHJldHVybiBzZWxlY3RlZFRpbWVsaW5lQnRuO1xufVxuXG5zb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYoc29ydE9wdGlvbnMuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKXtcbiAgICBzb3J0T3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHNvcnRCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCA1cHggMHB4IDBweCc7XG5cbiAgICB9ZWxzZSB7XG4gICAgICAgIHNvcnRPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IFxuICAgICAgICBzb3J0QnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcnO1xuICAgIH1cbn0pO1xuXG5kYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgc29ydCgnZGF0ZScpO1xufSk7XG5cbmltcG9ydGFuY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBzb3J0KCdwcmlvcml0eScpO1xufSk7XG4iLCJpbXBvcnQge2NhdGVnb3J5QnV0dG9uc30gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQgeyB0YXNrQ291bnRlciB9IGZyb20gJy4vdGFza0Z1bmN0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBDYXRlZ29yeSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29sb3IsIGNhdElkID0gbnVsbCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXTtcbiAgICAgICAgdGhpcy5jYXRJZCA9IGNhdElkIHx8ICsrbGFzdENhdElkO1xuICAgIH1cbiAgICBhZGRUYXNrVG9DYXQodGFzaykge1xuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzayk7XG4gICAgICAgIC8vIFNldCB0aGUgdGFzaydzIElEIHRvIG1hdGNoIHRoZSBjb3JyZWN0IGNvdW50ZXIgdmFsdWVcbiAgICAgICAgdGFzay5pZCA9IHRhc2tDb3VudGVyO1xuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgIH1cbiAgICByZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5pZCAhPT0gdGFza0lkKTtcbiAgICB9XG59XG5cbmxldCBsYXN0Q2F0SWQgPSBNYXRoLm1heCguLi5BcnJheS5mcm9tKGNhdGVnb3J5QnV0dG9ucykubWFwKGJ0biA9PiBwYXJzZUludChidG4uZGF0YXNldC5jYXRJZCkpKTtcbmxldCBkZWZhdWx0Q2F0ZWdvcmllcyA9IGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpO1xubGV0IGNhdGVnb3JpZXMgPSBbLi4uZGVmYXVsdENhdGVnb3JpZXNdOyBcblxuLy9DaGVja3MgaWYgd2UgYXJlIGVkZGl0aW5nIG9yIGNyZWF0aW5nIGEgbmV3IGNhdCAgXG5sZXQgY3VycmVudE1vZGUgPSBudWxsO1xubGV0IGNhdElEO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMoKSB7XG4gICAgY29uc3QgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3JpZXNEaXYgYnV0dG9uJyk7XG4gICAgbGV0IGNhdGVnb3JpZXMgPSBBcnJheS5mcm9tKGNhdGVnb3J5QnV0dG9ucykubWFwKGJ1dHRvbiA9PiB7XG4gICAgICAgIGxldCBjYXRJZCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmNhdElkKTsgXG4gICAgICAgIGlmIChjYXRJZCA+IGxhc3RDYXRJZCkgbGFzdENhdElkID0gY2F0SWQ7XG4gICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkoYnV0dG9uLnRleHRDb250ZW50LnRyaW0oKSwgbnVsbCwgY2F0SWQpOyAvLyBQYXNzaW5nIGNhdElkIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXM7XG59IFxuXG5leHBvcnQge2NhdGVnb3JpZXMsIGNhdElELCBjdXJyZW50TW9kZX07IiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJy4vY2F0ZWdvcnlGdW5jdGlvbnMnO1xuXG5sZXQgdGFza0NvdW50ZXIgPSAwO1xuXG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IoaWQsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgcHJpb3JpdHksIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3RcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBmYWxzZTsgXG4gICAgfVxuICAgIHRvZ2dsZUNvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gIXRoaXMuY29tcGxldGU7XG4gICAgfVxufVxuXG5leHBvcnQge3Rhc2tDb3VudGVyfTtcblxuXG4iLCJpbXBvcnQge1Rhc2t9IGZyb20nLi90YXNrRnVuY3Rpb25zJztcbmltcG9ydCB7Q2F0ZWdvcnl9IGZyb20nLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5pbXBvcnQge3Rhc2tFdkxpc3RlbmVycywgc2V0RGVmYXVsdEZpbHRlcnMsIHRpbWVGaWx0ZXJFdkxpc3RlbmVycywgY2F0RmlsdGVyRXZMaXN0ZW5lcnMsY2F0RXZMaXN0ZW5lcnMsIGRpc3BsYXlTZXR0aW5nc30gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQge2NvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheX0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5cbnRhc2tFdkxpc3RlbmVycygpO1xuY2F0RXZMaXN0ZW5lcnMoKTtcbnNldERlZmF1bHRGaWx0ZXJzKCk7XG50aW1lRmlsdGVyRXZMaXN0ZW5lcnMoKTtcbmNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5kaXNwbGF5U2V0dGluZ3MoKTtcblxuIl0sIm5hbWVzIjpbImlzRGFya0NvbG9yIiwiY29sb3IiLCJyZ2IiLCJzdGFydHNXaXRoIiwiciIsInBhcnNlSW50Iiwic2xpY2UiLCJnIiwiYiIsInZhbHVlcyIsInN1YnN0cmluZyIsImxlbmd0aCIsInNwbGl0IiwiYnJpZ2h0bmVzcyIsIk1hdGgiLCJyb3VuZCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtYXREYXRlRm9ySW5wdXQiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJvZmZzZXQiLCJnZXRUaW1lem9uZU9mZnNldCIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiU3RyaW5nIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsInVwZGF0ZVBhZ2VUaXRsZSIsInNlbGVjdGVkQ2F0ZWdvcnlCdG4iLCJwYWdlVGl0bGUiLCJ0ZXh0Q29udGVudCIsInNlbGVjdGVkQ2F0QnRuIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImJnQ29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmb250Q29sb3IiLCJzdHlsZSIsImRhdGFzZXQiLCJjYXRJZCIsInVwZGF0ZVBhZ2VUYXNrcyIsInNlbGVjdGVkVGltZWxpbmUiLCJzZWxlY3RlZENhdGVnb3J5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRhc2tDb250YWluZXJEaXYiLCJ0YXNrIiwidGFza0lkIiwiY2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwidGFza3MiLCJmaW5kIiwiaWQiLCJnZXRUYXNrQnlJZCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrRHVlRGF0ZSIsImR1ZURhdGUiLCJzZXRIb3VycyIsInRhc2tDYXRlZ29yeSIsIm5hbWUiLCJkaXNwbGF5Iiwic29ydCIsInNvcnRPcHRpb24iLCJ0YXNrQ29udGFpbmVyRGl2cyIsImRhdGFUb1NvcnQiLCJ0YXNrUHJpb3JpdHkiLCJzcmMiLCJ0YXNrUHJpb3JpdHlGaWxlbmFtZSIsImxhc3RJbmRleE9mIiwicHVzaCIsImEiLCJnZXRQcmlvcml0eVZhbHVlIiwidGFza1ByaW9yaXR5U3JjIiwicHJpb3JpdHlWYWx1ZUEiLCJzb3J0QnlQcmlvcml0eSIsInBhcmVudENvbnRhaW5lciIsInJlbW92ZUNoaWxkIiwiZGF0YSIsImFwcGVuZENoaWxkIiwiY29udGVudCIsIm5hdiIsIm1vZGFsIiwiY2F0TW9kYWwiLCJ0YXNrc0NvbnRhaW5lciIsImNvbGxhcHNlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJzb3J0T3B0aW9ucyIsInNvcnRCdG4iLCJkYXRlQnRuIiwiaW1wb3J0YW5jZUJ0biIsImNyZWF0ZVRhc2tCdG4iLCJva1Rhc2tCdG4iLCJjYW5jZWxUYXNrQnRuIiwiZGVsZXRlQnRuTW9kYWwiLCJuZXdDYXRCdG4iLCJva0NhdEJ0biIsImNhbmNlbENhdEJ0biIsImNvbG9yUGlja2VyIiwiY29sb3JEaXNwbGF5IiwiYWxsQnRuIiwidG9kYXlCdG4iLCJ0aGlzV2Vla0J0biIsInRoaXNNb250aEJ0biIsInBhZ2VUaW1lbGluZSIsInNwYW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3BhbkNhdE1vZGFsIiwidGl0bGVJbnB1dCIsImNhdGVnb3J5U2VsZWN0IiwiZHVlRGF0ZVNlbGVjdCIsInByaW9yaXR5U2VsZWN0IiwiZGVzY3JpcHRpb25JbnB1dCIsImNhdGVnb3J5QnV0dG9ucyIsInRpbWVsaW5lQnV0dG9ucyIsInNlbGVjdGVkVGltZWxpbmVCdG4iLCJ0b2RheSIsImdldEN1cnJlbnREYXRlIiwic2VsZWN0Q2F0RmlsdGVyIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwic2VsZWN0VGltZUZpbHRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3JkZXJSYWRpdXMiLCJDYXRlZ29yeSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImxhc3RDYXRJZCIsImFkZFRhc2tUb0NhdCIsInRhc2tDb3VudGVyIiwicmVtb3ZlVGFza0Zyb21DYXQiLCJmaWx0ZXIiLCJjYXRJRCIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiZXJyb3IiLCJyZWR1Y2UiLCJjb3VudCIsInBhcmVudE5vZGUiLCJ2YWx1ZSIsImRkIiwibW0iLCJ5eXl5IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlcG9ydFZhbGlkaXR5IiwiY2F0ZWdvcnlWYWx1ZSIsImltcG9ydGFuY2UiLCJ1bmRlZmluZWQiLCJlZGl0VGFzayIsIm5ld1Rhc2siLCJjcmVhdGVFbGVtZW50Iiwib3BlblRhc2tNb2RhbEZvckVkaXRpbmciLCJ0YXNrQmlnRGl2IiwidGFza1ByaW0iLCJjaGVja2JveCIsInR5cGUiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja2VkIiwidGFza1RpdGxlIiwidGFza1NlYyIsInRhc2tQcmlvcml0eUltZyIsImRlbGV0ZUJ0bkJpZ0RpdiIsImxpbmVicmVhayIsImFkZFRhc2tEaXYiLCJhZGRUYXNrIiwidGFza0V2TGlzdGVuZXJzIiwiY2F0VGl0bGUiLCJjYXRDb2xvciIsIm5ld0NhdGVnb3J5IiwibmV3Q2F0ZWdvcnlFbGVtZW50IiwibmV3QnV0dG9uIiwiaW5uZXJUZXh0IiwiaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzIiwiZWRpdGluZ0NhdGVnb3J5IiwiY2F0IiwiYXNzb2NpYXRlZEJ1dHRvbiIsImlubmVySFRNTCIsImZpcnN0Q2hpbGQiLCJvcHRpb24iLCJ1cGRhdGVDYXRlZ29yeURyb3Bkb3duIiwib3BlbkNhdE1vZGFsRm9yRWRpdGluZyIsImhleENvbG9yIiwibWF0Y2giLCJ0b1N0cmluZyIsInJnYlRvSGV4IiwiY2xpY2siLCJiYWNrZ3JvdW5kIiwib25lV2Vla0xhdGVyIiwic2V0RGF0ZSIsIm9uZU1vbnRoTGF0ZXIiLCJjYXRCdG4iLCJuYXZEaXNwbGF5U3R5bGUiLCJpbm5lcldpZHRoIiwiekluZGV4IiwiZ3JpZENvbHVtbiIsIm9uY2xpY2siLCJ0YXJnZXQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9