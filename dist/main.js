(()=>{"use strict";function e(){const e=new Date;return e.setHours(0,0,0,0),e}function t(e){let t;return t=e.startsWith("#")?{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)}:e,Math.round((299*t.r+587*t.g+114*t.b)/1e3)<170}function n(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function l(e){let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l}function o(){thisWeekBtn.classList.remove("selectedFilter"),thisMonthBtn.classList.remove("selectedFilter"),allBtn.classList.remove("selectedFilter"),todayBtn.classList.remove("selectedFilter")}function s(e,t,l){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of R){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(n(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==t&&a.name!==t?l.style.display="none":l.style.display="block"})),pageTitle.textContent=t,pageTitle.dataset.catId=l}const a=document.querySelector(".content"),d=document.querySelector("nav"),i=document.querySelector("#modal"),c=document.querySelector("#catModal"),r=document.querySelector(".tasksContainer"),u=document.getElementById("collapseBtn"),m=document.getElementById("createTask"),g=document.getElementById("okTaskBtn"),y=document.getElementById("cancelTaskBtn"),p=document.getElementById("delete"),k=document.getElementById("newCatBtn"),v=document.getElementById("okCatBtn"),E=document.getElementById("cancelCatBtn"),f=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),h=document.getElementById("allBtn"),C=document.getElementById("todayBtn"),B=document.getElementById("thisWeekBtn"),L=document.getElementById("thisMonthBtn"),b=document.getElementById("pageTimeline");let w=document.getElementsByClassName("close")[0],D=document.getElementsByClassName("closeCatModal")[0],x=document.querySelector("form"),T=document.getElementById("pageTitle"),S=document.getElementById("title"),q=document.getElementById("category"),F=document.getElementById("dueDate"),M=document.getElementById("priority"),A=document.getElementById("description"),$=document.querySelectorAll(".catBtns"),N=document.getElementById("All Inbox"),P="All Inbox",H=e();function z(){$=document.querySelectorAll(".catBtns"),$.forEach((e=>{e.addEventListener("click",(function(){$.forEach((e=>{e.classList.remove("selectedFilter")})),this.classList.add("selectedFilter"),P=this.textContent,Y=parseInt(this.dataset.catId),l(this),s(H,P,Y)}))}))}class W{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++_}addTaskToCat(e){this.tasks.push(e),e.id=j,j++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let Y,_=Math.max(...Array.from($).map((e=>parseInt(e.dataset.catId)))),O=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>_&&(_=t),new W(e.textContent.trim(),null,t)}))}(),R=[...O],V=null,j=0;class G{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return i.style.display="none",void delete S.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete S.dataset.editingTaskId;for(let l of R)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),j--,j=R.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),i.style.display="none",delete S.dataset.editingTaskId}m.addEventListener("click",(function(){S.value="",q.value="All Inbox";let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,F.value=e,M.value="Low",A.value="",i.style.display="block"})),y.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none"})),g.addEventListener("click",(function(t){if(document.querySelector("form").reportValidity()){t.preventDefault(),S.classList.remove("error");let l=document.getElementById("title").value,o=document.getElementById("category").value,a=document.getElementById("category").value,d=R.find((e=>e.name===a)),c=document.getElementById("dueDate").value,u=document.getElementById("priority").value,m=document.getElementById("description").value;S.dataset.editingTaskId?function(e,t,l,o,a){let d,c=S.dataset.editingTaskId;for(let e of R)if(d=e.tasks.find((e=>e.id==c)),d)break;if(void 0===d)return void console.error(`No task found with id ${c}`);d.title=e,d.category=t,d.dueDate=l,d.priority=o,d.description=a,console.log("editing task, title: "+e+" id: "+c);let r=document.getElementById(c);r.querySelector(".taskTitle").textContent=e,r.querySelector(".taskCategory").textContent=`(${t.name})`,r.querySelector(".taskDueDate").textContent=n(l),r.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete S.dataset.editingTaskId,i.style.display="none",s(H,P)}(l,d,c,u,m):function(t,l,o,a,d,c){let u=new G(j,t,o,a,d,c);j++,console.log(o),o.addTaskToCat(u);let m=u.id;const g=document.createElement("div");function y(e){console.log(e),S.value=e.title,q.value=e.category.name,F.value=e.dueDate,M.value=e.priority,A.value=e.description,S.dataset.editingTaskId=e.id,i.style.display="block"}g.classList.add("taskContainerDiv"),function(t,l,o,s,a,d){const i=document.createElement("div");i.classList.add("taskBigDiv");const c=document.createElement("div");c.classList.add("taskDiv"),c.id=t,c.dataset.taskId=t,c.addEventListener("click",(function(){y(u)}));const m=document.createElement("div");m.classList.add("taskPrim"),c.appendChild(m);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),f.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),f.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",m.appendChild(p),m.appendChild(k),m.appendChild(v);const E=document.createElement("div");E.classList.add("taskSec"),c.appendChild(E);const f=document.createElement("div");f.classList.add("taskDueDate"),f.textContent=n(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=t,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),E.appendChild(f),E.appendChild(I),i.appendChild(c),i.appendChild(C);const B=document.createElement("hr");g.appendChild(i),g.appendChild(B),r.appendChild(g)}(m,t,l,a,0,M),s(H,P)}(l,o,d,c,u,m),i.style.display="none"}else S.classList.add("error");N=q.value,console.log(N),l(document.querySelector(`#${N}`))})),p.addEventListener("click",(function(t){t.stopPropagation();let n=S.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),S.addEventListener("input",(function(){this.classList.remove("error")}))}(),k.addEventListener("click",(function(){V="new",c.style.display="block",catTitle.value="",I.style.backgroundColor="#8a59b9"})),v.addEventListener("click",(function(e){e.preventDefault();let n=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);if(I.style.background=n,f.value=n,"new"===V){let e=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value,l=new W(e,n);R.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=e,s.id=e,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,t(n)?s.style.color="white":s.style.color="black",o.appendChild(s),document.getElementById("categoriesList").appendChild(o),z()}else if("edit"===V){console.log(Y),"number"!=typeof Y&&console.error("catId is not a number at [description of the code location]",Y);let e=R.find((e=>e.catId===Y));if(e){e.name=document.getElementById("catTitle").value,e.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${Y}"]`);n&&(n.innerText=e.name,n.style.backgroundColor=e.color,t(e.color)?(n.style.color="white",T.style.color="white",console.log(T.style.color)):(n.style.color="black",T.style.color="black",console.log(T.style.color)))}else console.error("Could not find category with ID:",Y);T.innerHTML=catTitle.value,console.log(f.value),T.style.backgroundColor=f.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);R.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),c.style.display="none"})),E.addEventListener("click",(function(){})),T.addEventListener("click",(function(){Y=parseInt(this.dataset.catId),V="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,c.style.display="block"}(T)})),I.addEventListener("click",(function(){console.log(I.style.backgroundColor),f.click()})),f.addEventListener("input",(function(){I.style.background=f.value})),N.classList.add("selectedFilter"),l(N),document.getElementById("allBtn").classList.add("selectedFilter"),C.addEventListener("click",(function(){const t=e();H=t,s(H,P),o(),C.classList.add("selectedFilter"),b.textContent=this.textContent})),B.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+7),H=n,s(H,P),o(),B.classList.add("selectedFilter"),b.textContent=this.textContent})),L.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+30),H=n,s(H,P),o(),L.classList.add("selectedFilter"),b.textContent=this.textContent})),h.addEventListener("click",(function(){H=null,s(H,P),o(),h.classList.add("selectedFilter"),b.textContent=this.textContent,h.classList.add("selectedFilter")})),z(),u.addEventListener("click",(function(){const e=window.getComputedStyle(d).display;window.innerWidth<750?"none"===e?(d.style.display="block",d.style.zIndex="2",a.style.gridColumn="1 / 3",a.classList.add("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png"):"none"===e?(d.style.display="block",d.style.zIndex="",a.style.gridColumn="2/3",a.classList.remove("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png")})),w.onclick=function(){i.style.display="none",delete S.dataset.editingTaskId},D.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target==i?i.style.display="none":e.target==c&&(c.style.display="none")},x.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),g.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTJFLElBQU0sMkJBR2xCL0UsRUFBSWxDLE1BQU04QixRQUFVLE9BQ3BCSSxFQUFJbEMsTUFBTWlLLE9BQVMsR0FDbkJoSSxFQUFRakMsTUFBTWtLLFdBQWEsU0FDM0JqSSxFQUFROUIsVUFBVUMsT0FBTyxXQUN6QjRGLFFBQVFnQixJQUFJLFVBQ1oxRSxFQUFZMkUsSUFBTSx3QkFJSSxTQUFwQjhDLEdBQ0Y3SCxFQUFJbEMsTUFBTThCLFFBQVUsUUFDcEJJLEVBQUlsQyxNQUFNaUssT0FBUyxHQUNuQmhJLEVBQVFqQyxNQUFNa0ssV0FBYSxNQUMzQmpJLEVBQVE5QixVQUFVQyxPQUFPLFdBQ3pCa0MsRUFBWTJFLElBQU0sMkJBR2xCL0UsRUFBSWxDLE1BQU04QixRQUFVLE9BQ3BCSSxFQUFJbEMsTUFBTWlLLE9BQVMsR0FDbkJoSSxFQUFRakMsTUFBTWtLLFdBQWEsU0FDM0JqSSxFQUFROUIsVUFBVUMsT0FBTyxXQUN6QjRGLFFBQVFnQixJQUFJLFVBQ1oxRSxFQUFZMkUsSUFBTSx1QkFJeEIsSUFDRi9ELEVBQUtpSCxRQUFVLFdBQ1hoSSxFQUFNbkMsTUFBTThCLFFBQVUsY0FDZnVCLEVBQVc1QixRQUFRb0UsYUFDOUIsRUFDQXpDLEVBQWErRyxRQUFVLFdBQ25CL0gsRUFBU3BDLE1BQU04QixRQUFVLE1BQzdCLEVBQ0FwQyxPQUFPeUssUUFBVSxTQUFTekQsR0FDbEJBLEVBQU0wRCxRQUFVakksRUFDbEJBLEVBQU1uQyxNQUFNOEIsUUFBVSxPQUNkNEUsRUFBTTBELFFBQVVoSSxJQUN0QkEsRUFBU3BDLE1BQU04QixRQUFVLE9BRWpDLEVBQ0EsRUFBS2lDLGlCQUFpQixXQUFXLFNBQVMyQyxHQUNwQixVQUFkQSxFQUFNMkQsTUFDTjNELEVBQU1DLGlCQUNObEUsRUFBVWtILFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgLy8gQ29udmVydCBoZXggY29sb3IgdG8gcmdiXG4gIGxldCByZ2I7XG4gIGlmIChjb2xvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgIGxldCByID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMSwgMyksIDE2KTtcbiAgICAgIGxldCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgIGxldCBiID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgIHJnYiA9IHsgciwgZywgYiB9O1xuICB9IGVsc2Uge1xuICAgICAgLy8gQXNzdW1lIGl0J3MgYWxyZWFkeSBhbiByZ2IgY29sb3JcbiAgICAgIHJnYiA9IGNvbG9yO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGJyaWdodG5lc3Mgb24gYSBzY2FsZSBmcm9tIDAgdG8gMjU1XG4gIGxldCBicmlnaHRuZXNzID0gTWF0aC5yb3VuZCgoKHJnYi5yICogMjk5KSArIChyZ2IuZyAqIDU4NykgKyAocmdiLmIgKiAxMTQpKSAvIDEwMDApO1xuICBcbiAgcmV0dXJuIGJyaWdodG5lc3MgPCAxNzA7IC8vIFJldHVybiB0cnVlIGlmIHRoZSBjb2xvciBpcyBkYXJrXG59XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvcklucHV0KGRhdGVTdHJpbmcpIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICBjb25zdCBvZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7IC8vIEdldCB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgb2Zmc2V0KTsgLy8gQWRqdXN0IHRoZSBkYXRlIGJ5IHRoZSB0aW1lem9uZSBvZmZzZXRcbiAgY29uc3QgbW0gPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgZGQgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIHJldHVybiBgJHttbX0vJHtkZH0vJHt5eXl5fWA7XG59XG5leHBvcnQgZnVuY3Rpb24gcmdiVG9IZXgocmdiKSB7XG4gIC8vIFNlcGFyYXRlIFJHQiB2YWx1ZXNcbiAgbGV0IHZhbHVlcyA9IHJnYi5tYXRjaCgvXnJnYlxcKChcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKylcXCkkLyk7XG5cbiAgLy8gQ29udmVydCBlYWNoIHZhbHVlIHRvIGhleGFkZWNpbWFsXG4gIGxldCBoZXhDb2xvciA9IFwiI1wiICsgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzFdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1szXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuXG4gIHJldHVybiBoZXhDb2xvcjtcbn1cbiAgIiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9ySW5wdXQgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbi8vIGltcG9ydCB7IGN1cnJlbnRDYXRlZ29yeSB9IGZyb20gXCIuL2RvbUVsZW1lbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJQYWdlQ2hhbmdlcyhjYXRlZ29yeUJ1dHRvbil7XG4gICAgbGV0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYXRlZ29yeUJ1dHRvbik7XG4gICAgbGV0IGJnQ29sb3IgPSBjb21wdXRlZFN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICBsZXQgZm9udENvbG9yID0gY29tcHV0ZWRTdHlsZS5jb2xvcjtcbiAgICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcbiAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSBmb250Q29sb3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWx0ZXJzKCl7XG4gICAgdGhpc1dlZWtCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB0aGlzTW9udGhCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICBhbGxCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB0b2RheUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShlbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5LCBjYXRJRCkge1xuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdGFza0NvbnRhaW5lckRpdiBlbGVtZW50cyBhbmQgY2hlY2sgdGhlaXIgdGFza3MnIGR1ZSBkYXRlc1xuICAgIGNvbnN0IGFsbFRhc2tDb250YWluZXJEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2tDb250YWluZXJEaXYnKTtcbiAgICBhbGxUYXNrQ29udGFpbmVyRGl2cy5mb3JFYWNoKCh0YXNrQ29udGFpbmVyRGl2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tEaXYgPSB0YXNrQ29udGFpbmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRGl2Jyk7IC8vIEdldCB0aGUgdGFza0RpdiBpbnNpZGUgdGhlIGN1cnJlbnQgdGFza0NvbnRhaW5lckRpdlxuICAgICAgICBjb25zdCB0YXNrSWQgPSB0YXNrRGl2LmRhdGFzZXQudGFza0lkO1xuICAgICAgICBjb25zdCB0YXNrID0gZ2V0VGFza0J5SWQodGFza0lkKTsgLy8gUmV0cmlldmUgdGhlIHRhc2sgb2JqZWN0IGJ5IElEXG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhc2sncyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgZW5kRGF0ZVxuICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IG5ldyBEYXRlKGZvcm1hdERhdGVGb3JJbnB1dCh0YXNrLmR1ZURhdGUpKTtcbiAgICAgICAgdGFza0R1ZURhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhc2sncyBjYXRlZ29yeSBtYXRjaGVzIHRoZSBzZWxlY3RlZCBjYXRlZ29yeVxuICAgICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSB0YXNrLmNhdGVnb3J5O1xuXG4gICAgICAgIGlmICgoZW5kRGF0ZSA9PT0gbnVsbCB8fCB0YXNrRHVlRGF0ZSA8PSBlbmREYXRlKSAmJiAoc2VsZWN0ZWRDYXRlZ29yeSA9PT0gXCJBbGwgSW5ib3hcIiB8fCB0YXNrQ2F0ZWdvcnkubmFtZSA9PT0gc2VsZWN0ZWRDYXRlZ29yeSkpIHtcbiAgICAgICAgICAgIC8vIFNob3cgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBlbmREYXRlLCBhbmQgY2F0ZWdvcnkgbWF0Y2hlc1xuICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhpZGUgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIG91dHNpZGUgdGhlIHJhbmdlIG9yIGNhdGVnb3J5IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRhc2tCeUlkKHRhc2tJZCkge1xuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggY2F0ZWdvcnlcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB0YXNrIGluIHRoZSBjYXRlZ29yeSdzIHRhc2tzIGFycmF5IHdpdGggdGhlIG1hdGNoaW5nIElEXG4gICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7IC8vIFJldHVybiB0aGUgdGFzayBpZiBmb3VuZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gUmV0dXJuIG51bGwgaWYgbm8gdGFzayB3aXRoIHRoZSBnaXZlbiBJRCBpcyBmb3VuZFxuICAgICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vYXBwbHkgcGFnZSB0aXRsZSBiYXNlZCBvbiBjYXRlZ3J5XG4gICAgcGFnZVRpdGxlLnRleHRDb250ZW50ID0gc2VsZWN0ZWRDYXRlZ29yeTtcbiAgICBwYWdlVGl0bGUuZGF0YXNldC5jYXRJZCA9IGNhdElEO1xuICB9OyIsImltcG9ydCB7IFRhc2ssIHRhc2tDb3VudGVyIH0gZnJvbSBcIi4vdGFza0Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudERhdGUsIGZvcm1hdERhdGVGb3JJbnB1dCwgaXNEYXJrQ29sb3IsIHJnYlRvSGV4IH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBmaWx0ZXJQYWdlQ2hhbmdlcywgcmVtb3ZlRmlsdGVycywgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeSB9IGZyb20gXCIuL2Rpc3BsYXlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IENhdGVnb3J5LCBjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGUgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbmF2Jyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xuY29uc3QgY2F0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0TW9kYWwnKTtcbmNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5jb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsYXBzZUJ0bicpO1xuY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVUYXNrJyk7XG5jb25zdCBva1Rhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tUYXNrQnRuJylcbmNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsVGFza0J0bicpO1xuY29uc3QgZGVsZXRlQnRuTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlJyk7XG5jb25zdCBuZXdDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3Q2F0QnRuJyk7XG5jb25zdCBva0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva0NhdEJ0bicpO1xuY29uc3QgY2FuY2VsQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbENhdEJ0bicpO1xuY29uc3QgaW5ib3hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWxsIEluYm94JylcbmNvbnN0IHJlc3BvbnNpYmlsaXRpZXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUmVzcG9uc2liaWxpdGllcycpO1xuY29uc3QgZXZlbnRzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0V2ZW50cyAmIFNvY2lhbCcpO1xuY29uc3QgcHJvZ3JhbW1pbmdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUHJvZ3JhbW1pbmcgQ291cnNlJyk7XG5jb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpO1xuY29uc3QgY29sb3JEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yRGlzcGxheScpO1xuY29uc3QgYWxsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbEJ0bicpO1xuY29uc3QgdG9kYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kYXlCdG4nKTtcbmNvbnN0IHRoaXNXZWVrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNXZWVrQnRuJyk7XG5jb25zdCB0aGlzTW9udGhCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc01vbnRoQnRuJyk7XG5jb25zdCBwYWdlVGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpbWVsaW5lJyk7XG5sZXQgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcbmxldCBzcGFuQ2F0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VDYXRNb2RhbFwiKVswXTtcbmxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xubGV0IHBhZ2VUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGl0bGUnKTtcblxubGV0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpXG5sZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpO1xubGV0IGR1ZURhdGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIik7XG5sZXQgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpO1xubGV0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xubGV0IGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRCdG5zJyk7XG5cbmxldCBjdXJyZW50Q2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWxsIEluYm94Jyk7XG5sZXQgc2VsZWN0ZWRDYXRlZ29yeSA9IFwiQWxsIEluYm94XCI7XG5sZXQgc2VsZWN0ZWRFbmREYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcblxuZXhwb3J0IHtcbiAgY29udGVudCwgbmF2LG1vZGFsLHNwYW4sY2F0TW9kYWwsIHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheSAgXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IFwiQWxsIEluYm94XCI7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgY2FuY2VsVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gc3VibWl0dGluZ1xuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9KTtcbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpLnJlcG9ydFZhbGlkaXR5KCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBc3NpZ24gcHJvcGVydHkgdmFsdWVzIGJhc2VkIG9mZiBpbnB1dHNcbiAgICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeU9iamVjdCA9IGNhdGVnb3JpZXMuZmluZChjYXRlZ29yeSA9PiBjYXRlZ29yeS5uYW1lID09PSBjYXRlZ29yeVZhbHVlKTtcbiAgICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgaW1wb3J0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS52YWx1ZTtcbiAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGNyZWF0aW5nIGEgbmV3IHRhc2sgb3IgdXBkYXRpbmcgYW4gZXhpc3Rpbmcgb25lXG4gICAgICAgICAgaWYgKHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkKSB7XG4gICAgICAgICAgICAgIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG4gICAgICAgICAgfSBlbHNlIHsgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOyB9XG4gICAgICBcbiAgICAgICAgICBmdW5jdGlvbiBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIFRhc2sgT2JqZWN0IFxuICAgICAgICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tDb3VudGVyLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coY2F0ZWdvcnlPYmplY3QpO1xuICAgICAgICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlJbWcuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbWcpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkJpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpOyB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgdGFza0JpZ0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTt0YXNrQmlnRGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkJpZ0Rpdik7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYnJlYWsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0YXNrQmlnRGl2KTt0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGxpbmVicmVhayk7dGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lckRpdik7ICAgIFxuICAgICAgICAgICAgICB9IGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSBjYXRlZ29yeVNlbGVjdC52YWx1ZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50Q2F0ZWdvcnkpO1xuICAgICAgICAgIGZpbHRlclBhZ2VDaGFuZ2VzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2N1cnJlbnRDYXRlZ29yeX1gKSk7XG5cbiAgfSk7XG4gIGRlbGV0ZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICBcbiAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGVUYXNrKHRhc2tJZCk7XG4gIH0pOyAgLy8gKGluc2lkZSBtb2RhbCkuIE91dHNpZGUgbW9kYWwgZXYgbGlzdGVuZXIgaXMgaW5zaWRlIGFkZFRhc2tEaXYgZXZsaXN0ZW5lciAnRGVsZXRlQnRuQmlnRGl2J1xuICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVycm9yIGNsYXNzIHdoZW4gdGhlIHRpdGxlIGlucHV0IHZhbHVlIGNoYW5nZXNcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrPycpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FuY2VscywganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICBpZiAoIXRhc2tEaXYpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGRpdiBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgdGFzayBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIHRhc2tJZFxuICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICBsZXQgdGFza0NhdGVnb3J5O1xuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgaWYgKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgdGFza0NhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBSZW1vdmUgdGhlIHRhc2sgZnJvbSB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheVxuICAgICAgdGFza0NhdGVnb3J5LnJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCk7XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXItLTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlciA9IGNhdGVnb3JpZXMucmVkdWNlKChjb3VudCwgY2F0ZWdvcnkpID0+IGNvdW50ICsgY2F0ZWdvcnkudGFza3MubGVuZ3RoLCAwKTtcbiAgXG4gICAgICAvLyBEZWxldGUgdGhlIHRhc2tDb250YWluZXJEaXZcbiAgICAgIGxldCB0YXNrQ29udGFpbmVyRGl2ID0gdGFza0Rpdi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICB0YXNrQ29udGFpbmVyRGl2LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGFza0NvbnRhaW5lckRpdlxuICBcbiAgICAgIC8vIEhpZGUgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgICAgLy8gQ2xlYXIgdGhlIGVkaXRpbmdUYXNrSWQgc2luY2Ugd2UndmUganVzdCBkZWxldGVkIHRoZSB0YXNrXG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGNhdFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzhhNTliOSc7XG5cbiAgIH0pO1xuICAgb2tDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG4gICBcbiAgICAgICAvLyBHZXQgdGhlIFJHQiBjb2xvciAmIGNvbnZlcnQgdG8gaGV4LiBUaGVuIHNldCB0aGUgY29sb3JQaWNrZXIgdmFsdWUgdG8gdGhlIGhleFxuICAgICAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICBsZXQgaGV4Q29sb3IgPSByZ2JUb0hleChyZ2JDb2xvcik7XG4gICAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gaGV4Q29sb3I7XG4gICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gaGV4Q29sb3I7XG5cbiAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgIC8vIEdldCB0aGUgY2F0ZWdvcnkgbmFtZSBhbmQgY29sb3IgZnJvbSB0aGUgZm9ybSBpbnB1dHNcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgIGxldCBjYXRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBjYXRlZ29yeSBpbnN0YW5jZVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoY2F0VGl0bGUsIGNhdENvbG9yKTtcbiAgICAgICAgICAgY2F0ZWdvcmllcy5wdXNoKG5ld0NhdGVnb3J5KTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGlzdCBpdGVtXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICBsZXQgbmV3QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pbm5lclRleHQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlkID0gY2F0VGl0bGU7XG4gICAgICAgICAgIG5ld0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXRCdG5zJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjYXRDb2xvcjtcbiAgICAgICAgICAgbmV3QnV0dG9uLmRhdGFzZXQuY2F0SWQgPSBuZXdDYXRlZ29yeS5jYXRJZDtcbiAgIFxuICAgICAgICAgICBpZiAoaXNEYXJrQ29sb3IoY2F0Q29sb3IpKSB7XG4gICAgICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgfVxuICAgICAgICAgICBcbiAgICAgICAgbmV3Q2F0ZWdvcnlFbGVtZW50LmFwcGVuZENoaWxkKG5ld0J1dHRvbik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yaWVzTGlzdCcpLmFwcGVuZENoaWxkKG5ld0NhdGVnb3J5RWxlbWVudCk7XG4gICAgICAgIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE1vZGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAvL1JldHJpZXZlIHRoZSBjYXRlZ29yeSBmcm9tIHRoZSBjYXRlZ29yaWVzIGFycmF5IGJhc2VkIG9uIHRoZSBjYXRJRFxuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRJRCk7XG4gICAgICAgICAgIGlmICh0eXBlb2YgY2F0SUQgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhdElkIGlzIG5vdCBhIG51bWJlciBhdCBbZGVzY3JpcHRpb24gb2YgdGhlIGNvZGUgbG9jYXRpb25dJywgY2F0SUQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIGxldCBlZGl0aW5nQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ID0+IGNhdC5jYXRJZCA9PT0gY2F0SUQpO1xuICAgICAgIFxuICAgICAgICAgICAvL1VwZGF0ZSB0aGUgY2F0ZWdvcnkgdmFsdWVzXG4gICAgICAgICAgIGlmIChlZGl0aW5nQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgICAgICBlZGl0aW5nQ2F0ZWdvcnkuY29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcbiAgICAgICBcbiAgICAgICAgICAgICAgIC8vVXBkYXRlIHRoZSBVSSBlbGVtZW50IChidXR0b24gaW4gdGhpcyBjYXNlKSByZXByZXNlbnRpbmcgdGhlIGNhdGVnb3J5XG4gICAgICAgICAgICAgICBsZXQgYXNzb2NpYXRlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJ1dHRvbltkYXRhLWNhdC1pZD1cIiR7Y2F0SUR9XCJdYCk7XG4gICAgICAgICAgICAgICBpZiAoYXNzb2NpYXRlZEJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uaW5uZXJUZXh0ID0gZWRpdGluZ0NhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlZGl0aW5nQ2F0ZWdvcnkuY29sb3I7XG4gICAgICAgXG4gICAgICAgICAgICAgICAgICAgLy9DaGVjayBjb2xvciBicmlnaHRuZXNzIHRvIGFkanVzdCB0ZXh0IGNvbG9yIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihlZGl0aW5nQ2F0ZWdvcnkuY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGNhdGVnb3J5IHdpdGggSUQ6JywgY2F0SUQpO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgLy9VcGRhdGUgcGFnZSB0aXRsZVxuICAgICAgICAgICBwYWdlVGl0bGUuaW5uZXJIVE1MID0gY2F0VGl0bGUudmFsdWU7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNvbG9yUGlja2VyLnZhbHVlKTtcbiAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgICAgIH1cbiAgICAgICB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCk7XG4gICAgICAvLyAgZmlsdGVyQnRuc0V2TGlzdGVuZXJzKCk7XG4gICBcbiAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICBcbiAgICAgICBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCkge1xuICAgICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3Rpbmcgb3B0aW9uc1xuICAgICAgICAgICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnknKTtcbiAgICAgICAgICAgd2hpbGUgKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnJlbW92ZUNoaWxkKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC8vIEFkZCBuZXcgb3B0aW9ucyBiYXNlZCBvbiB0aGUgY2F0ZWdvcmllcyBhcnJheVxuICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICB9KTtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNhbmNlbENhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAgICBcbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgY3VycmVudE1vZGUgPSAnZWRpdCc7XG4gICAgICAgb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKTtcbiAgICAgICBmdW5jdGlvbiBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpe1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKTtcbiAgICAgICAgICAgbGV0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbiAgICAgICBcbiAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICBjYXRUaXRsZS52YWx1ZSA9IHBhZ2VUaXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY29sb3JEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcik7XG4gICAgY29sb3JQaWNrZXIuY2xpY2soKTtcbiAgICAgIFxuICAgIH0pO1xuICAgY29sb3JQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHsgICAgIC8vIFdoZW4geW91IHBpY2sgYSBjb2xvciwgdXBkYXRlIHRoZSBkaXNwbGF5XG4gICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGVmYXVsdEZpbHRlcnMoKXtcbiAgY3VycmVudENhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbiAgZmlsdGVyUGFnZUNoYW5nZXMoY3VycmVudENhdGVnb3J5KTtcbiAgbGV0IGN1cnJlbnRUaW1lbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxCdG4nKTtcbiAgY3VycmVudFRpbWVsaW5lLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbn07XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1RpbWVsaW5lIGJ1dHRvbnMgZXZlbnQgbGlzdGVuZXJzXG4gIHRvZGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcbiAgICBzZWxlY3RlZEVuZERhdGUgPSB0b2RheTtcbiAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgcmVtb3ZlRmlsdGVycygpO1xuICAgIHRvZGF5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcblxufSk7XG4gIHRoaXNXZWVrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgY29uc3Qgb25lV2Vla0xhdGVyID0gbmV3IERhdGUoKTtcbiAgICAgIG9uZVdlZWtMYXRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDcpO1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gb25lV2Vla0xhdGVyO1xuICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgICAgcmVtb3ZlRmlsdGVycygpO1xuICAgICAgdGhpc1dlZWtCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xuICB0aGlzTW9udGhCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgICBjb25zdCBvbmVNb250aExhdGVyID0gbmV3IERhdGUoKTtcbiAgICAgIG9uZU1vbnRoTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyAzMCk7XG4gICAgICBzZWxlY3RlZEVuZERhdGUgPSBvbmVNb250aExhdGVyO1xuICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgICAgcmVtb3ZlRmlsdGVycygpO1xuICAgICAgdGhpc01vbnRoQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgYWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gbnVsbDtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KVxuICAgICAgcmVtb3ZlRmlsdGVycygpO1xuICAgICAgYWxsQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgYWxsQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG5cbiAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1Jlc2VsZWN0IGNhdGVnb3J5IGJ1dHRvbnMgdG8gcGljayB1cCBhbnkgbmV3bHkgYWRkZWQgb25lICBcbiAgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTsgXG4gIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChjYXRCdG4pID0+IHtcbiAgICBjYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gUmVtb3ZlICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgZnJvbSBhbGwgY2F0ZWdvcnkgYnV0dG9uc1xuICAgICAgICBjYXRlZ29yeUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICAvLyBBZGQgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyB0byB0aGUgY2xpY2tlZCBidXR0b25cbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICBcbiAgICAgICAgLy8gU2V0IHNlbGVjdGVkQ2F0ZWdvcnkgdG8gdGhlIGNsaWNrZWQgYnV0dG9uJ3MgdGV4dCBjb250ZW50XG4gICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gIFxuICAgICAgICAvLyBTZXQgc3R5bGluZyB0byBwYWdlIHRpdGxlXG4gICAgICAgIGZpbHRlclBhZ2VDaGFuZ2VzKHRoaXMpO1xuICAgICAgICAvLyBBcHBseSB0aGUgZmlsdGVyXG4gICAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5LCBjYXRJRCk7XG4gICAgfSk7XG4gIH0pOyBcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGlzcGxheVNldHRpbmdzKCl7XG4gIGNvbGxhcHNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIE5hdiBDb2xsYXBzZSAmIEV4cGFuZFxuICAgICAgY29uc3QgbmF2RGlzcGxheVN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobmF2KS5kaXNwbGF5O1xuICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IGlzU21hbGxTY3JlZW4gPSBzY3JlZW5XaWR0aCA8IDc1MDtcbiAgICBcbiAgICAgIGlmIChpc1NtYWxsU2NyZWVuKSB7XG4gICAgICAgIGlmIChuYXZEaXNwbGF5U3R5bGUgPT09ICdub25lJykge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJzInO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gMyc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTQwcHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kJyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEycHgnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcyLzMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzI0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBzcGFuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgLy8gQ2xvc2VzIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn1cblxuXG5cbiIsImltcG9ydCB7Y2F0ZWdvcnlCdXR0b25zfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IHRhc2tDb3VudGVyIH0gZnJvbSAnLi90YXNrRnVuY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvciwgY2F0SWQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhdElkID0gY2F0SWQgfHwgKytsYXN0Q2F0SWQ7XG4gICAgfVxuICAgIGFkZFRhc2tUb0NhdCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgLy8gU2V0IHRoZSB0YXNrJ3MgSUQgdG8gbWF0Y2ggdGhlIGNvcnJlY3QgY291bnRlciB2YWx1ZVxuICAgICAgICB0YXNrLmlkID0gdGFza0NvdW50ZXI7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgfVxuICAgIHJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCkge1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH1cbn1cblxubGV0IGxhc3RDYXRJZCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnRuID0+IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmNhdElkKSkpO1xubGV0IGRlZmF1bHRDYXRlZ29yaWVzID0gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCk7XG5sZXQgY2F0ZWdvcmllcyA9IFsuLi5kZWZhdWx0Q2F0ZWdvcmllc107IFxuXG4vL0NoZWNrcyBpZiB3ZSBhcmUgZWRkaXRpbmcgb3IgY3JlYXRpbmcgYSBuZXcgY2F0ICBcbmxldCBjdXJyZW50TW9kZSA9IG51bGw7XG5sZXQgY2F0SUQ7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpIHtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllc0RpdiBidXR0b24nKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnV0dG9uID0+IHtcbiAgICAgICAgbGV0IGNhdElkID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuY2F0SWQpOyBcbiAgICAgICAgaWYgKGNhdElkID4gbGFzdENhdElkKSBsYXN0Q2F0SWQgPSBjYXRJZDtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShidXR0b24udGV4dENvbnRlbnQudHJpbSgpLCBudWxsLCBjYXRJZCk7IC8vIFBhc3NpbmcgY2F0SWQgdG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn0gXG5cbmV4cG9ydCB7Y2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlfTsiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5cbmxldCB0YXNrQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdFxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlOyBcbiAgICB9XG4gICAgdG9nZ2xlQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSAhdGhpcy5jb21wbGV0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7dGFza0NvdW50ZXJ9O1xuXG5cbiIsImltcG9ydCB7VGFza30gZnJvbScuL3Rhc2tGdW5jdGlvbnMnO1xuaW1wb3J0IHtDYXRlZ29yeX0gZnJvbScuL2NhdGVnb3J5RnVuY3Rpb25zJztcbmltcG9ydCB7aW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplRGVmYXVsdEZpbHRlcnMsIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMsIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncyB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHtjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCxzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXl9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuLy8gbGV0IHRhc2tDb3VudGVyID0gMDtcblxuaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycygpO1xuaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplRGVmYXVsdEZpbHRlcnMoKTtcbmluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpO1xuaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncygpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIENBVEVHT1JJRVMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIl0sIm5hbWVzIjpbImdldEN1cnJlbnREYXRlIiwidG9kYXkiLCJEYXRlIiwic2V0SG91cnMiLCJpc0RhcmtDb2xvciIsImNvbG9yIiwicmdiIiwic3RhcnRzV2l0aCIsInIiLCJwYXJzZUludCIsInNsaWNlIiwiZyIsImIiLCJNYXRoIiwicm91bmQiLCJmb3JtYXREYXRlRm9ySW5wdXQiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIm9mZnNldCIsImdldFRpbWV6b25lT2Zmc2V0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZmlsdGVyUGFnZUNoYW5nZXMiLCJjYXRlZ29yeUJ1dHRvbiIsImNvbXB1dGVkU3R5bGUiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiYmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsImZvbnRDb2xvciIsInBhZ2VUaXRsZSIsInN0eWxlIiwicmVtb3ZlRmlsdGVycyIsInRoaXNXZWVrQnRuIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGhpc01vbnRoQnRuIiwiYWxsQnRuIiwidG9kYXlCdG4iLCJmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5IiwiZW5kRGF0ZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrQ29udGFpbmVyRGl2IiwidGFzayIsInRhc2tJZCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRhc2tzIiwiZmluZCIsImlkIiwiZ2V0VGFza0J5SWQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YXNldCIsInRhc2tEdWVEYXRlIiwiZHVlRGF0ZSIsInRhc2tDYXRlZ29yeSIsIm5hbWUiLCJkaXNwbGF5IiwidGV4dENvbnRlbnQiLCJjYXRJZCIsImNvbnRlbnQiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJjdXJyZW50Q2F0ZWdvcnkiLCJzZWxlY3RlZEVuZERhdGUiLCJpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMiLCJjYXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiYnV0dG9uIiwidGhpcyIsImFkZCIsIkNhdGVnb3J5IiwiY29uc3RydWN0b3IiLCJsYXN0Q2F0SWQiLCJhZGRUYXNrVG9DYXQiLCJwdXNoIiwidGFza0NvdW50ZXIiLCJyZW1vdmVUYXNrRnJvbUNhdCIsImZpbHRlciIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiY29uc29sZSIsImVycm9yIiwicmVkdWNlIiwiY291bnQiLCJsZW5ndGgiLCJwYXJlbnROb2RlIiwidmFsdWUiLCJkZCIsIm1tIiwieXl5eSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJyZXBvcnRWYWxpZGl0eSIsImNhdGVnb3J5VmFsdWUiLCJpbXBvcnRhbmNlIiwidW5kZWZpbmVkIiwibG9nIiwic3JjIiwiZWRpdFRhc2siLCJuZXdUYXNrIiwiY3JlYXRlRWxlbWVudCIsIm9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nIiwidGFza0JpZ0RpdiIsInRhc2tQcmltIiwiYXBwZW5kQ2hpbGQiLCJjaGVja2JveCIsInR5cGUiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja2VkIiwidGFza1RpdGxlIiwidGFza1ByaW9yaXR5IiwidGFza1NlYyIsInRhc2tQcmlvcml0eUltZyIsImRlbGV0ZUJ0bkJpZ0RpdiIsImxpbmVicmVhayIsImFkZFRhc2tEaXYiLCJhZGRUYXNrIiwiaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycyIsImNhdFRpdGxlIiwiaGV4Q29sb3IiLCJ2YWx1ZXMiLCJtYXRjaCIsInRvU3RyaW5nIiwicmdiVG9IZXgiLCJiYWNrZ3JvdW5kIiwiY2F0Q29sb3IiLCJuZXdDYXRlZ29yeSIsIm5ld0NhdGVnb3J5RWxlbWVudCIsIm5ld0J1dHRvbiIsImlubmVyVGV4dCIsImVkaXRpbmdDYXRlZ29yeSIsImNhdCIsImFzc29jaWF0ZWRCdXR0b24iLCJpbm5lckhUTUwiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJvcHRpb24iLCJ1cGRhdGVDYXRlZ29yeURyb3Bkb3duIiwib3BlbkNhdE1vZGFsRm9yRWRpdGluZyIsImNsaWNrIiwib25lV2Vla0xhdGVyIiwic2V0RGF0ZSIsIm9uZU1vbnRoTGF0ZXIiLCJuYXZEaXNwbGF5U3R5bGUiLCJpbm5lcldpZHRoIiwiekluZGV4IiwiZ3JpZENvbHVtbiIsIm9uY2xpY2siLCJ0YXJnZXQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9