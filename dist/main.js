(()=>{"use strict";function e(){const e=new Date;return e.setHours(0,0,0,0),e}function t(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function n(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function l(e){console.log(e),console.log(e.textContent),pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l,console.log(e.dataset.catId),pageTitle.dataset.catId=e.dataset.catId}function o(){thisWeekBtn.classList.remove("selectedFilter"),thisMonthBtn.classList.remove("selectedFilter"),allBtn.classList.remove("selectedFilter"),todayBtn.classList.remove("selectedFilter")}const s=document.querySelector(".content"),a=document.querySelector("nav"),d=document.querySelector("#modal"),c=document.querySelector("#catModal"),i=document.querySelector(".tasksContainer"),r=document.getElementById("collapseBtn"),u=document.getElementById("createTask"),m=document.getElementById("okTaskBtn"),g=document.getElementById("cancelTaskBtn"),y=document.getElementById("delete"),p=document.getElementById("newCatBtn"),k=document.getElementById("okCatBtn"),v=document.getElementById("cancelCatBtn"),E=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),f=document.getElementById("allBtn"),h=document.getElementById("todayBtn"),C=document.getElementById("thisWeekBtn"),B=document.getElementById("thisMonthBtn"),L=document.getElementById("pageTimeline");let b=document.getElementsByClassName("close")[0],w=document.getElementsByClassName("closeCatModal")[0],x=document.querySelector("form"),T=document.getElementById("pageTitle"),D=document.getElementById("title"),S=document.getElementById("category"),F=document.getElementById("dueDate"),q=document.getElementById("priority"),M=document.getElementById("description"),A=document.querySelectorAll(".catBtns"),N="All Inbox",P=document.getElementById(N),$=null;function H(){A=document.querySelectorAll(".catBtns"),A.forEach((e=>{e.addEventListener("click",(function(){N=this.textContent,Y=parseInt(this.dataset.catId),z(N)}))}))}function z(e){return A.forEach((e=>{e.classList.remove("selectedFilter")})),P=document.getElementById(e),P.classList.add("selectedFilter"),l(P),P}class W{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++_}addTaskToCat(e){this.tasks.push(e),e.id=j,j++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let Y,_=Math.max(...Array.from(A).map((e=>parseInt(e.dataset.catId)))),O=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>_&&(_=t),new W(e.textContent.trim(),null,t)}))}(),R=[...O],V=null,j=0;class G{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return d.style.display="none",void delete D.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete D.dataset.editingTaskId;for(let l of R)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),j--,j=R.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),d.style.display="none",delete D.dataset.editingTaskId}u.addEventListener("click",(function(){D.value="",S.value="All Inbox";let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,F.value=e,q.value="Low",M.value="",d.style.display="block"})),g.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),m.addEventListener("click",(function(t){if(document.querySelector("form").reportValidity()){t.preventDefault(),D.classList.remove("error");let l=document.getElementById("title").value,o=document.getElementById("category").value,s=document.getElementById("category").value,a=R.find((e=>e.name===s)),c=document.getElementById("dueDate").value,r=document.getElementById("priority").value,u=document.getElementById("description").value;D.dataset.editingTaskId?function(e,t,l,o,s){let a,c=D.dataset.editingTaskId;for(let e of R)if(a=e.tasks.find((e=>e.id==c)),a)break;if(void 0===a)return void console.error(`No task found with id ${c}`);a.title=e,a.category=t,a.dueDate=l,a.priority=o,a.description=s,console.log("editing task, title: "+e+" id: "+c);let i=document.getElementById(c);i.querySelector(".taskTitle").textContent=e,i.querySelector(".taskCategory").textContent=`(${t.name})`,i.querySelector(".taskDueDate").textContent=n(l),i.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete D.dataset.editingTaskId,d.style.display="none"}(l,a,c,r,u):function(t,l,o,s,a,c){let r=new G(j,t,o,s,a,c);j++,console.log(o),o.addTaskToCat(r);let u=r.id;const m=document.createElement("div");function g(e){console.log(e),D.value=e.title,S.value=e.category.name,F.value=e.dueDate,q.value=e.priority,M.value=e.description,D.dataset.editingTaskId=e.id,d.style.display="block"}m.classList.add("taskContainerDiv"),function(t,l,o,s,a,d){const c=document.createElement("div");c.classList.add("taskBigDiv");const u=document.createElement("div");u.classList.add("taskDiv"),u.id=t,u.dataset.taskId=t,u.addEventListener("click",(function(){g(r)}));const y=document.createElement("div");y.classList.add("taskPrim"),u.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),I.classList.add("complete"),f.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),I.classList.remove("complete"),f.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const E=document.createElement("div");E.classList.add("taskSec"),u.appendChild(E);const I=document.createElement("div");I.classList.add("taskDueDate"),I.textContent=n(s);const f=document.createElement("div");f.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),f.appendChild(h);const C=document.createElement("img");C.id=t,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),E.appendChild(I),E.appendChild(f),c.appendChild(u),c.appendChild(C);const B=document.createElement("hr");m.appendChild(c),m.appendChild(B),i.appendChild(m)}(u,t,l,s,0,q)}(l,o,a,c,r,u),d.style.display="none"}else D.classList.add("error");N=S.value,z(N),console.log(P),l(P)})),y.addEventListener("click",(function(t){t.stopPropagation();let n=D.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),D.addEventListener("input",(function(){this.classList.remove("error")}))}(),p.addEventListener("click",(function(){V="new",c.style.display="block",catTitle.value="",I.style.backgroundColor="#8a59b9",console.log(I.style.backgroundColor)})),k.addEventListener("click",(function(e){if(e.preventDefault(),"new"===V){let e=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=I.style.backgroundColor,console.log(n);let l=new W(e,n);R.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=e,s.id=e,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,t(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),o.appendChild(s),document.getElementById("categoriesList").appendChild(o),H()}else if("edit"===V){console.log(Y),"number"!=typeof Y&&console.error("catId is not a number at [description of the code location]",Y);let e=R.find((e=>e.catId===Y));if(e){e.name=document.getElementById("catTitle").value,e.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${Y}"]`);n&&(n.innerText=e.name,n.style.backgroundColor=e.color,t(e.color)?(n.style.color="white",T.style.color="white",console.log(T.style.color)):(n.style.color="black",T.style.color="black",console.log(T.style.color)))}else console.error("Could not find category with ID:",Y);T.innerHTML=catTitle.value,console.log(E.value),T.style.backgroundColor=E.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);R.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),c.style.display="none"})),v.addEventListener("click",(function(e){e.preventDefault(),c.style.display="none"})),T.addEventListener("click",(function(){Y=parseInt(this.dataset.catId),V="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,c.style.display="block"}(T)})),I.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);E.value=e,E.click()})),E.addEventListener("input",(function(){I.style.background=E.value})),P.classList.add("selectedFilter"),l(P),document.getElementById("allBtn").classList.add("selectedFilter"),h.addEventListener("click",(function(){const t=e();$=t,o(),h.classList.add("selectedFilter"),L.textContent=this.textContent})),C.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+7),$=n,o(),C.classList.add("selectedFilter"),L.textContent=this.textContent})),B.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+30),$=n,o(),B.classList.add("selectedFilter"),L.textContent=this.textContent})),f.addEventListener("click",(function(){$=null,o(),f.classList.add("selectedFilter"),L.textContent=this.textContent,f.classList.add("selectedFilter")})),H(),r.addEventListener("click",(function(){const e=window.getComputedStyle(a).display;window.innerWidth<750?"none"===e?(a.style.display="block",a.style.zIndex="2",s.style.gridColumn="1 / 3",s.classList.add("overlay"),r.src="./images/collapse3.png"):(a.style.display="none",a.style.zIndex="",s.style.gridColumn="1 / -1",s.classList.remove("overlay"),console.log("expand"),r.src="./images/expand3.png"):"none"===e?(a.style.display="block",a.style.zIndex="",s.style.gridColumn="2/3",s.classList.remove("overlay"),r.src="./images/collapse3.png"):(a.style.display="none",a.style.zIndex="",s.style.gridColumn="1 / -1",s.classList.remove("overlay"),console.log("expand"),r.src="./images/expand3.png")})),b.onclick=function(){d.style.display="none",delete D.dataset.editingTaskId},w.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target==d?d.style.display="none":e.target==c&&(c.style.display="none")},x.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),m.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixXQUFhLE1BQzNCaEosRUFBUUwsVUFBVUMsT0FBTyxXQUN6QlcsRUFBWXVGLElBQU0sMkJBR2xCM0YsRUFBSWIsTUFBTW9GLFFBQVUsT0FDcEJ2RSxFQUFJYixNQUFNeUosT0FBUyxHQUNuQi9JLEVBQVFWLE1BQU0wSixXQUFhLFNBQzNCaEosRUFBUUwsVUFBVUMsT0FBTyxXQUN6QjlCLFFBQVFDLElBQUksVUFDWndDLEVBQVl1RixJQUFNLHVCQUl4QixJQUNGM0UsRUFBSzhILFFBQVUsV0FDWDdJLEVBQU1kLE1BQU1vRixRQUFVLGNBQ2ZwRCxFQUFXL0IsUUFBUW9GLGFBQzlCLEVBQ0F0RCxFQUFhNEgsUUFBVSxXQUNuQjVJLEVBQVNmLE1BQU1vRixRQUFVLE1BQzdCLEVBQ0F6RixPQUFPZ0ssUUFBVSxTQUFTekQsR0FDbEJBLEVBQU0wRCxRQUFVOUksRUFDbEJBLEVBQU1kLE1BQU1vRixRQUFVLE9BQ2RjLEVBQU0wRCxRQUFVN0ksSUFDdEJBLEVBQVNmLE1BQU1vRixRQUFVLE9BRWpDLEVBQ0EsRUFBS3hDLGlCQUFpQixXQUFXLFNBQVNzRCxHQUNwQixVQUFkQSxFQUFNMkQsTUFDTjNELEVBQU1DLGlCQUNOL0UsRUFBVThILFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgbGV0IHJnYjtcbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgbGV0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgbGV0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgbGV0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgcmdiID0geyByLCBnLCBiIH07XG4gIH0gZWxzZSBpZiAoY29sb3Iuc3RhcnRzV2l0aCgncmdiKCcpKSB7XG4gICAgLy8gRXh0cmFjdCBSR0IgdmFsdWVzIGZyb20gYW4gUkdCIHN0cmluZ1xuICAgIGxldCB2YWx1ZXMgPSBjb2xvci5zdWJzdHJpbmcoNCwgY29sb3IubGVuZ3RoIC0gMSkuc3BsaXQoJywnKTtcbiAgICBsZXQgciA9IHBhcnNlSW50KHZhbHVlc1swXSwgMTApO1xuICAgIGxldCBnID0gcGFyc2VJbnQodmFsdWVzWzFdLCAxMCk7XG4gICAgbGV0IGIgPSBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKTtcbiAgICByZ2IgPSB7IHIsIGcsIGIgfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBicmlnaHRuZXNzIG9uIGEgc2NhbGUgZnJvbSAwIHRvIDI1NVxuICBsZXQgYnJpZ2h0bmVzcyA9IE1hdGgucm91bmQoKChyZ2IuciAqIDI5OSkgKyAocmdiLmcgKiA1ODcpICsgKHJnYi5iICogMTE0KSkgLyAxMDAwKTtcbiAgY29uc29sZS5sb2coYnJpZ2h0bmVzcyk7XG4gIHJldHVybiBicmlnaHRuZXNzIDwgMTcwOyAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29sb3IgaXMgZGFya1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JJbnB1dChkYXRlU3RyaW5nKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyAvLyBHZXQgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzXG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG9mZnNldCk7IC8vIEFkanVzdCB0aGUgZGF0ZSBieSB0aGUgdGltZXpvbmUgb2Zmc2V0XG4gIGNvbnN0IG1tID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRkID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCB5eXl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gYCR7bW19LyR7ZGR9LyR7eXl5eX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAvLyBTZXBhcmF0ZSBSR0IgdmFsdWVzXG4gIGxldCB2YWx1ZXMgPSByZ2IubWF0Y2goL15yZ2JcXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspXFwpJC8pO1xuXG4gIC8vIENvbnZlcnQgZWFjaCB2YWx1ZSB0byBoZXhhZGVjaW1hbFxuICBsZXQgaGV4Q29sb3IgPSBcIiNcIiArIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1sxXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzJdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbM10sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIGhleENvbG9yO1xufVxuICAiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JJbnB1dCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IHsgY3VycmVudENhdGVnb3J5IH0gZnJvbSBcIi4vZG9tRWxlbWVudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKXtcbiAgLy9BcHBseSBwYWdlIHRpdGxlIGJhc2VkIG9uIGNhdGVncnlcbiAgY29uc29sZS5sb2coc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2F0ZWdvcnlCdG4udGV4dENvbnRlbnQpO1xuICBwYWdlVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZENhdGVnb3J5QnRuLnRleHRDb250ZW50O1xuXG4gIC8vIENoYW5nZSBwYWdlIHRpdGxlIGFjY29yZGluZyB0byBzZWxlY3RlZCBidXR0b25cbiAgbGV0IHNlbGVjdGVkQ2F0QnRuID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBiZ0NvbG9yID0gc2VsZWN0ZWRDYXRCdG4uYmFja2dyb3VuZENvbG9yO1xuICBsZXQgZm9udENvbG9yID0gc2VsZWN0ZWRDYXRCdG4uY29sb3I7XG4gIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSBmb250Q29sb3I7XG4gIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2F0ZWdvcnlCdG4uZGF0YXNldC5jYXRJZCk7XG4gIHBhZ2VUaXRsZS5kYXRhc2V0LmNhdElkID0gc2VsZWN0ZWRDYXRlZ29yeUJ0bi5kYXRhc2V0LmNhdElkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsdGVycygpe1xuICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdGhpc01vbnRoQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgYWxsQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdG9kYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoZW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSwgY2F0SUQpIHtcbi8vICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRhc2tDb250YWluZXJEaXYgZWxlbWVudHMgYW5kIGNoZWNrIHRoZWlyIHRhc2tzJyBkdWUgZGF0ZXNcbi8vICAgICBjb25zdCBhbGxUYXNrQ29udGFpbmVyRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrQ29udGFpbmVyRGl2Jyk7XG4vLyAgICAgYWxsVGFza0NvbnRhaW5lckRpdnMuZm9yRWFjaCgodGFza0NvbnRhaW5lckRpdikgPT4ge1xuLy8gICAgICAgICBjb25zdCB0YXNrRGl2ID0gdGFza0NvbnRhaW5lckRpdi5xdWVyeVNlbGVjdG9yKCcudGFza0RpdicpOyAvLyBHZXQgdGhlIHRhc2tEaXYgaW5zaWRlIHRoZSBjdXJyZW50IHRhc2tDb250YWluZXJEaXZcbi8vICAgICAgICAgY29uc3QgdGFza0lkID0gdGFza0Rpdi5kYXRhc2V0LnRhc2tJZDtcbi8vICAgICAgICAgY29uc3QgdGFzayA9IGdldFRhc2tCeUlkKHRhc2tJZCk7IC8vIFJldHJpZXZlIHRoZSB0YXNrIG9iamVjdCBieSBJRFxuXG4vLyAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIGVuZERhdGVcbi8vICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBuZXcgRGF0ZShmb3JtYXREYXRlRm9ySW5wdXQodGFzay5kdWVEYXRlKSk7XG4vLyAgICAgICAgIHRhc2tEdWVEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4vLyAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgY2F0ZWdvcnkgbWF0Y2hlcyB0aGUgc2VsZWN0ZWQgY2F0ZWdvcnlcbi8vICAgICAgICAgY29uc3QgdGFza0NhdGVnb3J5ID0gdGFzay5jYXRlZ29yeTtcblxuLy8gICAgICAgICBpZiAoKGVuZERhdGUgPT09IG51bGwgfHwgdGFza0R1ZURhdGUgPD0gZW5kRGF0ZSkgJiYgKHNlbGVjdGVkQ2F0ZWdvcnkgPT09IFwiQWxsIEluYm94XCIgfHwgdGFza0NhdGVnb3J5Lm5hbWUgPT09IHNlbGVjdGVkQ2F0ZWdvcnkpKSB7XG4vLyAgICAgICAgICAgICAvLyBTaG93IHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgZW5kRGF0ZSwgYW5kIGNhdGVnb3J5IG1hdGNoZXNcbi8vICAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICAvLyBIaWRlIHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBvdXRzaWRlIHRoZSByYW5nZSBvciBjYXRlZ29yeSBkb2Vzbid0IG1hdGNoXG4vLyAgICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICBmdW5jdGlvbiBnZXRUYXNrQnlJZCh0YXNrSWQpIHtcbi8vICAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNhdGVnb3J5XG4vLyAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbi8vICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdGFzayBpbiB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheSB3aXRoIHRoZSBtYXRjaGluZyBJRFxuLy8gICAgICAgICAgICAgICBjb25zdCB0YXNrID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuLy8gICAgICAgICAgICAgICBpZiAodGFzaykge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0YXNrOyAvLyBSZXR1cm4gdGhlIHRhc2sgaWYgZm91bmRcbi8vICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIHRhc2sgd2l0aCB0aGUgZ2l2ZW4gSUQgaXMgZm91bmRcbi8vICAgICAgICAgICB9XG4vLyAgICAgfSk7XG5cbi8vICAgICAvL2FwcGx5IHBhZ2UgdGl0bGUgYmFzZWQgb24gY2F0ZWdyeVxuLy8gICAgIHBhZ2VUaXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG4vLyAgICAgcGFnZVRpdGxlLmRhdGFzZXQuY2F0SWQgPSBjYXRJRDtcbi8vICAgfTsiLCJpbXBvcnQgeyBUYXNrLCB0YXNrQ291bnRlciB9IGZyb20gXCIuL3Rhc2tGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnREYXRlLCBmb3JtYXREYXRlRm9ySW5wdXQsIGlzRGFya0NvbG9yLCByZ2JUb0hleCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdXBkYXRlUGFnZVRpdGxlLCByZW1vdmVGaWx0ZXJzLCBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5fSBmcm9tIFwiLi9kaXNwbGF5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBDYXRlZ29yeSwgY2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcblxuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcbmNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ25hdicpO1xuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWwnKTtcbmNvbnN0IGNhdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhdE1vZGFsJyk7XG5jb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrc0NvbnRhaW5lcicpO1xuY29uc3QgY29sbGFwc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sbGFwc2VCdG4nKTtcbmNvbnN0IGNyZWF0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlVGFzaycpO1xuY29uc3Qgb2tUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rVGFza0J0bicpXG5jb25zdCBjYW5jZWxUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbFRhc2tCdG4nKTtcbmNvbnN0IGRlbGV0ZUJ0bk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZScpO1xuY29uc3QgbmV3Q2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld0NhdEJ0bicpO1xuY29uc3Qgb2tDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tDYXRCdG4nKTtcbmNvbnN0IGNhbmNlbENhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxDYXRCdG4nKTtcbmNvbnN0IGluYm94QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FsbCBJbmJveCcpXG5jb25zdCByZXNwb25zaWJpbGl0aWVzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Jlc3BvbnNpYmlsaXRpZXMnKTtcbmNvbnN0IGV2ZW50c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdFdmVudHMgJiBTb2NpYWwnKTtcbmNvbnN0IHByb2dyYW1taW5nQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Byb2dyYW1taW5nIENvdXJzZScpO1xuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKTtcbmNvbnN0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbmNvbnN0IGFsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxCdG4nKTtcbmNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZGF5QnRuJyk7XG5jb25zdCB0aGlzV2Vla0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzV2Vla0J0bicpO1xuY29uc3QgdGhpc01vbnRoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNNb250aEJ0bicpO1xuY29uc3QgcGFnZVRpbWVsaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaW1lbGluZScpO1xubGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5sZXQgc3BhbkNhdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlQ2F0TW9kYWxcIilbMF07XG5sZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbmxldCBwYWdlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJyk7XG5cbmxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKVxubGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKTtcbmxldCBkdWVEYXRlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpO1xubGV0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKTtcbmxldCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKTtcbmxldCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpO1xuXG5sZXQgc2VsZWN0ZWRDYXRlZ29yeSA9ICdBbGwgSW5ib3gnO1xubGV0IHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcbmxldCBzZWxlY3RlZEVuZERhdGUgPSBudWxsO1xuXG5leHBvcnQge1xuICBjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCwgc3BhbkNhdE1vZGFsLHRhc2tzQ29udGFpbmVyLGZvcm0scGFnZVRpdGxlLGNvbGxhcHNlQnRuLGNyZWF0ZVRhc2tCdG4sb2tUYXNrQnRuLGNhbmNlbFRhc2tCdG4sZGVsZXRlQnRuTW9kYWwsbmV3Q2F0QnRuLG9rQ2F0QnRuLGNhbmNlbENhdEJ0bixpbmJveEJ0bixyZXNwb25zaWJpbGl0aWVzQnRuLGV2ZW50c0J0bixwcm9ncmFtbWluZ0J0bix0aXRsZUlucHV0LGNhdGVnb3J5U2VsZWN0LGR1ZURhdGVTZWxlY3QscHJpb3JpdHlTZWxlY3QsZGVzY3JpcHRpb25JbnB1dCxjYXRlZ29yeUJ1dHRvbnMsYWxsQnRuLCB0b2RheUJ0biwgdGhpc1dlZWtCdG4sIHRoaXNNb250aEJ0biwgcGFnZVRpbWVsaW5lLCBjb2xvclBpY2tlciwgY29sb3JEaXNwbGF5ICBcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzKCl7XG4gIGNyZWF0ZVRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgLy8gQnJpbmdzIHVwIG5ldyB0YXNrIG1vZGFsIFxuICAgICAgLy8gU2V0IGRlZmF1bHQgaW5wdXRzXG4gICAgICB0aXRsZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gXCJBbGwgSW5ib3hcIjtcbiAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgZGQgPSBTdHJpbmcodG9kYXkuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgbGV0IG1tID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgbGV0IHl5eXkgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICAgICAgXG4gICAgICAvLyBGb3JtYXQgdGhlIGRhdGUgYXMgXCJtbS1kZC15eXl5XCJcbiAgICAgIHRvZGF5ID0geXl5eSArICctJyArIG1tICsgJy0nICsgZGQ7XG4gICAgICBkdWVEYXRlU2VsZWN0LnZhbHVlID0gdG9kYXlcbiAgICAgIFxuICAgICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSBcIkxvd1wiO1xuICAgICAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IFwiXCI7XG4gIFxuICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIH0pO1xuICBcbiAgY2FuY2VsVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gc3VibWl0dGluZ1xuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9KTtcblxuICBva1Rhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgeyAvL0NhbGxzIGFkZFRhc2sgb3IgZWRpdFRhc2tcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpLnJlcG9ydFZhbGlkaXR5KCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBc3NpZ24gcHJvcGVydHkgdmFsdWVzIGJhc2VkIG9mZiBpbnB1dHNcbiAgICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeU9iamVjdCA9IGNhdGVnb3JpZXMuZmluZChjYXRlZ29yeSA9PiBjYXRlZ29yeS5uYW1lID09PSBjYXRlZ29yeVZhbHVlKTtcbiAgICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgaW1wb3J0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS52YWx1ZTtcbiAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGNyZWF0aW5nIGEgbmV3IHRhc2sgb3IgdXBkYXRpbmcgYW4gZXhpc3Rpbmcgb25lXG4gICAgICAgICAgaWYgKHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkKSB7XG4gICAgICAgICAgICAgIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG4gICAgICAgIH0gZWxzZSB7IHRpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTsgfVxuICAgICAgXG4gICAgZnVuY3Rpb24gYWRkVGFzayh0aXRsZSwgY2F0ZWdvcnksIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbil7XG4gICAgICAgIC8vIENyZWF0ZSBUYXNrIE9iamVjdCBcbiAgICAgICAgbGV0IG5ld1Rhc2sgPSBuZXcgVGFzayh0YXNrQ291bnRlciwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbik7XG4gICAgXG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5T2JqZWN0KTtcbiAgICAgICAgY2F0ZWdvcnlPYmplY3QuYWRkVGFza1RvQ2F0KG5ld1Rhc2spO1xuICAgICAgICBsZXQgdGFza0lkID0gbmV3VGFzay5pZFxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGFpbmVyIGRpdiBmb3IgdGhlIHRhc2sgYW5kIHRoZSBsaW5lIGJyZWFrXG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0NvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQ29udGFpbmVyRGl2Jyk7XG4gICAgXG4gICAgICAgIC8vIEFkZCBUYXNrIERpdlxuICAgICAgICBmdW5jdGlvbiBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3Qpe1xuICAgICAgICAgICAgY29uc3QgdGFza0JpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFza0JpZ0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQmlnRGl2Jyk7XG4gICAgICAgICAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICB0YXNrRGl2LmRhdGFzZXQudGFza0lkID0gdGFza0lkO1xuICAgIFxuICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKG5ld1Rhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0YXNrUHJpbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tQcmltLmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmltJyk7XG4gICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tQcmltKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDYXRlZ29yeScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkudGV4dENvbnRlbnQgPSBcIihcIiArIGNhdGVnb3J5ICsgXCIpXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1ByaW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO3Rhc2tQcmltLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza0NhdGVnb3J5KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhc2tTZWMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmNsYXNzTGlzdC5hZGQoJ3Rhc2tTZWMnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1NlYyk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgndGFza0R1ZURhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlRm9ySW5wdXQoZHVlRGF0ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaGVzdFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTMzMy5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTIyMi5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2Uge3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIn1cbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5SW1nLmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5SW1nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG5CaWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmlkID0gdGFza0lkO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuc3JjID0gXCIuL2ltYWdlcy9kZWxldGUucG5nXCI7IC8vIENoYW5nZSB0byB5b3VyIGRlbGV0ZSBpbWFnZSdzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgIFxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tJZCA9IGRlbGV0ZUJ0bkJpZ0Rpdi5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXNrSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSBkZWxldGVUYXNrKHRhc2tJZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZSk7IHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO3Rhc2tCaWdEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuQmlnRGl2KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxpbmVicmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XG4gICAgXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRhc2tCaWdEaXYpO3Rhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobGluZWJyZWFrKTt0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrQ29udGFpbmVyRGl2KTsgICAgXG4gICAgICAgIH0gYWRkVGFza0Rpdih0YXNrSWQsIHRpdGxlLCBjYXRlZ29yeSwgZHVlRGF0ZSwgdGFza0NvdW50ZXIsIHByaW9yaXR5U2VsZWN0KTtcbiAgICAgICAgXG4gICAgICAgIC8vSGVscGVyIEZ1bmN0aW9uXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgIFxuICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgXG4gICAgc2VsZWN0ZWRDYXRlZ29yeSA9IGNhdGVnb3J5U2VsZWN0LnZhbHVlO1xuICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcblxuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIC8vIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIH0pO1xuXG4gIGRlbGV0ZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICBcbiAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGVUYXNrKHRhc2tJZCk7XG4gIH0pOyAgLy8gKGluc2lkZSBtb2RhbCkuIE91dHNpZGUgbW9kYWwgZXYgbGlzdGVuZXIgaXMgaW5zaWRlIGFkZFRhc2tEaXYgZXZsaXN0ZW5lciAnRGVsZXRlQnRuQmlnRGl2J1xuICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVycm9yIGNsYXNzIHdoZW4gdGhlIHRpdGxlIGlucHV0IHZhbHVlIGNoYW5nZXNcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrPycpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FuY2VscywganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICBpZiAoIXRhc2tEaXYpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGRpdiBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgdGFzayBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIHRhc2tJZFxuICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICBsZXQgdGFza0NhdGVnb3J5O1xuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgaWYgKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgdGFza0NhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBSZW1vdmUgdGhlIHRhc2sgZnJvbSB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheVxuICAgICAgdGFza0NhdGVnb3J5LnJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCk7XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXItLTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlciA9IGNhdGVnb3JpZXMucmVkdWNlKChjb3VudCwgY2F0ZWdvcnkpID0+IGNvdW50ICsgY2F0ZWdvcnkudGFza3MubGVuZ3RoLCAwKTtcbiAgXG4gICAgICAvLyBEZWxldGUgdGhlIHRhc2tDb250YWluZXJEaXZcbiAgICAgIGxldCB0YXNrQ29udGFpbmVyRGl2ID0gdGFza0Rpdi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICB0YXNrQ29udGFpbmVyRGl2LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGFza0NvbnRhaW5lckRpdlxuICBcbiAgICAgIC8vIEhpZGUgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgICAgLy8gQ2xlYXIgdGhlIGVkaXRpbmdUYXNrSWQgc2luY2Ugd2UndmUganVzdCBkZWxldGVkIHRoZSB0YXNrXG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGNhdFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzhhNTliOSc7XG4gICAgICBjb25zb2xlLmxvZyhjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcblxuICAgfSk7XG4gICBva0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcblxuICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ25ldycpIHtcblxuICAgICAgICAgICAvLyBHZXQgdGhlIGNhdGVnb3J5IG5hbWUgYW5kIGNvbG9yIGZyb20gdGhlIGZvcm0gaW5wdXRzXG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICBsZXQgY2F0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcblxuICAgICAgICAgICAvL1NldCBkZWZhdWx0IGNhdCBjb2xvciBwaWNrZXJcbiAgICAgICAgICAgY2F0Q29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGNhdGVnb3J5IGluc3RhbmNlXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeSA9IG5ldyBDYXRlZ29yeShjYXRUaXRsZSwgY2F0Q29sb3IpO1xuICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2gobmV3Q2F0ZWdvcnkpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsaXN0IGl0ZW1cbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlubmVyVGV4dCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uaWQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhdEJ0bnMnKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNhdENvbG9yO1xuICAgICAgICAgICBuZXdCdXR0b24uZGF0YXNldC5jYXRJZCA9IG5ld0NhdGVnb3J5LmNhdElkO1xuICAgXG4gICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihjYXRDb2xvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXJrJyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpZ2h0Jyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICBuZXdDYXRlZ29yeUVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3JpZXNMaXN0JykuYXBwZW5kQ2hpbGQobmV3Q2F0ZWdvcnlFbGVtZW50KTtcbiAgICAgICAgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG4gICAgICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgIC8vUmV0cmlldmUgdGhlIGNhdGVnb3J5IGZyb20gdGhlIGNhdGVnb3JpZXMgYXJyYXkgYmFzZWQgb24gdGhlIGNhdElEXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdElEKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBjYXRJRCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2F0SWQgaXMgbm90IGEgbnVtYmVyIGF0IFtkZXNjcmlwdGlvbiBvZiB0aGUgY29kZSBsb2NhdGlvbl0nLCBjYXRJRCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgbGV0IGVkaXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChjYXQgPT4gY2F0LmNhdElkID09PSBjYXRJRCk7XG4gICAgICAgXG4gICAgICAgICAgIC8vVXBkYXRlIHRoZSBjYXRlZ29yeSB2YWx1ZXNcbiAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5Lm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5jb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgICAgIFxuICAgICAgICAgICAgICAgLy9VcGRhdGUgdGhlIFVJIGVsZW1lbnQgKGJ1dHRvbiBpbiB0aGlzIGNhc2UpIHJlcHJlc2VudGluZyB0aGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgIGxldCBhc3NvY2lhdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW2RhdGEtY2F0LWlkPVwiJHtjYXRJRH1cIl1gKTtcbiAgICAgICAgICAgICAgIGlmIChhc3NvY2lhdGVkQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5pbm5lclRleHQgPSBlZGl0aW5nQ2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVkaXRpbmdDYXRlZ29yeS5jb2xvcjtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGNvbG9yIGJyaWdodG5lc3MgdG8gYWRqdXN0IHRleHQgY29sb3IgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGVkaXRpbmdDYXRlZ29yeS5jb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvL1VwZGF0ZSBwYWdlIHRpdGxlXG4gICAgICAgICAgIHBhZ2VUaXRsZS5pbm5lckhUTUwgPSBjYXRUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgY29uc29sZS5sb2coY29sb3JQaWNrZXIudmFsdWUpO1xuICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgICAgfVxuICAgICAgIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKTtcbiAgIFxuICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgIFxuICAgICAgIC8vIEhlbHBlciBGdW5jdGlvblxuICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKSB7XG4gICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBvcHRpb25zXG4gICAgICAgICAgIGxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpO1xuICAgICAgICAgICB3aGlsZSAoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QucmVtb3ZlQ2hpbGQoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLy8gQWRkIG5ldyBvcHRpb25zIGJhc2VkIG9uIHRoZSBjYXRlZ29yaWVzIGFycmF5XG4gICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgICAgIH0pO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY2FuY2VsQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgICAgXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgY3VycmVudE1vZGUgPSAnZWRpdCc7XG4gICAgICAgb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKTtcbiAgICAgICBmdW5jdGlvbiBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpe1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKTtcbiAgICAgICAgICAgbGV0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbiAgICAgICBcbiAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICBjYXRUaXRsZS52YWx1ZSA9IHBhZ2VUaXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY29sb3JEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBoZXhDb2xvciA9IHJnYlRvSGV4KHJnYkNvbG9yKTtcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9IGhleENvbG9yO1xuICAgIGNvbG9yUGlja2VyLmNsaWNrKCk7XG4gICAgICBcbiAgICB9KTtcbiAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7ICAgICAvLyBXaGVuIHlvdSBwaWNrIGEgY29sb3IsIHVwZGF0ZSB0aGUgZGlzcGxheVxuICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRGaWx0ZXJzKCl7XG4gIHNlbGVjdGVkQ2F0ZWdvcnlCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKVxuICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBjdXJyZW50VGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG4gIGN1cnJlbnRUaW1lbGluZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgc2VsZWN0ZWRFbmREYXRlID0gdG9kYXk7XG4gICAgLy8gZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICB0b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAvLyAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gb25lTW9udGhMYXRlcjtcbiAgICAvLyAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG51bGw7XG4gICAgLy8gICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSlcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCl7XG4gIC8vUmVzZWxlY3QgY2F0ZWdvcnkgYnV0dG9ucyB0byBwaWNrIHVwIGFueSBuZXdseSBhZGRlZCBvbmUgIFxuICBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpOyBcbiAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGNhdEJ0bikgPT4ge1xuICAgIGNhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTZXQgc2VsZWN0ZWRDYXRlZ29yeSB0byB0aGUgY2xpY2tlZCBidXR0b24ncyB0ZXh0IGNvbnRlbnRcbiAgICAgICAgc2VsZWN0ZWRDYXRlZ29yeSA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICAgc2VsZWN0Q2F0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgICAgICAvLyBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSwgY2F0SUQpO1xuICAgIH0pO1xuICB9KTsgXG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncygpe1xuICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBOYXYgQ29sbGFwc2UgJiBFeHBhbmRcbiAgICAgIGNvbnN0IG5hdkRpc3BsYXlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdikuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gc2NyZWVuV2lkdGggPCA3NTA7XG4gICAgXG4gICAgICBpZiAoaXNTbWFsbFNjcmVlbikge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIDMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMi8zJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcyNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyB0YXNrIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn07XG5cbmZ1bmN0aW9uIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KXtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCBjYXRlZ29yeSBidXR0b25zXG4gICAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcbiAgICAvLyBHZXQgYW5kIGFkZCAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIHRvIHRoZSBjbGlja2VkIGJ1dHRvblxuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcbiAgICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuXG4gICAgcmV0dXJuIHNlbGVjdGVkQ2F0ZWdvcnlCdG47XG59XG5cbmZ1bmN0aW9uIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRFbmREYXRlKXtcblxufSIsImltcG9ydCB7Y2F0ZWdvcnlCdXR0b25zfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IHRhc2tDb3VudGVyIH0gZnJvbSAnLi90YXNrRnVuY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvciwgY2F0SWQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhdElkID0gY2F0SWQgfHwgKytsYXN0Q2F0SWQ7XG4gICAgfVxuICAgIGFkZFRhc2tUb0NhdCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgLy8gU2V0IHRoZSB0YXNrJ3MgSUQgdG8gbWF0Y2ggdGhlIGNvcnJlY3QgY291bnRlciB2YWx1ZVxuICAgICAgICB0YXNrLmlkID0gdGFza0NvdW50ZXI7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgfVxuICAgIHJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCkge1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH1cbn1cblxubGV0IGxhc3RDYXRJZCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnRuID0+IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmNhdElkKSkpO1xubGV0IGRlZmF1bHRDYXRlZ29yaWVzID0gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCk7XG5sZXQgY2F0ZWdvcmllcyA9IFsuLi5kZWZhdWx0Q2F0ZWdvcmllc107IFxuXG4vL0NoZWNrcyBpZiB3ZSBhcmUgZWRkaXRpbmcgb3IgY3JlYXRpbmcgYSBuZXcgY2F0ICBcbmxldCBjdXJyZW50TW9kZSA9IG51bGw7XG5sZXQgY2F0SUQ7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpIHtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllc0RpdiBidXR0b24nKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnV0dG9uID0+IHtcbiAgICAgICAgbGV0IGNhdElkID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuY2F0SWQpOyBcbiAgICAgICAgaWYgKGNhdElkID4gbGFzdENhdElkKSBsYXN0Q2F0SWQgPSBjYXRJZDtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShidXR0b24udGV4dENvbnRlbnQudHJpbSgpLCBudWxsLCBjYXRJZCk7IC8vIFBhc3NpbmcgY2F0SWQgdG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn0gXG5cbmV4cG9ydCB7Y2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlfTsiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5cbmxldCB0YXNrQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdFxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlOyBcbiAgICB9XG4gICAgdG9nZ2xlQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSAhdGhpcy5jb21wbGV0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7dGFza0NvdW50ZXJ9O1xuXG5cbiIsImltcG9ydCB7VGFza30gZnJvbScuL3Rhc2tGdW5jdGlvbnMnO1xuaW1wb3J0IHtDYXRlZ29yeX0gZnJvbScuL2NhdGVnb3J5RnVuY3Rpb25zJztcbmltcG9ydCB7aW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplRGVmYXVsdEZpbHRlcnMsIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMsIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncyB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHtjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCxzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXl9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG5pbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpO1xuaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycygpO1xuaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplRGlzcGxheVNldHRpbmdzKCk7XG5cbiJdLCJuYW1lcyI6WyJnZXRDdXJyZW50RGF0ZSIsInRvZGF5IiwiRGF0ZSIsInNldEhvdXJzIiwiaXNEYXJrQ29sb3IiLCJjb2xvciIsInJnYiIsInN0YXJ0c1dpdGgiLCJyIiwicGFyc2VJbnQiLCJzbGljZSIsImciLCJiIiwidmFsdWVzIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwic3BsaXQiLCJicmlnaHRuZXNzIiwiTWF0aCIsInJvdW5kIiwiY29uc29sZSIsImxvZyIsImZvcm1hdERhdGVGb3JJbnB1dCIsImRhdGVTdHJpbmciLCJkYXRlIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJ1cGRhdGVQYWdlVGl0bGUiLCJzZWxlY3RlZENhdGVnb3J5QnRuIiwidGV4dENvbnRlbnQiLCJwYWdlVGl0bGUiLCJzZWxlY3RlZENhdEJ0biIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJiZ0NvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZm9udENvbG9yIiwic3R5bGUiLCJkYXRhc2V0IiwiY2F0SWQiLCJyZW1vdmVGaWx0ZXJzIiwidGhpc1dlZWtCdG4iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0aGlzTW9udGhCdG4iLCJhbGxCdG4iLCJ0b2RheUJ0biIsImNvbnRlbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VsZWN0ZWRDYXRlZ29yeSIsInNlbGVjdGVkRW5kRGF0ZSIsImluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycyIsImZvckVhY2giLCJjYXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwidGhpcyIsImNhdElEIiwic2VsZWN0Q2F0RmlsdGVyIiwiYnV0dG9uIiwiYWRkIiwiQ2F0ZWdvcnkiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJ0YXNrcyIsImxhc3RDYXRJZCIsImFkZFRhc2tUb0NhdCIsInRhc2siLCJwdXNoIiwiaWQiLCJ0YXNrQ291bnRlciIsInJlbW92ZVRhc2tGcm9tQ2F0IiwidGFza0lkIiwiZmlsdGVyIiwibWF4IiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiYnRuIiwiZGVmYXVsdENhdGVnb3JpZXMiLCJ0cmltIiwiaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzIiwiY2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZGlzcGxheSIsImVkaXRpbmdUYXNrSWQiLCJ0YXNrT2JqZWN0IiwidGFza0NhdGVnb3J5IiwidGFza0RpdiIsImVycm9yIiwiZmluZCIsInJlZHVjZSIsImNvdW50IiwicGFyZW50Tm9kZSIsInZhbHVlIiwiZGQiLCJtbSIsInl5eXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwb3J0VmFsaWRpdHkiLCJjYXRlZ29yeVZhbHVlIiwiaW1wb3J0YW5jZSIsInVuZGVmaW5lZCIsInNyYyIsImVkaXRUYXNrIiwibmV3VGFzayIsInRhc2tDb250YWluZXJEaXYiLCJjcmVhdGVFbGVtZW50Iiwib3BlblRhc2tNb2RhbEZvckVkaXRpbmciLCJ0YXNrQmlnRGl2IiwidGFza1ByaW0iLCJhcHBlbmRDaGlsZCIsImNoZWNrYm94IiwidHlwZSIsInN0b3BQcm9wYWdhdGlvbiIsImNoZWNrZWQiLCJ0YXNrVGl0bGUiLCJ0YXNrRHVlRGF0ZSIsInRhc2tQcmlvcml0eSIsInRhc2tTZWMiLCJ0YXNrUHJpb3JpdHlJbWciLCJkZWxldGVCdG5CaWdEaXYiLCJsaW5lYnJlYWsiLCJhZGRUYXNrRGl2IiwiYWRkVGFzayIsImluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMiLCJjYXRUaXRsZSIsImNhdENvbG9yIiwibmV3Q2F0ZWdvcnkiLCJuZXdDYXRlZ29yeUVsZW1lbnQiLCJuZXdCdXR0b24iLCJpbm5lclRleHQiLCJlZGl0aW5nQ2F0ZWdvcnkiLCJjYXQiLCJhc3NvY2lhdGVkQnV0dG9uIiwiaW5uZXJIVE1MIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwib3B0aW9uIiwidXBkYXRlQ2F0ZWdvcnlEcm9wZG93biIsIm9wZW5DYXRNb2RhbEZvckVkaXRpbmciLCJoZXhDb2xvciIsIm1hdGNoIiwidG9TdHJpbmciLCJyZ2JUb0hleCIsImNsaWNrIiwiYmFja2dyb3VuZCIsIm9uZVdlZWtMYXRlciIsInNldERhdGUiLCJvbmVNb250aExhdGVyIiwibmF2RGlzcGxheVN0eWxlIiwiaW5uZXJXaWR0aCIsInpJbmRleCIsImdyaWRDb2x1bW4iLCJvbmNsaWNrIiwidGFyZ2V0Iiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==