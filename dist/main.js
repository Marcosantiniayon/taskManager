(()=>{"use strict";function e(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function t(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function n(e){pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l,pageTitle.dataset.catId=e.dataset.catId}function l(e,n){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of j){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(t(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==n&&a.name!==n?l.style.display="none":l.style.display="block"}))}const o=document.querySelector(".content"),s=document.querySelector("nav"),a=document.querySelector("#modal"),d=document.querySelector("#catModal"),i=document.querySelector(".tasksContainer"),c=document.getElementById("collapseBtn"),r=document.getElementById("createTask"),u=document.getElementById("okTaskBtn"),m=document.getElementById("cancelTaskBtn"),g=document.getElementById("delete"),y=document.getElementById("newCatBtn"),p=document.getElementById("okCatBtn"),k=document.getElementById("cancelCatBtn"),v=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),f=document.getElementById("colorDisplay"),E=document.getElementById("allBtn"),I=document.getElementById("todayBtn"),h=document.getElementById("thisWeekBtn"),C=document.getElementById("thisMonthBtn"),B=document.getElementById("pageTimeline");let L=document.getElementsByClassName("close")[0],b=document.getElementsByClassName("closeCatModal")[0],D=document.querySelector("form"),w=document.getElementById("pageTitle"),x=document.getElementById("title"),T=document.getElementById("category"),S=document.getElementById("dueDate"),q=document.getElementById("priority"),M=document.getElementById("description"),A=document.querySelectorAll(".catBtns"),F=document.querySelectorAll(".timelineBtns"),N="All Inbox",P=document.getElementById(N),$=null,H=document.getElementById("allBtn");const z=function(){const e=new Date;return e.setHours(0,0,0,0),e}();function W(e){return A.forEach((e=>{e.classList.remove("selectedFilter")})),P=document.getElementById(e),P.classList.add("selectedFilter"),n(P),l($,e),P}function Y(e,t){return console.log(t),F.forEach((e=>{e.classList.remove("selectedFilter")})),n(P),l(e,N),t.classList.add("selectedFilter"),t}class _{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++R}addTaskToCat(e){this.tasks.push(e),e.id=J,J++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let O,R=Math.max(...Array.from(A).map((e=>parseInt(e.dataset.catId)))),V=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>R&&(R=t),new _(e.textContent.trim(),null,t)}))}(),j=[...V],G=null,J=0;class K{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return a.style.display="none",void delete x.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete x.dataset.editingTaskId;for(let l of j)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),J--,J=j.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),a.style.display="none",delete x.dataset.editingTaskId}r.addEventListener("click",(function(){x.value="",T.value=N;let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,S.value=e,q.value="Low",M.value="",a.style.display="block"})),m.addEventListener("click",(function(e){e.preventDefault(),a.style.display="none"})),u.addEventListener("click",(function(l){if(document.querySelector("form").reportValidity()){l.preventDefault(),x.classList.remove("error");let n=document.getElementById("title").value,o=document.getElementById("category").value,s=document.getElementById("category").value,d=j.find((e=>e.name===s)),c=document.getElementById("dueDate").value,r=document.getElementById("priority").value,u=document.getElementById("description").value;x.dataset.editingTaskId?function(e,n,l,o,s){let d,i=x.dataset.editingTaskId;for(let e of j)if(d=e.tasks.find((e=>e.id==i)),d)break;if(void 0===d)return void console.error(`No task found with id ${i}`);d.title=e,d.category=n,d.dueDate=l,d.priority=o,d.description=s,console.log("editing task, title: "+e+" id: "+i);let c=document.getElementById(i);c.querySelector(".taskTitle").textContent=e,c.querySelector(".taskCategory").textContent=`(${n.name})`,c.querySelector(".taskDueDate").textContent=t(l),c.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete x.dataset.editingTaskId,a.style.display="none"}(n,d,c,r,u):function(n,l,o,s,d,c){let r=new K(J,n,o,s,d,c);J++,o.addTaskToCat(r);let u=r.id;const m=document.createElement("div");function g(e){console.log(e),x.value=e.title,T.value=e.category.name,S.value=e.dueDate,q.value=e.priority,M.value=e.description,x.dataset.editingTaskId=e.id,a.style.display="block"}m.classList.add("taskContainerDiv"),function(n,l,o,s,a,d){const c=document.createElement("div");c.classList.add("taskBigDiv");const u=document.createElement("div");u.classList.add("taskDiv"),u.id=n,u.dataset.taskId=n,u.addEventListener("click",(function(){g(r)}));const y=document.createElement("div");y.classList.add("taskPrim"),u.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),E.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),E.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const f=document.createElement("div");f.classList.add("taskSec"),u.appendChild(f);const E=document.createElement("div");E.classList.add("taskDueDate"),E.textContent=t(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=n,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),f.appendChild(E),f.appendChild(I),c.appendChild(u),c.appendChild(C);const B=document.createElement("hr");m.appendChild(c),m.appendChild(B),i.appendChild(m)}(u,n,l,s,0,q)}(n,o,d,c,r,u),a.style.display="none"}else x.classList.add("error");$=null,H=E,Y($,H),N=T.value,W(N),n(P)})),g.addEventListener("click",(function(t){t.stopPropagation();let n=x.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),x.addEventListener("input",(function(){this.classList.remove("error")}))}(),y.addEventListener("click",(function(){G="new",d.style.display="block",catTitle.value="",f.style.backgroundColor="#8a59b9",console.log(f.style.backgroundColor)})),p.addEventListener("click",(function(t){if(t.preventDefault(),"new"===G){let t=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=f.style.backgroundColor,console.log(n);let l=new _(t,n);j.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=t,s.id=t,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,e(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),o.appendChild(s),document.getElementById("categoriesList").appendChild(o),initializeCatFilterEvListeners()}else if("edit"===G){console.log(O),"number"!=typeof O&&console.error("catId is not a number at [description of the code location]",O);let t=j.find((e=>e.catId===O));if(t){t.name=document.getElementById("catTitle").value,t.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${O}"]`);n&&(n.innerText=t.name,n.style.backgroundColor=t.color,e(t.color)?(n.style.color="white",w.style.color="white",console.log(w.style.color)):(n.style.color="black",w.style.color="black",console.log(w.style.color)))}else console.error("Could not find category with ID:",O);w.innerHTML=catTitle.value,console.log(v.value),w.style.backgroundColor=v.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);j.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),d.style.display="none"})),k.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),w.addEventListener("click",(function(){O=parseInt(this.dataset.catId),G="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,d.style.display="block"}(w)})),f.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(f.style.backgroundColor);v.value=e,v.click()})),v.addEventListener("input",(function(){f.style.background=v.value})),P.classList.add("selectedFilter"),H.classList.add("selectedFilter"),n(P),l($,N),I.addEventListener("click",(function(){$=z,H=I,Y($,H),B.textContent=this.textContent})),h.addEventListener("click",(function(){const e=new Date;e.setDate(z.getDate()+7),$=e,H=h,Y($,H),B.textContent=this.textContent})),C.addEventListener("click",(function(){const e=new Date;e.setDate(z.getDate()+30),$=e,H=C,Y($,H),B.textContent=this.textContent})),E.addEventListener("click",(function(){$=null,H=E,Y($,H),B.textContent=this.textContent})),A=document.querySelectorAll(".catBtns"),A.forEach((e=>{e.addEventListener("click",(function(){N=this.textContent,O=parseInt(this.dataset.catId),W(N)}))})),c.addEventListener("click",(function(){const e=window.getComputedStyle(s).display;window.innerWidth<750?"none"===e?(s.style.display="block",s.style.zIndex="2",o.style.gridColumn="1 / 3",o.classList.add("overlay"),c.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),c.src="./images/expand3.png"):"none"===e?(s.style.display="block",s.style.zIndex="",o.style.gridColumn="2/3",o.classList.remove("overlay"),c.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),c.src="./images/expand3.png")})),L.onclick=function(){a.style.display="none",delete x.dataset.editingTaskId},b.onclick=function(){d.style.display="none"},window.onclick=function(e){e.target==a?a.style.display="none":e.target==d&&(d.style.display="none")},D.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),u.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5QixFQUNBN0MsRUFBYWtILFFBQVUsV0FDbkJ0SSxFQUFTNUIsTUFBTXdCLFFBQVUsTUFDN0IsRUFDQTdCLE9BQU91SyxRQUFVLFNBQVN6RCxHQUNsQkEsRUFBTTBELFFBQVV4SSxFQUNsQkEsRUFBTTNCLE1BQU13QixRQUFVLE9BQ2RpRixFQUFNMEQsUUFBVXZJLElBQ3RCQSxFQUFTNUIsTUFBTXdCLFFBQVUsT0FFakMsRUFDQSxFQUFLNEUsaUJBQWlCLFdBQVcsU0FBU0ssR0FDcEIsVUFBZEEsRUFBTTJELE1BQ04zRCxFQUFNQyxpQkFDTnpFLEVBQVV1SCxRQUVsQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvaGVscGVyRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2Rpc3BsYXlGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZG9tRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvY2F0ZWdvcnlGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvdGFza0Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9pbmRleDMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCl7IFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTsgLy8gU2V0IGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIHRvIDAgdG8gY29tcGFyZSBvbmx5IHRoZSBkYXRlc1xuICAgIHJldHVybiB0b2RheTtcbiAgfVxuZXhwb3J0IGZ1bmN0aW9uIGlzRGFya0NvbG9yKGNvbG9yKSB7XG4gIGxldCByZ2I7XG4gIGlmIChjb2xvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgIGxldCByID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMSwgMyksIDE2KTtcbiAgICAgIGxldCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgIGxldCBiID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgIHJnYiA9IHsgciwgZywgYiB9O1xuICB9IGVsc2UgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJ3JnYignKSkge1xuICAgIC8vIEV4dHJhY3QgUkdCIHZhbHVlcyBmcm9tIGFuIFJHQiBzdHJpbmdcbiAgICBsZXQgdmFsdWVzID0gY29sb3Iuc3Vic3RyaW5nKDQsIGNvbG9yLmxlbmd0aCAtIDEpLnNwbGl0KCcsJyk7XG4gICAgbGV0IHIgPSBwYXJzZUludCh2YWx1ZXNbMF0sIDEwKTtcbiAgICBsZXQgZyA9IHBhcnNlSW50KHZhbHVlc1sxXSwgMTApO1xuICAgIGxldCBiID0gcGFyc2VJbnQodmFsdWVzWzJdLCAxMCk7XG4gICAgcmdiID0geyByLCBnLCBiIH07XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgYnJpZ2h0bmVzcyBvbiBhIHNjYWxlIGZyb20gMCB0byAyNTVcbiAgbGV0IGJyaWdodG5lc3MgPSBNYXRoLnJvdW5kKCgocmdiLnIgKiAyOTkpICsgKHJnYi5nICogNTg3KSArIChyZ2IuYiAqIDExNCkpIC8gMTAwMCk7XG4gIGNvbnNvbGUubG9nKGJyaWdodG5lc3MpO1xuICByZXR1cm4gYnJpZ2h0bmVzcyA8IDE3MDsgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGNvbG9yIGlzIGRhcmtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlRm9ySW5wdXQoZGF0ZVN0cmluZykge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gIGNvbnN0IG9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsgLy8gR2V0IHRoZSB0aW1lem9uZSBvZmZzZXQgaW4gbWludXRlc1xuICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBvZmZzZXQpOyAvLyBBZGp1c3QgdGhlIGRhdGUgYnkgdGhlIHRpbWV6b25lIG9mZnNldFxuICBjb25zdCBtbSA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBkZCA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgeXl5eSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGAke21tfS8ke2RkfS8ke3l5eXl9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgLy8gU2VwYXJhdGUgUkdCIHZhbHVlc1xuICBsZXQgdmFsdWVzID0gcmdiLm1hdGNoKC9ecmdiXFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKVxcKSQvKTtcblxuICAvLyBDb252ZXJ0IGVhY2ggdmFsdWUgdG8gaGV4YWRlY2ltYWxcbiAgbGV0IGhleENvbG9yID0gXCIjXCIgKyAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMV0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1syXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzNdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gIHJldHVybiBoZXhDb2xvcjtcbn1cbiAgIiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9ySW5wdXQgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbi8vIGltcG9ydCB7IGN1cnJlbnRDYXRlZ29yeSB9IGZyb20gXCIuL2RvbUVsZW1lbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bil7XG4gIC8vQXBwbHkgcGFnZSB0aXRsZSBiYXNlZCBvbiBjYXRlZ3J5XG4gIHBhZ2VUaXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdGVkQ2F0ZWdvcnlCdG4udGV4dENvbnRlbnQ7XG5cbiAgLy8gQ2hhbmdlIHBhZ2UgdGl0bGUgYWNjb3JkaW5nIHRvIHNlbGVjdGVkIGJ1dHRvblxuICBsZXQgc2VsZWN0ZWRDYXRCdG4gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgbGV0IGJnQ29sb3IgPSBzZWxlY3RlZENhdEJ0bi5iYWNrZ3JvdW5kQ29sb3I7XG4gIGxldCBmb250Q29sb3IgPSBzZWxlY3RlZENhdEJ0bi5jb2xvcjtcbiAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XG4gIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9IGZvbnRDb2xvcjtcbiAgcGFnZVRpdGxlLmRhdGFzZXQuY2F0SWQgPSBzZWxlY3RlZENhdGVnb3J5QnRuLmRhdGFzZXQuY2F0SWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSkge1xuICAvLyBMb29wIHRocm91Z2ggYWxsIHRhc2tDb250YWluZXJEaXYgZWxlbWVudHMgYW5kIGNoZWNrIHRoZWlyIHRhc2tzJyBkdWUgZGF0ZXNcbiAgY29uc3QgYWxsVGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuICBhbGxUYXNrQ29udGFpbmVyRGl2cy5mb3JFYWNoKCh0YXNrQ29udGFpbmVyRGl2KSA9PiB7XG4gICAgICBjb25zdCB0YXNrRGl2ID0gdGFza0NvbnRhaW5lckRpdi5xdWVyeVNlbGVjdG9yKCcudGFza0RpdicpOyAvLyBHZXQgdGhlIHRhc2tEaXYgaW5zaWRlIHRoZSBjdXJyZW50IHRhc2tDb250YWluZXJEaXZcbiAgICAgIGNvbnN0IHRhc2tJZCA9IHRhc2tEaXYuZGF0YXNldC50YXNrSWQ7XG4gICAgICBcbiAgICAgIGNvbnN0IHRhc2sgPSBnZXRUYXNrQnlJZCh0YXNrSWQpOyAvLyBSZXRyaWV2ZSB0aGUgdGFzayBvYmplY3QgYnkgSURcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhc2sncyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgc2VsZWN0ZWRUaW1lbGluZVxuICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBuZXcgRGF0ZShmb3JtYXREYXRlRm9ySW5wdXQodGFzay5kdWVEYXRlKSk7XG4gICAgICB0YXNrRHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgLy8gQXNzaWduIHRoZSB0YXNrIGNhdGVnb3J5IHRvIHRhc2tDYXRlZ29yeVxuICAgICAgY29uc3QgdGFza0NhdGVnb3J5ID0gdGFzay5jYXRlZ29yeTtcblxuICAgICAgaWYgKChzZWxlY3RlZFRpbWVsaW5lID09PSBudWxsIHx8IHRhc2tEdWVEYXRlIDw9IHNlbGVjdGVkVGltZWxpbmUpICYmIChzZWxlY3RlZENhdGVnb3J5ID09PSBcIkFsbCBJbmJveFwiIHx8IHRhc2tDYXRlZ29yeS5uYW1lID09PSBzZWxlY3RlZENhdGVnb3J5KSkge1xuICAgICAgICAgIC8vIFNob3cgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBlbmREYXRlLCBhbmQgY2F0ZWdvcnkgbWF0Y2hlc1xuICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEhpZGUgdGhlIHRhc2tDb250YWluZXJEaXYgaWYgaXRzIGR1ZSBkYXRlIGlzIG91dHNpZGUgdGhlIHJhbmdlIG9yIGNhdGVnb3J5IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG5cbiAgICAgIC8vSGVscGVyIGZ1bmN0aW9uXG4gICAgICBmdW5jdGlvbiBnZXRUYXNrQnlJZCh0YXNrSWQpIHtcbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXRlZ29yeVxuICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgdGFzayBpbiB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheSB3aXRoIHRoZSBtYXRjaGluZyBJRFxuICAgICAgICAgICAgY29uc3QgdGFzayA9IGNhdGVnb3J5LnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXNrOyAvLyBSZXR1cm4gdGhlIHRhc2sgaWYgZm91bmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIHRhc2sgd2l0aCB0aGUgZ2l2ZW4gSUQgaXMgZm91bmRcbiAgICAgICAgfVxuICB9KTtcbn07XG5cblxuIiwiaW1wb3J0IHsgVGFzaywgdGFza0NvdW50ZXIgfSBmcm9tIFwiLi90YXNrRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50RGF0ZSwgZm9ybWF0RGF0ZUZvcklucHV0LCBpc0RhcmtDb2xvciwgcmdiVG9IZXggfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbmltcG9ydCB7IHVwZGF0ZVBhZ2VUaXRsZSwgdXBkYXRlUGFnZVRhc2tzfSBmcm9tIFwiLi9kaXNwbGF5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBDYXRlZ29yeSwgY2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcblxuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcbmNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ25hdicpO1xuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWwnKTtcbmNvbnN0IGNhdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhdE1vZGFsJyk7XG5jb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrc0NvbnRhaW5lcicpO1xuY29uc3QgY29sbGFwc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sbGFwc2VCdG4nKTtcbmNvbnN0IGNyZWF0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlVGFzaycpO1xuY29uc3Qgb2tUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rVGFza0J0bicpXG5jb25zdCBjYW5jZWxUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbFRhc2tCdG4nKTtcbmNvbnN0IGRlbGV0ZUJ0bk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZScpO1xuY29uc3QgbmV3Q2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld0NhdEJ0bicpO1xuY29uc3Qgb2tDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tDYXRCdG4nKTtcbmNvbnN0IGNhbmNlbENhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxDYXRCdG4nKTtcbmNvbnN0IGluYm94QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FsbCBJbmJveCcpXG5jb25zdCByZXNwb25zaWJpbGl0aWVzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Jlc3BvbnNpYmlsaXRpZXMnKTtcbmNvbnN0IGV2ZW50c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdFdmVudHMgJiBTb2NpYWwnKTtcbmNvbnN0IHByb2dyYW1taW5nQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Byb2dyYW1taW5nIENvdXJzZScpO1xuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKTtcbmNvbnN0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbmNvbnN0IGFsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxCdG4nKTtcbmNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZGF5QnRuJyk7XG5jb25zdCB0aGlzV2Vla0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzV2Vla0J0bicpO1xuY29uc3QgdGhpc01vbnRoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNNb250aEJ0bicpO1xuY29uc3QgcGFnZVRpbWVsaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaW1lbGluZScpO1xubGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5sZXQgc3BhbkNhdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlQ2F0TW9kYWxcIilbMF07XG5sZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbmxldCBwYWdlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJyk7XG5cbmxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKVxubGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKTtcbmxldCBkdWVEYXRlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpO1xubGV0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKTtcbmxldCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKTtcbmxldCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpO1xubGV0IHRpbWVsaW5lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZUJ0bnMnKTtcblxubGV0IHNlbGVjdGVkQ2F0ZWdvcnkgPSAnQWxsIEluYm94JztcbmxldCBzZWxlY3RlZENhdGVnb3J5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRDYXRlZ29yeSk7XG5sZXQgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG5sZXQgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsQnRuXCIpO1xuXG5jb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG5cbmV4cG9ydCB7XG4gIGNvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLCBzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXkgIFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tFdkxpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgXG4gIGNhbmNlbFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSk7XG5cbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aXRsZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXNzaWduIHByb3BlcnR5IHZhbHVlcyBiYXNlZCBvZmYgaW5wdXRzXG4gICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlPYmplY3QgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gY2F0ZWdvcnlWYWx1ZSk7XG4gICAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGltcG9ydGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBjcmVhdGluZyBhIG5ldyB0YXNrIG9yIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG9uZVxuICAgICAgICAgIGlmICh0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCkge1xuICAgICAgICAgICAgICBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIFxuICAgICAgICB9IGVsc2UgeyB0aXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7IH1cbiAgICAgIFxuICAgIGZ1bmN0aW9uIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBDcmVhdGUgVGFzayBPYmplY3QgXG4gICAgICAgIGxldCBuZXdUYXNrID0gbmV3IFRhc2sodGFza0NvdW50ZXIsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgIFxuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgIFxuICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICBcbiAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgXG4gICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlJbWcuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkJpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTsgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHRhc2tCaWdEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7dGFza0JpZ0Rpdi5hcHBlbmRDaGlsZChkZWxldGVCdG5CaWdEaXYpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGluZWJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICBcbiAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQodGFza0JpZ0Rpdik7dGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChsaW5lYnJlYWspO3Rhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tDb250YWluZXJEaXYpOyAgICBcbiAgICAgICAgfSBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3QpO1xuICAgICAgICBcbiAgICAgICAgLy9IZWxwZXIgRnVuY3Rpb25cbiAgICAgICAgZnVuY3Rpb24gb3BlblRhc2tNb2RhbEZvckVkaXRpbmcodGFzayl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBpbnB1dHMgdG8gdGhlIHRhc2sncyB2YWx1ZXNcbiAgICAgICAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSB0YXNrLnRpdGxlO1xuICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QudmFsdWUgPSB0YXNrLmNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICBkdWVEYXRlU2VsZWN0LnZhbHVlID0gdGFzay5kdWVEYXRlO1xuICAgICAgICAgICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSB0YXNrLnByaW9yaXR5O1xuICAgICAgICAgICAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHRhc2suZGVzY3JpcHRpb247XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgZGF0YSBhdHRyaWJ1dGUgb24gdGhlIHRpdGxlIGlucHV0IHRvIHRoZSB0YXNrJ3MgaWQgc28gd2Uga25vdyB3aGljaCB0YXNrIGlzIGJlaW5nIGVkaXRlZFxuICAgICAgICAgICAgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQgPSB0YXNrLmlkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZWRpdFRhc2sodGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbil7XG4gICAgICAgIC8vIEVkaXRpbmcgVGFzayBPYmplY3RcbiAgICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICBsZXQgdGFza09iamVjdDtcbiAgICAgICAgZm9yKGxldCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCh0YXNrID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgIGlmKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFza09iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGZvdW5kIHdpdGggaWQgJHt0YXNrSWR9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrIG9iamVjdCdzIHZhbHVlc1xuICAgICAgICB0YXNrT2JqZWN0LnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRhc2tPYmplY3QuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdDtcbiAgICAgICAgdGFza09iamVjdC5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGFza09iamVjdC5wcmlvcml0eSA9IGltcG9ydGFuY2U7XG4gICAgICAgIHRhc2tPYmplY3QuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB0YXNrSWQgYW5kIHRhc2tEaXYgaGVyZVxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdGluZyB0YXNrLCB0aXRsZTogJyArIHRpdGxlICsgJyBpZDogJyArIHRhc2tJZCk7XG4gICAgICAgIGxldCB0YXNrRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFza0lkKTtcbiAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrRGl2J3MgdGV4dENvbnRlbnQgdG8gcmVmbGVjdCB0aGUgbmV3IHZhbHVlc1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrVGl0bGUnKS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrQ2F0ZWdvcnknKS50ZXh0Q29udGVudCA9IGAoJHtjYXRlZ29yeU9iamVjdC5uYW1lfSlgO1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRHVlRGF0ZScpLnRleHRDb250ZW50ID0gZm9ybWF0RGF0ZUZvcklucHV0KGR1ZURhdGUpO1xuICAgICAgICBsZXQgdGFza1ByaW9yaXR5SW1nID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcuc3ltYm9sJyk7XG4gICAgICAgICAgICBpZihpbXBvcnRhbmNlID09IFwiSGlnaGVzdFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTMzMy5wbmdcIn1cbiAgICAgICAgICAgIGVsc2UgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0yMjIucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIHt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nX2dyZXkucG5nXCJ9XG4gICAgXG4gICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgICBzZWxlY3RlZFRpbWVsaW5lID0gbnVsbDtcbiAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gYWxsQnRuO1xuICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgc2VsZWN0ZWRDYXRlZ29yeSA9IGNhdGVnb3J5U2VsZWN0LnZhbHVlO1xuICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIH0pO1xuXG4gIGRlbGV0ZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICBcbiAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGVUYXNrKHRhc2tJZCk7XG4gIH0pOyAgLy8gKGluc2lkZSBtb2RhbCkuIE91dHNpZGUgbW9kYWwgZXYgbGlzdGVuZXIgaXMgaW5zaWRlIGFkZFRhc2tEaXYgZXZsaXN0ZW5lciAnRGVsZXRlQnRuQmlnRGl2J1xuICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVycm9yIGNsYXNzIHdoZW4gdGhlIHRpdGxlIGlucHV0IHZhbHVlIGNoYW5nZXNcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrPycpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FuY2VscywganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICBpZiAoIXRhc2tEaXYpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGRpdiBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgdGFzayBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIHRhc2tJZFxuICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICBsZXQgdGFza0NhdGVnb3J5O1xuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgaWYgKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgdGFza0NhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBSZW1vdmUgdGhlIHRhc2sgZnJvbSB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheVxuICAgICAgdGFza0NhdGVnb3J5LnJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCk7XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXItLTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlciA9IGNhdGVnb3JpZXMucmVkdWNlKChjb3VudCwgY2F0ZWdvcnkpID0+IGNvdW50ICsgY2F0ZWdvcnkudGFza3MubGVuZ3RoLCAwKTtcbiAgXG4gICAgICAvLyBEZWxldGUgdGhlIHRhc2tDb250YWluZXJEaXZcbiAgICAgIGxldCB0YXNrQ29udGFpbmVyRGl2ID0gdGFza0Rpdi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICB0YXNrQ29udGFpbmVyRGl2LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGFza0NvbnRhaW5lckRpdlxuICBcbiAgICAgIC8vIEhpZGUgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgICAgLy8gQ2xlYXIgdGhlIGVkaXRpbmdUYXNrSWQgc2luY2Ugd2UndmUganVzdCBkZWxldGVkIHRoZSB0YXNrXG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjYXRFdkxpc3RlbmVycygpe1xuICBuZXdDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGN1cnJlbnRNb2RlID0gJ25ldyc7XG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgY2F0VGl0bGUudmFsdWUgPSBcIlwiO1xuICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjOGE1OWI5JztcbiAgICAgIGNvbnNvbGUubG9nKGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuXG4gICB9KTtcbiAgIG9rQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gc3VibWl0dGluZ1xuXG4gICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAnbmV3Jykge1xuXG4gICAgICAgICAgIC8vIEdldCB0aGUgY2F0ZWdvcnkgbmFtZSBhbmQgY29sb3IgZnJvbSB0aGUgZm9ybSBpbnB1dHNcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgIGxldCBjYXRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuXG4gICAgICAgICAgIC8vU2V0IGRlZmF1bHQgY2F0IGNvbG9yIHBpY2tlclxuICAgICAgICAgICBjYXRDb2xvciA9IGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgY2F0ZWdvcnkgaW5zdGFuY2VcbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5ID0gbmV3IENhdGVnb3J5KGNhdFRpdGxlLCBjYXRDb2xvcik7XG4gICAgICAgICAgIGNhdGVnb3JpZXMucHVzaChuZXdDYXRlZ29yeSk7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxpc3QgaXRlbVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgbGV0IG5ld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICBuZXdCdXR0b24uaW5uZXJUZXh0ID0gY2F0VGl0bGU7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pZCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2F0QnRucycpO1xuICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY2F0Q29sb3I7XG4gICAgICAgICAgIG5ld0J1dHRvbi5kYXRhc2V0LmNhdElkID0gbmV3Q2F0ZWdvcnkuY2F0SWQ7XG4gICBcbiAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGNhdENvbG9yKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhcmsnKTtcbiAgICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGlnaHQnKTtcbiAgICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgXG4gICAgICAgIG5ld0NhdGVnb3J5RWxlbWVudC5hcHBlbmRDaGlsZChuZXdCdXR0b24pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcmllc0xpc3QnKS5hcHBlbmRDaGlsZChuZXdDYXRlZ29yeUVsZW1lbnQpO1xuICAgICAgICBpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMoKTtcbiAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICAgLy9SZXRyaWV2ZSB0aGUgY2F0ZWdvcnkgZnJvbSB0aGUgY2F0ZWdvcmllcyBhcnJheSBiYXNlZCBvbiB0aGUgY2F0SURcbiAgICAgICAgICAgY29uc29sZS5sb2coY2F0SUQpO1xuICAgICAgICAgICBpZiAodHlwZW9mIGNhdElEICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdjYXRJZCBpcyBub3QgYSBudW1iZXIgYXQgW2Rlc2NyaXB0aW9uIG9mIHRoZSBjb2RlIGxvY2F0aW9uXScsIGNhdElEKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICBsZXQgZWRpdGluZ0NhdGVnb3J5ID0gY2F0ZWdvcmllcy5maW5kKGNhdCA9PiBjYXQuY2F0SWQgPT09IGNhdElEKTtcbiAgICAgICBcbiAgICAgICAgICAgLy9VcGRhdGUgdGhlIGNhdGVnb3J5IHZhbHVlc1xuICAgICAgICAgICBpZiAoZWRpdGluZ0NhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICBlZGl0aW5nQ2F0ZWdvcnkubmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5LmNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJykudmFsdWU7XG4gICAgICAgXG4gICAgICAgICAgICAgICAvL1VwZGF0ZSB0aGUgVUkgZWxlbWVudCAoYnV0dG9uIGluIHRoaXMgY2FzZSkgcmVwcmVzZW50aW5nIHRoZSBjYXRlZ29yeVxuICAgICAgICAgICAgICAgbGV0IGFzc29jaWF0ZWRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBidXR0b25bZGF0YS1jYXQtaWQ9XCIke2NhdElEfVwiXWApO1xuICAgICAgICAgICAgICAgaWYgKGFzc29jaWF0ZWRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLmlubmVyVGV4dCA9IGVkaXRpbmdDYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZWRpdGluZ0NhdGVnb3J5LmNvbG9yO1xuICAgICAgIFxuICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgY29sb3IgYnJpZ2h0bmVzcyB0byBhZGp1c3QgdGV4dCBjb2xvciBmb3IgYmV0dGVyIHZpc2liaWxpdHlcbiAgICAgICAgICAgICAgICAgICBpZiAoaXNEYXJrQ29sb3IoZWRpdGluZ0NhdGVnb3J5LmNvbG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZVRpdGxlLnN0eWxlLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZVRpdGxlLnN0eWxlLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBjYXRlZ29yeSB3aXRoIElEOicsIGNhdElEKTtcbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIC8vVXBkYXRlIHBhZ2UgdGl0bGVcbiAgICAgICAgICAgcGFnZVRpdGxlLmlubmVySFRNTCA9IGNhdFRpdGxlLnZhbHVlO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjb2xvclBpY2tlci52YWx1ZSk7XG4gICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICAgICB9XG4gICAgICAgdXBkYXRlQ2F0ZWdvcnlEcm9wZG93bigpO1xuICAgXG4gICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgXG4gICAgICAgLy8gSGVscGVyIEZ1bmN0aW9uXG4gICAgICAgZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnlEcm9wZG93bigpIHtcbiAgICAgICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIG9wdGlvbnNcbiAgICAgICAgICAgbGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3J5Jyk7XG4gICAgICAgICAgIHdoaWxlIChjYXRlZ29yeVNlbGVjdC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5yZW1vdmVDaGlsZChjYXRlZ29yeVNlbGVjdC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICAvLyBBZGQgbmV3IG9wdGlvbnMgYmFzZWQgb24gdGhlIGNhdGVnb3JpZXMgYXJyYXlcbiAgICAgICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IHtcbiAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgfVxuICAgfSk7XG4gICBjYW5jZWxDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgeyAgICBcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgfSk7XG4gICBwYWdlVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICBjdXJyZW50TW9kZSA9ICdlZGl0JztcbiAgICAgICBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpO1xuICAgICAgIGZ1bmN0aW9uIG9wZW5DYXRNb2RhbEZvckVkaXRpbmcocGFnZVRpdGxlLCBjYXRJRCl7XG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpO1xuICAgICAgICAgICBsZXQgY29sb3JEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yRGlzcGxheScpO1xuICAgICAgIFxuICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgIGNhdFRpdGxlLnZhbHVlID0gcGFnZVRpdGxlLnRleHRDb250ZW50O1xuICAgICAgICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgfVxuICAgfSk7XG4gICBjb2xvckRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAvLyBHZXQgdGhlIFJHQiBjb2xvciAmIGNvbnZlcnQgdG8gaGV4LiBUaGVuIHNldCB0aGUgY29sb3JQaWNrZXIgdmFsdWUgdG8gdGhlIGhleFxuICAgIGxldCByZ2JDb2xvciA9IGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgbGV0IGhleENvbG9yID0gcmdiVG9IZXgocmdiQ29sb3IpO1xuICAgIGNvbG9yUGlja2VyLnZhbHVlID0gaGV4Q29sb3I7XG4gICAgY29sb3JQaWNrZXIuY2xpY2soKTtcbiAgICAgIFxuICAgIH0pO1xuICAgY29sb3JQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHsgICAgIC8vIFdoZW4geW91IHBpY2sgYSBjb2xvciwgdXBkYXRlIHRoZSBkaXNwbGF5XG4gICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0RmlsdGVycygpe1xuICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbiAgc2VsZWN0ZWRUaW1lbGluZUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG4gIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgdXBkYXRlUGFnZVRhc2tzKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0aW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBzZWxlY3RlZFRpbWVsaW5lID0gdG9kYXk7XG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IHRvZGF5QnRuO1xuICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcblxufSk7XG4gIHRoaXNXZWVrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgb25lV2Vla0xhdGVyID0gbmV3IERhdGUoKTtcbiAgICAgIG9uZVdlZWtMYXRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDcpO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSB0aGlzV2Vla0J0bjtcbiAgICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG9uZU1vbnRoTGF0ZXI7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gdGhpc01vbnRoQnRuO1xuICAgICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xuICBhbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lID0gbnVsbDtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSBhbGxCdG47XG4gICAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNhdEZpbHRlckV2TGlzdGVuZXJzKCl7XG4gIC8vUmVzZWxlY3QgY2F0ZWdvcnkgYnV0dG9ucyB0byBwaWNrIHVwIGFueSBuZXdseSBhZGRlZCBvbmUgIFxuICBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpOyBcbiAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGNhdEJ0bikgPT4ge1xuICAgIGNhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTZXQgc2VsZWN0ZWRDYXRlZ29yeSB0byB0aGUgY2xpY2tlZCBidXR0b24ncyB0ZXh0IGNvbnRlbnRcbiAgICAgICAgc2VsZWN0ZWRDYXRlZ29yeSA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICAgc2VsZWN0Q2F0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIH0pO1xuICB9KTsgXG59XG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVNldHRpbmdzKCl7XG4gIGNvbGxhcHNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIE5hdiBDb2xsYXBzZSAmIEV4cGFuZFxuICAgICAgY29uc3QgbmF2RGlzcGxheVN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobmF2KS5kaXNwbGF5O1xuICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IGlzU21hbGxTY3JlZW4gPSBzY3JlZW5XaWR0aCA8IDc1MDtcbiAgICBcbiAgICAgIGlmIChpc1NtYWxsU2NyZWVuKSB7XG4gICAgICAgIGlmIChuYXZEaXNwbGF5U3R5bGUgPT09ICdub25lJykge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJzInO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gMyc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTQwcHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kJyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEycHgnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcyLzMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzI0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBzcGFuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgLy8gQ2xvc2VzIHRhc2sgbW9kYWwgb24gY2xpY2tpbmcgWFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9OyBcbiAgc3BhbkNhdE1vZGFsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgLy8gQ2xvc2VzIGNhdG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSAgICAgXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgLy8gQ2xvc2VzIE1vZGFscyB3aGVuIGNsaWNraW5nIG91dHNpZGUgb2YgaXQgXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH0gZWxzZSBpZihldmVudC50YXJnZXQgPT0gY2F0TW9kYWwpIHtcbiAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH1cbiAgfVxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkgeyAvLyBFbnRlciBhY3RzIGFzIGEgY2xpY2tcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IFxuICAgICAgICAgIG9rVGFza0J0bi5jbGljaygpOyBcbiAgICAgIH1cbiAgfSk7XG4gIFxufTtcblxuZnVuY3Rpb24gc2VsZWN0Q2F0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpe1xuICAgIC8vIFJlbW92ZSAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIGZyb20gYWxsIGNhdGVnb3J5IGJ1dHRvbnNcbiAgICBjYXRlZ29yeUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIH0pO1xuXG4gICAgLy8gR2V0IGFuZCBhZGQgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyB0byB0aGUgY2xpY2tlZCBidXR0b25cbiAgICBzZWxlY3RlZENhdGVnb3J5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgc2VsZWN0ZWRDYXRlZ29yeUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuXG4gICAgLy8gVXBkYXRlIFBhZ2VcbiAgICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gICAgdXBkYXRlUGFnZVRhc2tzKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHJldHVybiBzZWxlY3RlZENhdGVnb3J5QnRuO1xufVxuXG5mdW5jdGlvbiBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pe1xuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgIC8vIFJlbW92ZSAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIGZyb20gYWxsIHRpbWVsaW5lIGJ1dHRvbnNcbiAgICB0aW1lbGluZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIFBhZ2VcbiAgICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gICAgdXBkYXRlUGFnZVRhc2tzKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIFxuICAgIHNlbGVjdGVkVGltZWxpbmVCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICByZXR1cm4gc2VsZWN0ZWRUaW1lbGluZUJ0bjtcbn0iLCJpbXBvcnQge2NhdGVnb3J5QnV0dG9uc30gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQgeyB0YXNrQ291bnRlciB9IGZyb20gJy4vdGFza0Z1bmN0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBDYXRlZ29yeSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29sb3IsIGNhdElkID0gbnVsbCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXTtcbiAgICAgICAgdGhpcy5jYXRJZCA9IGNhdElkIHx8ICsrbGFzdENhdElkO1xuICAgIH1cbiAgICBhZGRUYXNrVG9DYXQodGFzaykge1xuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzayk7XG4gICAgICAgIC8vIFNldCB0aGUgdGFzaydzIElEIHRvIG1hdGNoIHRoZSBjb3JyZWN0IGNvdW50ZXIgdmFsdWVcbiAgICAgICAgdGFzay5pZCA9IHRhc2tDb3VudGVyO1xuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgIH1cbiAgICByZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5pZCAhPT0gdGFza0lkKTtcbiAgICB9XG59XG5cbmxldCBsYXN0Q2F0SWQgPSBNYXRoLm1heCguLi5BcnJheS5mcm9tKGNhdGVnb3J5QnV0dG9ucykubWFwKGJ0biA9PiBwYXJzZUludChidG4uZGF0YXNldC5jYXRJZCkpKTtcbmxldCBkZWZhdWx0Q2F0ZWdvcmllcyA9IGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpO1xubGV0IGNhdGVnb3JpZXMgPSBbLi4uZGVmYXVsdENhdGVnb3JpZXNdOyBcblxuLy9DaGVja3MgaWYgd2UgYXJlIGVkZGl0aW5nIG9yIGNyZWF0aW5nIGEgbmV3IGNhdCAgXG5sZXQgY3VycmVudE1vZGUgPSBudWxsO1xubGV0IGNhdElEO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMoKSB7XG4gICAgY29uc3QgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3JpZXNEaXYgYnV0dG9uJyk7XG4gICAgbGV0IGNhdGVnb3JpZXMgPSBBcnJheS5mcm9tKGNhdGVnb3J5QnV0dG9ucykubWFwKGJ1dHRvbiA9PiB7XG4gICAgICAgIGxldCBjYXRJZCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmNhdElkKTsgXG4gICAgICAgIGlmIChjYXRJZCA+IGxhc3RDYXRJZCkgbGFzdENhdElkID0gY2F0SWQ7XG4gICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkoYnV0dG9uLnRleHRDb250ZW50LnRyaW0oKSwgbnVsbCwgY2F0SWQpOyAvLyBQYXNzaW5nIGNhdElkIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXM7XG59IFxuXG5leHBvcnQge2NhdGVnb3JpZXMsIGNhdElELCBjdXJyZW50TW9kZX07IiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJy4vY2F0ZWdvcnlGdW5jdGlvbnMnO1xuXG5sZXQgdGFza0NvdW50ZXIgPSAwO1xuXG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IoaWQsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgcHJpb3JpdHksIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3RcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBmYWxzZTsgXG4gICAgfVxuICAgIHRvZ2dsZUNvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gIXRoaXMuY29tcGxldGU7XG4gICAgfVxufVxuXG5leHBvcnQge3Rhc2tDb3VudGVyfTtcblxuXG4iLCJpbXBvcnQge1Rhc2t9IGZyb20nLi90YXNrRnVuY3Rpb25zJztcbmltcG9ydCB7Q2F0ZWdvcnl9IGZyb20nLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5pbXBvcnQge3Rhc2tFdkxpc3RlbmVycywgc2V0RGVmYXVsdEZpbHRlcnMsIHRpbWVGaWx0ZXJFdkxpc3RlbmVycywgY2F0RmlsdGVyRXZMaXN0ZW5lcnMsY2F0RXZMaXN0ZW5lcnMsIGRpc3BsYXlTZXR0aW5nc30gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQge2NvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheX0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5cbnRhc2tFdkxpc3RlbmVycygpO1xuY2F0RXZMaXN0ZW5lcnMoKTtcbnNldERlZmF1bHRGaWx0ZXJzKCk7XG50aW1lRmlsdGVyRXZMaXN0ZW5lcnMoKTtcbmNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5kaXNwbGF5U2V0dGluZ3MoKTtcblxuIl0sIm5hbWVzIjpbImlzRGFya0NvbG9yIiwiY29sb3IiLCJyZ2IiLCJzdGFydHNXaXRoIiwiciIsInBhcnNlSW50Iiwic2xpY2UiLCJnIiwiYiIsInZhbHVlcyIsInN1YnN0cmluZyIsImxlbmd0aCIsInNwbGl0IiwiYnJpZ2h0bmVzcyIsIk1hdGgiLCJyb3VuZCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtYXREYXRlRm9ySW5wdXQiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJvZmZzZXQiLCJnZXRUaW1lem9uZU9mZnNldCIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiU3RyaW5nIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsInVwZGF0ZVBhZ2VUaXRsZSIsInNlbGVjdGVkQ2F0ZWdvcnlCdG4iLCJwYWdlVGl0bGUiLCJ0ZXh0Q29udGVudCIsInNlbGVjdGVkQ2F0QnRuIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImJnQ29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmb250Q29sb3IiLCJzdHlsZSIsImRhdGFzZXQiLCJjYXRJZCIsInVwZGF0ZVBhZ2VUYXNrcyIsInNlbGVjdGVkVGltZWxpbmUiLCJzZWxlY3RlZENhdGVnb3J5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRhc2tDb250YWluZXJEaXYiLCJ0YXNrIiwidGFza0lkIiwiY2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwidGFza3MiLCJmaW5kIiwiaWQiLCJnZXRUYXNrQnlJZCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrRHVlRGF0ZSIsImR1ZURhdGUiLCJzZXRIb3VycyIsInRhc2tDYXRlZ29yeSIsIm5hbWUiLCJkaXNwbGF5IiwiY29udGVudCIsIm5hdiIsIm1vZGFsIiwiY2F0TW9kYWwiLCJ0YXNrc0NvbnRhaW5lciIsImNvbGxhcHNlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVUYXNrQnRuIiwib2tUYXNrQnRuIiwiY2FuY2VsVGFza0J0biIsImRlbGV0ZUJ0bk1vZGFsIiwibmV3Q2F0QnRuIiwib2tDYXRCdG4iLCJjYW5jZWxDYXRCdG4iLCJjb2xvclBpY2tlciIsImNvbG9yRGlzcGxheSIsImFsbEJ0biIsInRvZGF5QnRuIiwidGhpc1dlZWtCdG4iLCJ0aGlzTW9udGhCdG4iLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJ0aW1lbGluZUJ1dHRvbnMiLCJzZWxlY3RlZFRpbWVsaW5lQnRuIiwidG9kYXkiLCJnZXRDdXJyZW50RGF0ZSIsInNlbGVjdENhdEZpbHRlciIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInNlbGVjdFRpbWVGaWx0ZXIiLCJDYXRlZ29yeSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImxhc3RDYXRJZCIsImFkZFRhc2tUb0NhdCIsInB1c2giLCJ0YXNrQ291bnRlciIsInJlbW92ZVRhc2tGcm9tQ2F0IiwiZmlsdGVyIiwiY2F0SUQiLCJtYXgiLCJBcnJheSIsImZyb20iLCJtYXAiLCJidG4iLCJkZWZhdWx0Q2F0ZWdvcmllcyIsInRyaW0iLCJpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMiLCJjdXJyZW50TW9kZSIsIlRhc2siLCJ0aXRsZSIsImNhdGVnb3J5T2JqZWN0IiwicHJpb3JpdHkiLCJkZXNjcmlwdGlvbiIsImNvbXBsZXRlIiwidG9nZ2xlQ29tcGxldGUiLCJkZWxldGVUYXNrIiwiY29uZmlybSIsImVkaXRpbmdUYXNrSWQiLCJ0YXNrT2JqZWN0IiwidGFza0RpdiIsImVycm9yIiwicmVkdWNlIiwiY291bnQiLCJwYXJlbnROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiZGQiLCJtbSIsInl5eXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwb3J0VmFsaWRpdHkiLCJjYXRlZ29yeVZhbHVlIiwiaW1wb3J0YW5jZSIsInVuZGVmaW5lZCIsInNyYyIsImVkaXRUYXNrIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuVGFza01vZGFsRm9yRWRpdGluZyIsInRhc2tCaWdEaXYiLCJ0YXNrUHJpbSIsImFwcGVuZENoaWxkIiwiY2hlY2tib3giLCJ0eXBlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hlY2tlZCIsInRhc2tUaXRsZSIsInRhc2tQcmlvcml0eSIsInRhc2tTZWMiLCJ0YXNrUHJpb3JpdHlJbWciLCJkZWxldGVCdG5CaWdEaXYiLCJsaW5lYnJlYWsiLCJhZGRUYXNrRGl2IiwiYWRkVGFzayIsInRhc2tFdkxpc3RlbmVycyIsImNhdFRpdGxlIiwiY2F0Q29sb3IiLCJuZXdDYXRlZ29yeSIsIm5ld0NhdGVnb3J5RWxlbWVudCIsIm5ld0J1dHRvbiIsImlubmVyVGV4dCIsImluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycyIsImVkaXRpbmdDYXRlZ29yeSIsImNhdCIsImFzc29jaWF0ZWRCdXR0b24iLCJpbm5lckhUTUwiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJvcHRpb24iLCJ1cGRhdGVDYXRlZ29yeURyb3Bkb3duIiwib3BlbkNhdE1vZGFsRm9yRWRpdGluZyIsImhleENvbG9yIiwibWF0Y2giLCJ0b1N0cmluZyIsInJnYlRvSGV4IiwiY2xpY2siLCJiYWNrZ3JvdW5kIiwib25lV2Vla0xhdGVyIiwic2V0RGF0ZSIsIm9uZU1vbnRoTGF0ZXIiLCJjYXRCdG4iLCJuYXZEaXNwbGF5U3R5bGUiLCJpbm5lcldpZHRoIiwiekluZGV4IiwiZ3JpZENvbHVtbiIsIm9uY2xpY2siLCJ0YXJnZXQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9