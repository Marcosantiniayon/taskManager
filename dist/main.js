(()=>{"use strict";function e(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function t(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function n(e){pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,o=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=o,pageTitle.dataset.catId=e.dataset.catId}function o(e,n){document.querySelectorAll(".taskContainerDiv").forEach((o=>{const l=function(e){for(const t of Z){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(o.querySelector(".taskDiv").dataset.taskId),s=new Date(t(l.dueDate));s.setHours(0,0,0,0);const a=l.category;!(null===e||s<=e)||"All Inbox"!==n&&a.name!==n?o.style.display="none":o.style.display="block"}))}let l="oldestFirst",s="highestFirst";function a(e){const t=document.querySelectorAll(".taskContainerDiv"),n=[];t.forEach((e=>{const t=e.querySelector(".taskDueDate").textContent,o=e.querySelector(".taskPriority img").src,l=o.substring(o.lastIndexOf("/")+1);n.push({taskContainerDiv:e,taskDueDate:t,taskPriorityFilename:l})})),"date"===e?("oldestFirst"===l?(n.sort(((e,t)=>new Date(e.taskDueDate)-new Date(t.taskDueDate))),l="newestFirst"):"newestFirst"===l&&(n.sort(((e,t)=>new Date(t.taskDueDate)-new Date(e.taskDueDate))),l="oldestFirst"),console.log(l)):"priority"===e&&function(){function e(e){switch(e){case"warning-333.png":return 3;case"warning-222.png":return 2;case"warning-111.png":return 1;case"warning_grey.png":return 0;default:return-1}}"highestFirst"===s?(n.sort(((t,n)=>{const o=e(t.taskPriorityFilename);return e(n.taskPriorityFilename)-o})),s="lowestFirst"):"lowestFirst"===s&&(n.sort(((t,n)=>e(t.taskPriorityFilename)-e(n.taskPriorityFilename))),s="highestFirst"),console.log(s)}();const o=document.querySelector(".tasksContainer");t.forEach((e=>{o.removeChild(e)})),n.forEach((e=>{o.appendChild(e.taskContainerDiv)}))}const i=document.querySelector(".content"),d=document.querySelector("nav"),c=document.querySelector("#modal"),r=document.querySelector("#catModal"),u=document.querySelector(".tasksContainer"),m=document.getElementById("collapseBtn"),g=document.querySelector(".sortOptions"),y=document.getElementById("sortBtn"),p=document.getElementById("dateBtn"),k=document.getElementById("importanceBtn"),v=document.getElementById("createTask"),f=document.getElementById("okTaskBtn"),E=document.getElementById("cancelTaskBtn"),h=document.getElementById("delete"),I=document.getElementById("newCatBtn"),C=document.getElementById("okCatBtn"),B=document.getElementById("cancelCatBtn"),L=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),D=document.getElementById("colorDisplay"),w=document.getElementById("allBtn"),b=document.getElementById("todayBtn"),x=document.getElementById("thisWeekBtn"),S=document.getElementById("thisMonthBtn"),T=document.getElementById("pageTimeline");let F=document.getElementsByClassName("close")[0],q=document.getElementsByClassName("closeCatModal")[0],P=document.querySelector("form"),A=document.getElementById("pageTitle"),M=document.getElementById("title"),N=document.getElementById("category"),$=document.getElementById("dueDate"),H=document.getElementById("priority"),z=document.getElementById("description"),W=document.querySelectorAll(".catBtns"),O=document.querySelectorAll(".timelineBtns"),R="All Inbox",_=document.getElementById(R),Y=null,V=document.getElementById("allBtn");const j=function(){const e=new Date;return e.setHours(0,0,0,0),e}();function G(e){return W.forEach((e=>{e.classList.remove("selectedFilter")})),_=document.getElementById(e),_.classList.add("selectedFilter"),n(_),o(Y,e),_}function J(e,t){return console.log(t),O.forEach((e=>{e.classList.remove("selectedFilter")})),n(_),o(e,R),t.classList.add("selectedFilter"),t}y.addEventListener("click",(function(){"none"===g.style.display?(g.style.display="flex",y.style.borderRadius="5px 5px 0px 0px"):(g.style.display="none",y.style.borderRadius="")})),p.addEventListener("click",(function(){a("date")})),k.addEventListener("click",(function(){a("priority")}));class K{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++U}addTaskToCat(e){this.tasks.push(e),e.id=te,te++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let Q,U=Math.max(...Array.from(W).map((e=>parseInt(e.dataset.catId)))),X=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>U&&(U=t),new K(e.textContent.trim(),null,t)}))}(),Z=[...X],ee=null,te=0;class ne{constructor(e,t,n,o,l,s){this.id=e,this.title=t,this.category=n,this.dueDate=o,this.priority=l,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return c.style.display="none",void delete M.dataset.editingTaskId;let t,n,o=document.getElementById(e);if(!o)return console.error(`No task div found with id ${e}`),void delete M.dataset.editingTaskId;for(let o of Z)if(t=o.tasks.find((t=>t.id==e)),t){n=o;break}n.removeTaskFromCat(e),te--,te=Z.reduce(((e,t)=>e+t.tasks.length),0),o.parentNode.parentNode.remove(),c.style.display="none",delete M.dataset.editingTaskId}v.addEventListener("click",(function(){M.value="",N.value=R;let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();e=o+"-"+n+"-"+t,$.value=e,H.value="Low",z.value="",c.style.display="block"})),E.addEventListener("click",(function(e){e.preventDefault(),c.style.display="none"})),f.addEventListener("click",(function(o){if(document.querySelector("form").reportValidity()){o.preventDefault(),M.classList.remove("error");let n=document.getElementById("title").value,l=document.getElementById("category").value,s=document.getElementById("category").value,a=Z.find((e=>e.name===s)),i=document.getElementById("dueDate").value,d=document.getElementById("priority").value,r=document.getElementById("description").value;M.dataset.editingTaskId?function(e,n,o,l,s){let a,i=M.dataset.editingTaskId;for(let e of Z)if(a=e.tasks.find((e=>e.id==i)),a)break;if(void 0===a)return void console.error(`No task found with id ${i}`);a.title=e,a.category=n,a.dueDate=o,a.priority=l,a.description=s,console.log("editing task, title: "+e+" id: "+i);let d=document.getElementById(i);d.querySelector(".taskTitle").textContent=e,d.querySelector(".taskCategory").textContent=`(${n.name})`,d.querySelector(".taskDueDate").textContent=t(o),d.querySelector(".symbol").src="Highest"==l?"./images/warning-333.png":"High"==l?"./images/warning-222.png":"Medium"==l?"./images/warning-111.png":"./images/warning_grey.png",delete M.dataset.editingTaskId,c.style.display="none"}(n,a,i,d,r):function(n,o,l,s,a,i){let d=new ne(te,n,l,s,a,i);te++,l.addTaskToCat(d);let r=d.id;const m=document.createElement("div");function g(e){console.log(e),M.value=e.title,N.value=e.category.name,$.value=e.dueDate,H.value=e.priority,z.value=e.description,M.dataset.editingTaskId=e.id,c.style.display="block"}m.classList.add("taskContainerDiv"),function(n,o,l,s,a,i){const c=document.createElement("div");c.classList.add("taskBigDiv");const r=document.createElement("div");r.classList.add("taskDiv"),r.id=n,r.dataset.taskId=n,r.addEventListener("click",(function(){g(d)}));const y=document.createElement("div");y.classList.add("taskPrim"),r.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),E.classList.add("complete"),h.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),E.classList.remove("complete"),h.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=o;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+l+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const f=document.createElement("div");f.classList.add("taskSec"),r.appendChild(f);const E=document.createElement("div");E.classList.add("taskDueDate"),E.textContent=t(s);const h=document.createElement("div");h.classList.add("taskPriority");const I=document.createElement("img");"Highest"==i.value?I.src="./images/warning-333.png":"High"==i.value?I.src="./images/warning-222.png":"Medium"==i.value?I.src="./images/warning-111.png":I.src="./images/warning_grey.png",I.classList.add("symbol"),h.appendChild(I);const C=document.createElement("img");C.id=n,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),f.appendChild(E),f.appendChild(h),c.appendChild(r),c.appendChild(C);const B=document.createElement("hr");m.appendChild(c),m.appendChild(B),u.appendChild(m)}(r,n,o,s,0,H)}(n,l,a,i,d,r),c.style.display="none"}else M.classList.add("error");Y=null,V=w,J(Y,V),R=N.value,G(R),n(_)})),h.addEventListener("click",(function(t){t.stopPropagation();let n=M.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),M.addEventListener("input",(function(){this.classList.remove("error")}))}(),I.addEventListener("click",(function(){ee="new",r.style.display="block",catTitle.value="",D.style.backgroundColor="#8a59b9",console.log(D.style.backgroundColor)})),C.addEventListener("click",(function(t){if(t.preventDefault(),"new"===ee){let t=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=D.style.backgroundColor,console.log(n);let o=new K(t,n);Z.push(o);let l=document.createElement("li"),s=document.createElement("button");s.innerText=t,s.id=t,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=o.catId,e(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),l.appendChild(s),document.getElementById("categoriesList").appendChild(l),initializeCatFilterEvListeners()}else if("edit"===ee){console.log(Q),"number"!=typeof Q&&console.error("catId is not a number at [description of the code location]",Q);let t=Z.find((e=>e.catId===Q));if(t){t.name=document.getElementById("catTitle").value,t.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${Q}"]`);n&&(n.innerText=t.name,n.style.backgroundColor=t.color,e(t.color)?(n.style.color="white",A.style.color="white",console.log(A.style.color)):(n.style.color="black",A.style.color="black",console.log(A.style.color)))}else console.error("Could not find category with ID:",Q);A.innerHTML=catTitle.value,console.log(L.value),A.style.backgroundColor=L.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);Z.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),r.style.display="none"})),B.addEventListener("click",(function(e){e.preventDefault(),r.style.display="none"})),A.addEventListener("click",(function(){Q=parseInt(this.dataset.catId),ee="edit",function(e,t){let n=document.getElementById("catTitle"),o=document.getElementById("colorDisplay");n.value=e.textContent,o.style.backgroundColor=e.style.backgroundColor,r.style.display="block"}(A)})),D.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(D.style.backgroundColor);L.value=e,L.click()})),L.addEventListener("input",(function(){D.style.background=L.value})),_.classList.add("selectedFilter"),V.classList.add("selectedFilter"),n(_),o(Y,R),b.addEventListener("click",(function(){Y=j,V=b,J(Y,V),T.textContent=this.textContent})),x.addEventListener("click",(function(){const e=new Date;e.setDate(j.getDate()+7),Y=e,V=x,J(Y,V),T.textContent=this.textContent})),S.addEventListener("click",(function(){const e=new Date;e.setDate(j.getDate()+30),Y=e,V=S,J(Y,V),T.textContent=this.textContent})),w.addEventListener("click",(function(){Y=null,V=w,J(Y,V),T.textContent=this.textContent})),W=document.querySelectorAll(".catBtns"),W.forEach((e=>{e.addEventListener("click",(function(){R=this.textContent,Q=parseInt(this.dataset.catId),G(R)}))})),m.addEventListener("click",(function(){const e=window.getComputedStyle(d).display;window.innerWidth<750?"none"===e?(d.style.display="block",d.style.zIndex="2",i.style.gridColumn="1 / 3",i.classList.add("overlay"),m.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",i.style.gridColumn="1 / -1",i.classList.remove("overlay"),console.log("expand"),m.src="./images/expand3.png"):"none"===e?(d.style.display="block",d.style.zIndex="",i.style.gridColumn="2/3",i.classList.remove("overlay"),m.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",i.style.gridColumn="1 / -1",i.classList.remove("overlay"),console.log("expand"),m.src="./images/expand3.png")})),F.onclick=function(){c.style.display="none",delete M.dataset.editingTaskId},q.onclick=function(){r.style.display="none"},window.onclick=function(e){e.target==c?c.style.display="none":e.target==r&&(r.style.display="none")},P.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),f.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmMvaGVscGVyRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2Rpc3BsYXlGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZG9tRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvY2F0ZWdvcnlGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvdGFza0Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9pbmRleDMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCl7IFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTsgLy8gU2V0IGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIHRvIDAgdG8gY29tcGFyZSBvbmx5IHRoZSBkYXRlc1xuICAgIHJldHVybiB0b2RheTtcbiAgfVxuZXhwb3J0IGZ1bmN0aW9uIGlzRGFya0NvbG9yKGNvbG9yKSB7XG4gIGxldCByZ2I7XG4gIGlmIChjb2xvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgIGxldCByID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMSwgMyksIDE2KTtcbiAgICAgIGxldCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgIGxldCBiID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgIHJnYiA9IHsgciwgZywgYiB9O1xuICB9IGVsc2UgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJ3JnYignKSkge1xuICAgIC8vIEV4dHJhY3QgUkdCIHZhbHVlcyBmcm9tIGFuIFJHQiBzdHJpbmdcbiAgICBsZXQgdmFsdWVzID0gY29sb3Iuc3Vic3RyaW5nKDQsIGNvbG9yLmxlbmd0aCAtIDEpLnNwbGl0KCcsJyk7XG4gICAgbGV0IHIgPSBwYXJzZUludCh2YWx1ZXNbMF0sIDEwKTtcbiAgICBsZXQgZyA9IHBhcnNlSW50KHZhbHVlc1sxXSwgMTApO1xuICAgIGxldCBiID0gcGFyc2VJbnQodmFsdWVzWzJdLCAxMCk7XG4gICAgcmdiID0geyByLCBnLCBiIH07XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgYnJpZ2h0bmVzcyBvbiBhIHNjYWxlIGZyb20gMCB0byAyNTVcbiAgbGV0IGJyaWdodG5lc3MgPSBNYXRoLnJvdW5kKCgocmdiLnIgKiAyOTkpICsgKHJnYi5nICogNTg3KSArIChyZ2IuYiAqIDExNCkpIC8gMTAwMCk7XG4gIGNvbnNvbGUubG9nKGJyaWdodG5lc3MpO1xuICByZXR1cm4gYnJpZ2h0bmVzcyA8IDE3MDsgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGNvbG9yIGlzIGRhcmtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlRm9ySW5wdXQoZGF0ZVN0cmluZykge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gIGNvbnN0IG9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsgLy8gR2V0IHRoZSB0aW1lem9uZSBvZmZzZXQgaW4gbWludXRlc1xuICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBvZmZzZXQpOyAvLyBBZGp1c3QgdGhlIGRhdGUgYnkgdGhlIHRpbWV6b25lIG9mZnNldFxuICBjb25zdCBtbSA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBkZCA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgeXl5eSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgcmV0dXJuIGAke21tfS8ke2RkfS8ke3l5eXl9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgLy8gU2VwYXJhdGUgUkdCIHZhbHVlc1xuICBsZXQgdmFsdWVzID0gcmdiLm1hdGNoKC9ecmdiXFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKVxcKSQvKTtcblxuICAvLyBDb252ZXJ0IGVhY2ggdmFsdWUgdG8gaGV4YWRlY2ltYWxcbiAgbGV0IGhleENvbG9yID0gXCIjXCIgKyAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMV0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1syXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzNdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gIHJldHVybiBoZXhDb2xvcjtcbn1cbiAgIiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9ySW5wdXQgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbi8vIGltcG9ydCB7IGN1cnJlbnRDYXRlZ29yeSB9IGZyb20gXCIuL2RvbUVsZW1lbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bil7XG4gIC8vQXBwbHkgcGFnZSB0aXRsZSBiYXNlZCBvbiBjYXRlZ3J5XG4gIHBhZ2VUaXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdGVkQ2F0ZWdvcnlCdG4udGV4dENvbnRlbnQ7XG5cbiAgLy8gQ2hhbmdlIHBhZ2UgdGl0bGUgYWNjb3JkaW5nIHRvIHNlbGVjdGVkIGJ1dHRvblxuICBsZXQgc2VsZWN0ZWRDYXRCdG4gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgbGV0IGJnQ29sb3IgPSBzZWxlY3RlZENhdEJ0bi5iYWNrZ3JvdW5kQ29sb3I7XG4gIGxldCBmb250Q29sb3IgPSBzZWxlY3RlZENhdEJ0bi5jb2xvcjtcbiAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XG4gIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9IGZvbnRDb2xvcjtcbiAgcGFnZVRpdGxlLmRhdGFzZXQuY2F0SWQgPSBzZWxlY3RlZENhdGVnb3J5QnRuLmRhdGFzZXQuY2F0SWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSkge1xuICAvLyBMb29wIHRocm91Z2ggYWxsIHRhc2tDb250YWluZXJEaXYgZWxlbWVudHMgXG4gIGNvbnN0IGFsbFRhc2tDb250YWluZXJEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2tDb250YWluZXJEaXYnKTtcbiAgYWxsVGFza0NvbnRhaW5lckRpdnMuZm9yRWFjaCgodGFza0NvbnRhaW5lckRpdikgPT4ge1xuICAgICAgY29uc3QgdGFza0RpdiA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEaXYnKTsgLy8gR2V0IHRoZSB0YXNrRGl2IGluc2lkZSB0aGUgY3VycmVudCB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBjb25zdCB0YXNrSWQgPSB0YXNrRGl2LmRhdGFzZXQudGFza0lkO1xuICAgICAgXG4gICAgICBjb25zdCB0YXNrID0gZ2V0VGFza0J5SWQodGFza0lkKTsgLy8gUmV0cmlldmUgdGhlIHRhc2sgb2JqZWN0IGJ5IElEXG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIHNlbGVjdGVkVGltZWxpbmVcbiAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gbmV3IERhdGUoZm9ybWF0RGF0ZUZvcklucHV0KHRhc2suZHVlRGF0ZSkpO1xuICAgICAgdGFza0R1ZURhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgIC8vIEFzc2lnbiB0aGUgdGFzayBjYXRlZ29yeSB0byB0YXNrQ2F0ZWdvcnlcbiAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IHRhc2suY2F0ZWdvcnk7XG5cbiAgICAgIGlmICgoc2VsZWN0ZWRUaW1lbGluZSA9PT0gbnVsbCB8fCB0YXNrRHVlRGF0ZSA8PSBzZWxlY3RlZFRpbWVsaW5lKSAmJiAoc2VsZWN0ZWRDYXRlZ29yeSA9PT0gXCJBbGwgSW5ib3hcIiB8fCB0YXNrQ2F0ZWdvcnkubmFtZSA9PT0gc2VsZWN0ZWRDYXRlZ29yeSkpIHtcbiAgICAgICAgICAvLyBTaG93IHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgZW5kRGF0ZSwgYW5kIGNhdGVnb3J5IG1hdGNoZXNcbiAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBIaWRlIHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBvdXRzaWRlIHRoZSByYW5nZSBvciBjYXRlZ29yeSBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfVxuXG4gICAgICAvL0hlbHBlciBmdW5jdGlvblxuICAgICAgZnVuY3Rpb24gZ2V0VGFza0J5SWQodGFza0lkKSB7XG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggY2F0ZWdvcnlcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhc2sgaW4gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXkgd2l0aCB0aGUgbWF0Y2hpbmcgSURcbiAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICByZXR1cm4gdGFzazsgLy8gUmV0dXJuIHRoZSB0YXNrIGlmIGZvdW5kXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCBpZiBubyB0YXNrIHdpdGggdGhlIGdpdmVuIElEIGlzIGZvdW5kXG4gICAgICAgIH1cbiAgfSk7XG59O1xuXG4vLyBleHBvcnQgZnVuY3Rpb24gc29ydChzb3J0T3B0aW9uKXtcbi8vICAgY29uc3QgdGFza0RpdkFycmF5ID0gW107IC8vIENyZWF0ZSBhbiBlbXB0eSBhcnJheSB0byBzdG9yZSB0YXNrRGl2c1xuXG4vLyAgIC8vIExvb3AgdGhyb3VnaCBhbGxUYXNrQ29udGFpbmVyRGl2cyBhbmQgc3RvcmUgZWFjaCB0YXNrRGl2IGludG8gdGhlIHRhc2tEaXZBcnJheVxuLy8gICBjb25zdCBhbGxUYXNrQ29udGFpbmVyRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrQ29udGFpbmVyRGl2Jyk7XG4vLyAgIGFsbFRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbi8vICAgICAgIGNvbnN0IHRhc2tEaXYgPSB0YXNrQ29udGFpbmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRGl2Jyk7IFxuLy8gICAgICAgaWYodGFza0Rpdil7IC8vR2V0IGVhY2ggdGFza3MncyBkYXRhIChkdWUgZGF0ZSBhbmQgcHJpb3JpdHkpIFxuLy8gICAgICAgICBnZXRUYXNrRGF0YSh0YXNrRGl2KTtcbi8vICAgICAgICAgdGFza0RpdkFycmF5LnB1c2godGFza0Rpdik7IC8vIFB1c2ggdGhlIHRhc2tEaXYgaW50byB0aGUgYXJyYXkgaWYgaXQgZXhpc3RzXG4vLyAgICAgICB9XG4vLyAgIH0pO1xuXG4gIC8vIGlmKHNvcnRPcHRpb24gPT09ICdkYXRlJyl7XG4gIC8vICAgdGFza0RpdkFycmF5LnNvcnQoKGEsIGIpID0+IHsgXG5cbiAgLy8gICAgIC8vIEdldCB0aGUgdGFza0R1ZURhdGUgZnJvbSB0YXNrRGF0YSBwcm9wZXJ0eSBmb3IgZWFjaCB0YXNrIGRpdiAoYSAmIGIpXG4gIC8vICAgICBjb25zdCBkdWVEYXRlQSA9IG5ldyBEYXRlKGEudGFza0RhdGEudGFza0R1ZURhdGUpO1xuICAvLyAgICAgY29uc3QgZHVlRGF0ZUIgPSBuZXcgRGF0ZShiLnRhc2tEYXRhLnRhc2tEdWVEYXRlKTtcblxuICAvLyAgICAgLy8gQ29tcGFyZSB0aGUgZHVlIGRhdGVzXG4gIC8vICAgICByZXR1cm4gZHVlRGF0ZUEgLSBkdWVEYXRlQjtcbiAgLy8gICB9KTtcbiAgLy8gfSBlbHNlIGlmKHNvcnRPcHRpb24gPT09ICdwcmlvcml0eScpe1xuICAvLyAgIC8vIFNvcnQgdGFza0RpdkFycmF5IGJ5IHRhc2tQcmlvcml0eVxuICAvLyAgIHRhc2tEaXZBcnJheS5zb3J0KChiLCBhKSA9PiB7XG5cbiAgLy8gICAgIC8vIEdldCB0aGUgdGFza1ByaW9yaXR5IGltZyBlbGVtZW50cyBmcm9tIHRoZSB0YXNrRGl2IGVsZW1lbnRzXG4gIC8vICAgICBjb25zdCBwcmlvcml0eUltZ0EgPSBhLnF1ZXJ5U2VsZWN0b3IoJy50YXNrUHJpb3JpdHkgaW1nJyk7XG4gIC8vICAgICBjb25zdCBwcmlvcml0eUltZ0IgPSBiLnF1ZXJ5U2VsZWN0b3IoJy50YXNrUHJpb3JpdHkgaW1nJyk7XG5cbiAgLy8gICAgIC8vIEV4dHJhY3QgdGhlIHNyYyBhdHRyaWJ1dGUgdmFsdWUgZnJvbSB0aGUgaW1nIGVsZW1lbnRzXG4gIC8vICAgICBjb25zdCBwcmlvcml0eVNvdXJjZUEgPSBwcmlvcml0eUltZ0EgPyBwcmlvcml0eUltZ0EuZ2V0QXR0cmlidXRlKCdzcmMnKSA6ICcnO1xuICAvLyAgICAgY29uc3QgcHJpb3JpdHlTb3VyY2VCID0gcHJpb3JpdHlJbWdCID8gcHJpb3JpdHlJbWdCLmdldEF0dHJpYnV0ZSgnc3JjJykgOiAnJztcblxuICAvLyAgICAgLy8gR2V0IHRoZSB0YXNrUHJpb3JpdHkgZnJvbSB0YXNrRGF0YSBwcm9wZXJ0eSBhbmQgY29udmVydCBpdCB0byBhIG51bWVyaWMgdmFsdWVcbiAgLy8gICAgIGNvbnN0IHByaW9yaXR5VmFsdWVBID0gZ2V0UHJpb3JpdHlWYWx1ZShwcmlvcml0eVNvdXJjZUEpO1xuICAvLyAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZUIgPSBnZXRQcmlvcml0eVZhbHVlKHByaW9yaXR5U291cmNlQik7XG5cbiAgLy8gICAgIGNvbnNvbGUubG9nKHByaW9yaXR5VmFsdWVBKTtcbiAgLy8gICAgIGNvbnNvbGUubG9nKHByaW9yaXR5VmFsdWVCKTtcblxuICAvLyAgICAgLy8gQ29tcGFyZSB0aGUgcHJpb3JpdHkgdmFsdWVzXG4gIC8vICAgICByZXR1cm4gcHJpb3JpdHlWYWx1ZUEgLSBwcmlvcml0eVZhbHVlQjtcbiAgLy8gICB9KTtcbiAgLy8gfVxuICAvLyBjb25zb2xlLmxvZyh0YXNrRGl2QXJyYXkpO1xuXG4vLyAgIC8vIERlbGV0ZSBhbGwgY3VycmVudCBlbGVtZW50cyBvZiBjbGFzcyAndGFza0NvbnRhaW5lckRpdidcbi8vICAgY29uc3QgdGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuLy8gICB0YXNrQ29udGFpbmVyRGl2cy5mb3JFYWNoKCh0YXNrQ29udGFpbmVyRGl2KSA9PiB7XG4vLyAgICAgICB0YXNrQ29udGFpbmVyRGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFza0NvbnRhaW5lckRpdik7XG4vLyAgIH0pO1xuXG4vLyAgIGNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5cbi8vICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBzb3J0ZWQgdGFza0RpdkFycmF5IGFuZCBjcmVhdGUgbmV3IHRhc2tDb250YWluZXJEaXZzXG4vLyAgIHRhc2tEaXZBcnJheS5mb3JFYWNoKCh0YXNrLCBpbmRleCkgPT4ge1xuLy8gICAgIGNvbnN0IHRhc2tDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcblxuLy8gICAgIGNvbnN0IHRhc2tCaWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICAgICAgICAgIHRhc2tCaWdEaXYuY2xhc3NMaXN0LmFkZCgndGFza0JpZ0RpdicpO1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy8gICAgICAgICAgICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrRGl2Jyk7XG4vLyAgICAgICAgICAgICB0YXNrRGl2LmlkID0gKGluZGV4ICsgMSkudG9TdHJpbmcoKTtcbi8vICAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrRGl2LmlkO1xuICAgIFxuLy8gICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgICAgIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKG5ld1Rhc2spO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICBjb25zdCB0YXNrUHJpbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy8gICAgICAgICAgICAgICAgIHRhc2tQcmltLmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmltJyk7XG4vLyAgICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tQcmltKTtcbi8vICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4vLyAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuLy8gICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuLy8gICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4vLyAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcbi8vICAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRhc2tUaXRsZTtcbi8vICAgICAgICAgICAgICAgICBjb25zdCB0YXNrQ2F0ZWdvcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDYXRlZ29yeScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkudGV4dENvbnRlbnQgPSBcIihcIiArIHRhc2suY2F0ZWdvcnkgKyBcIilcIjtcbiAgICBcbi8vICAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgIFxuLy8gICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy8gICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuLy8gICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICBcbi8vICAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuLy8gICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IHRhc2sudGFza0R1ZURhdGVcbi8vICAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmlvcml0eScpO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4vLyAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSB0YXNrUHJpb3JpdHkgaW1nIGVsZW1lbnRzIGZyb20gdGhlIHRhc2tEaXYgZWxlbWVudHNcbi8vICAgICAgICAgICAgICAgICBjb25zdCBwcmlvcml0eUltZyA9IHRhc2sucXVlcnlTZWxlY3RvcignLnRhc2tQcmlvcml0eSBpbWcnKTtcblxuLy8gICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHNyYyBhdHRyaWJ1dGUgdmFsdWUgZnJvbSB0aGUgaW1nIGVsZW1lbnRzXG4vLyAgICAgICAgICAgICAgICAgY29uc3QgcHJpb3JpdHlTb3VyY2UgPSBwcmlvcml0eUltZyA/IHByaW9yaXR5SW1nLmdldEF0dHJpYnV0ZSgnc3JjJykgOiAnJztcblxuLy8gICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgdGFza1ByaW9yaXR5IGZyb20gdGFza0RhdGEgcHJvcGVydHkgYW5kIGNvbnZlcnQgaXQgdG8gYSBudW1lcmljIHZhbHVlXG4vLyAgICAgICAgICAgICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZSA9IGdldFByaW9yaXR5VmFsdWUocHJpb3JpdHlTb3VyY2UpO1xuICAgICAgICAgICAgICAgIFxuLy8gICAgICAgICAgICAgICAgIGlmKHByaW9yaXR5VmFsdWUgPT0gMyl7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4vLyAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmlvcml0eVZhbHVlID09IDIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuLy8gICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlWYWx1ZSA9PSAxKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTExMS5wbmdcIn1cbi8vICAgICAgICAgICAgICAgICBlbHNlIHt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nX2dyZXkucG5nXCJ9XG4vLyAgICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eUltZy5jbGFzc0xpc3QuYWRkKCdzeW1ib2wnKTtcbi8vICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eUltZyk7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4vLyAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5pZCA9IHRhc2tEaXYuaWQ7XG4vLyAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuLy8gICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgXG4vLyAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4vLyAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuLy8gICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuLy8gICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0Rpdi5pZCk7XG4vLyAgICAgICAgICAgICAgICAgfSk7XG4gICAgXG4vLyAgICAgICAgICAgICAgICAgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZSk7IHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcbi8vICAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO3Rhc2tCaWdEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuQmlnRGl2KTtcbiAgICBcbi8vICAgICAgICAgICAgIGNvbnN0IGxpbmVicmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XG4gICAgXG4vLyAgICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRhc2tCaWdEaXYpO1xuLy8gICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChsaW5lYnJlYWspO1xuLy8gICAgICAgICAgICAgdGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lckRpdik7ICAgIFxuLy8gfSk7XG5cbi8vICAgLy8gSGVscGVyIGZ1bmN0aW9uc1xuLy8gICBmdW5jdGlvbiBnZXRUYXNrRGF0YSh0YXNrRGl2KXtcbi8vICAgICAvLyBHZXQgdGhlIHRhc2tEdWVEYXRlIGFuZCB0YXNrUHJpb3JpdHkgZWxlbWVudHMgd2l0aGluIHRoZSB0YXNrRGl2XG4vLyAgICAgY29uc3QgdGFza1RpdGxlID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykuaW5uZXJIVE1MO1xuLy8gICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tDYXRlZ29yeScpLmlubmVySFRNTDtcbi8vICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEdWVEYXRlJykuaW5uZXJIVE1MO1xuLy8gICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnRhc2tQcmlvcml0eScpLmlubmVySFRNTDtcbiAgXG4vLyAgICAgLy8gQWRkIHRhc2tEYXRhIGFzIGEgcHJvcGVydHkgb2YgdGhlIHRhc2tEaXYgZWxlbWVudFxuLy8gICAgIHRhc2tEaXYudGFza0RhdGEgPSB7XG4vLyAgICAgICB0YXNrVGl0bGUsXG4vLyAgICAgICB0YXNrQ2F0ZWdvcnksXG4vLyAgICAgICB0YXNrRHVlRGF0ZSxcbi8vICAgICAgIHRhc2tQcmlvcml0eSxcbi8vICAgICB9O1xuLy8gICB9XG4vLyAgIGZ1bmN0aW9uIGdldFByaW9yaXR5VmFsdWUodGFza1ByaW9yaXR5U3JjKXtcbi8vICAgICBzd2l0Y2ggKHRhc2tQcmlvcml0eVNyYykge1xuLy8gICAgICAgY2FzZSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wiOlxuLy8gICAgICAgICAgIHJldHVybiAzO1xuLy8gICAgICAgY2FzZSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wiOlxuLy8gICAgICAgICAgIHJldHVybiAyO1xuLy8gICAgICAgY2FzZSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wiOlxuLy8gICAgICAgICAgIHJldHVybiAxO1xuLy8gICAgICAgY2FzZSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIjpcbi8vICAgICAgICAgICByZXR1cm4gMDtcbi8vICAgICAgIGRlZmF1bHQ6XG4vLyAgICAgICAgICAgcmV0dXJuIC0xOyAvLyBEZWZhdWx0IHZhbHVlIGZvciB1bmRlZmluZWQgb3Igb3RoZXIgc291cmNlc1xuLy8gICAgIH1cbi8vICAgfVxuXG4vLyB9XG5sZXQgc29ydEJ5RGF0ZU9yZGVyID0gJ29sZGVzdEZpcnN0JztcbmxldCBzb3J0QnlQcmlvcml0eU9yZGVyID0gJ2hpZ2hlc3RGaXJzdCc7IFxuXG5leHBvcnQgZnVuY3Rpb24gc29ydChzb3J0T3B0aW9uKXtcbiAgLy8gMS4gRXh0cmFjdCBhbmQgc3RvcmUgdGhlIHJlbGV2YW50IGRhdGEgZnJvbSBlYWNoIHRhc2tDb250YWluZXJEaXZcbiAgY29uc3QgdGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuICBjb25zdCBkYXRhVG9Tb3J0ID0gW107XG5cbiAgdGFza0NvbnRhaW5lckRpdnMuZm9yRWFjaCgodGFza0NvbnRhaW5lckRpdikgPT4ge1xuICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrQ29udGFpbmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRHVlRGF0ZScpLnRleHRDb250ZW50OyAvLyBFeHRyYWN0IHRhc2tEdWVEYXRlXG4gICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSB0YXNrQ29udGFpbmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrUHJpb3JpdHkgaW1nJykuc3JjOyAvLyBFeHRyYWN0IHRhc2tQcmlvcml0eVxuICAgICAgY29uc3QgdGFza1ByaW9yaXR5RmlsZW5hbWUgPSB0YXNrUHJpb3JpdHkuc3Vic3RyaW5nKHRhc2tQcmlvcml0eS5sYXN0SW5kZXhPZignLycpICsgMSk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSBkYXRhIGFuZCB0aGUgdGFza0NvbnRhaW5lckRpdiBmb3Igc29ydGluZ1xuICAgICAgZGF0YVRvU29ydC5wdXNoKHtcbiAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LFxuICAgICAgICAgIHRhc2tEdWVEYXRlLFxuICAgICAgICAgIHRhc2tQcmlvcml0eUZpbGVuYW1lLFxuICAgICAgfSk7XG4gIH0pO1xuXG4gIC8vIDIuIFNvcnQgdGhlIGRhdGEgYmFzZWQgb24geW91ciBzb3J0aW5nIGNyaXRlcmlhIChlLmcuLCB0YXNrRHVlRGF0ZSBvciB0YXNrUHJpb3JpdHkpXG4gIFxuXG4gIGlmKHNvcnRPcHRpb24gPT09ICdkYXRlJyl7XG4gICAgc29ydEJ5RGF0ZSgpO1xuICB9IGVsc2UgaWYoc29ydE9wdGlvbiA9PT0gJ3ByaW9yaXR5Jyl7XG4gICAgc29ydEJ5UHJpb3JpdHkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNvcnRCeURhdGUoKXtcbiAgICBpZiAoc29ydEJ5RGF0ZU9yZGVyID09PSAnb2xkZXN0Rmlyc3QnKSB7XG4gICAgICBkYXRhVG9Tb3J0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYS50YXNrRHVlRGF0ZSkgLSBuZXcgRGF0ZShiLnRhc2tEdWVEYXRlKTtcbiAgICAgIH0pO1xuICAgICAgc29ydEJ5RGF0ZU9yZGVyID0gJ25ld2VzdEZpcnN0JzsgLy8gVG9nZ2xlIHRvIG5ld2VzdCBkYXRlIGZpcnN0XG4gICAgfSBlbHNlIGlmIChzb3J0QnlEYXRlT3JkZXIgPT09ICduZXdlc3RGaXJzdCcpIHtcbiAgICAgICAgLy8gU29ydCBieSBuZXdlc3QgZGF0ZSBmaXJzdFxuICAgICAgICBkYXRhVG9Tb3J0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShiLnRhc2tEdWVEYXRlKSAtIG5ldyBEYXRlKGEudGFza0R1ZURhdGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgc29ydEJ5RGF0ZU9yZGVyID0gJ29sZGVzdEZpcnN0JzsgLy8gVG9nZ2xlIHRvIG9sZGVzdCBkYXRlIGZpcnN0XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHNvcnRCeURhdGVPcmRlcik7XG4gIH1cblxuICBmdW5jdGlvbiBzb3J0QnlQcmlvcml0eSgpe1xuICAgIGlmKHNvcnRCeVByaW9yaXR5T3JkZXIgPT09J2hpZ2hlc3RGaXJzdCcpe1xuICAgICAgZGF0YVRvU29ydC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIEdldCB0aGUgdGFza1ByaW9yaXR5IGZyb20gdGFza0RhdGEgcHJvcGVydHkgYW5kIGNvbnZlcnQgaXQgdG8gYSBudW1lcmljIHZhbHVlIGZvciBjb21wYXJpc29uXG4gICAgICAgIGNvbnN0IHByaW9yaXR5VmFsdWVBID0gZ2V0UHJpb3JpdHlWYWx1ZShhLnRhc2tQcmlvcml0eUZpbGVuYW1lKTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZUIgPSBnZXRQcmlvcml0eVZhbHVlKGIudGFza1ByaW9yaXR5RmlsZW5hbWUpO1xuICBcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5VmFsdWVCIC0gcHJpb3JpdHlWYWx1ZUE7XG4gICAgICB9KTtcbiAgICAgIHNvcnRCeVByaW9yaXR5T3JkZXIgPSAnbG93ZXN0Rmlyc3QnOyAvLyBUb2dnbGUgdG8gbG93ZXN0IHByaW9yaXJ0eVxuICAgIH0gZWxzZSBpZihzb3J0QnlQcmlvcml0eU9yZGVyID09PSdsb3dlc3RGaXJzdCcpe1xuICAgICAgZGF0YVRvU29ydC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIEdldCB0aGUgdGFza1ByaW9yaXR5IGZyb20gdGFza0RhdGEgcHJvcGVydHkgYW5kIGNvbnZlcnQgaXQgdG8gYSBudW1lcmljIHZhbHVlIGZvciBjb21wYXJpc29uXG4gICAgICAgIGNvbnN0IHByaW9yaXR5VmFsdWVBID0gZ2V0UHJpb3JpdHlWYWx1ZShhLnRhc2tQcmlvcml0eUZpbGVuYW1lKTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZUIgPSBnZXRQcmlvcml0eVZhbHVlKGIudGFza1ByaW9yaXR5RmlsZW5hbWUpO1xuICBcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5VmFsdWVBIC0gcHJpb3JpdHlWYWx1ZUI7XG4gICAgICB9KTtcbiAgICAgIHNvcnRCeVByaW9yaXR5T3JkZXIgPSAnaGlnaGVzdEZpcnN0JzsgLy8gVG9nZ2xlIHRvIGxvd2VzdCBwcmlvcmlydHlcbiAgICB9XG4gICAgY29uc29sZS5sb2coc29ydEJ5UHJpb3JpdHlPcmRlcik7XG5cbiAgICAvL0hlbHBlciBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIGdldFByaW9yaXR5VmFsdWUodGFza1ByaW9yaXR5U3JjKXtcbiAgICAgIHN3aXRjaCAodGFza1ByaW9yaXR5U3JjKSB7XG4gICAgICAgIGNhc2UgXCJ3YXJuaW5nLTMzMy5wbmdcIjpcbiAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICBjYXNlIFwid2FybmluZy0yMjIucG5nXCI6XG4gICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgY2FzZSBcIndhcm5pbmctMTExLnBuZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIGNhc2UgXCJ3YXJuaW5nX2dyZXkucG5nXCI6XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAtMTsgLy8gRGVmYXVsdCB2YWx1ZSBmb3IgdW5kZWZpbmVkIG9yIG90aGVyIHNvdXJjZXNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzLiBSZWluc2VydCB0aGUgc29ydGVkIHRhc2tDb250YWluZXJEaXZzIGludG8gdGhlIHBhcmVudCBjb250YWluZXJcbiAgY29uc3QgcGFyZW50Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5cbiAgLy8gUmVtb3ZlIGFsbCB0YXNrQ29udGFpbmVyRGl2cyBmcm9tIHRoZSBwYXJlbnQgY29udGFpbmVyXG4gIHRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbiAgICBwYXJlbnRDb250YWluZXIucmVtb3ZlQ2hpbGQodGFza0NvbnRhaW5lckRpdik7XG4gIH0pO1xuXG4gIC8vIEFwcGVuZCB0aGUgc29ydGVkIHRhc2tDb250YWluZXJEaXZzIGJhY2sgdG8gdGhlIHBhcmVudCBjb250YWluZXIgaW4gdGhlIGRlc2lyZWQgb3JkZXJcbiAgZGF0YVRvU29ydC5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgcGFyZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGEudGFza0NvbnRhaW5lckRpdik7XG4gIH0pO1xufVxuXG5cbiIsImltcG9ydCB7IFRhc2ssIHRhc2tDb3VudGVyIH0gZnJvbSBcIi4vdGFza0Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudERhdGUsIGZvcm1hdERhdGVGb3JJbnB1dCwgaXNEYXJrQ29sb3IsIHJnYlRvSGV4IH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyB1cGRhdGVQYWdlVGl0bGUsIHVwZGF0ZVBhZ2VUYXNrcywgc29ydH0gZnJvbSBcIi4vZGlzcGxheUZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgQ2F0ZWdvcnksIGNhdGVnb3JpZXMsIGNhdElELCBjdXJyZW50TW9kZSB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5cblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG5jb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCduYXYnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJyk7XG5jb25zdCBjYXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXRNb2RhbCcpO1xuY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3NDb250YWluZXInKTtcbmNvbnN0IGNvbGxhcHNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbGxhcHNlQnRuJyk7XG5jb25zdCBzb3J0T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3J0T3B0aW9ucycpO1xuY29uc3Qgc29ydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3J0QnRuJyk7XG5jb25zdCBkYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGVCdG4nKTtcbmNvbnN0IGltcG9ydGFuY2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0YW5jZUJ0bicpO1xuXG5cbmNvbnN0IGNyZWF0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlVGFzaycpO1xuY29uc3Qgb2tUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rVGFza0J0bicpXG5jb25zdCBjYW5jZWxUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbFRhc2tCdG4nKTtcbmNvbnN0IGRlbGV0ZUJ0bk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZScpO1xuY29uc3QgbmV3Q2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld0NhdEJ0bicpO1xuY29uc3Qgb2tDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tDYXRCdG4nKTtcbmNvbnN0IGNhbmNlbENhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxDYXRCdG4nKTtcbmNvbnN0IGluYm94QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FsbCBJbmJveCcpXG5jb25zdCByZXNwb25zaWJpbGl0aWVzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Jlc3BvbnNpYmlsaXRpZXMnKTtcbmNvbnN0IGV2ZW50c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdFdmVudHMgJiBTb2NpYWwnKTtcbmNvbnN0IHByb2dyYW1taW5nQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Byb2dyYW1taW5nIENvdXJzZScpO1xuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKTtcbmNvbnN0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbmNvbnN0IGFsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxCdG4nKTtcbmNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZGF5QnRuJyk7XG5jb25zdCB0aGlzV2Vla0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzV2Vla0J0bicpO1xuY29uc3QgdGhpc01vbnRoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNNb250aEJ0bicpO1xuY29uc3QgcGFnZVRpbWVsaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaW1lbGluZScpO1xubGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5sZXQgc3BhbkNhdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlQ2F0TW9kYWxcIilbMF07XG5sZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbmxldCBwYWdlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJyk7XG5cbmxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKVxubGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKTtcbmxldCBkdWVEYXRlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpO1xubGV0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKTtcbmxldCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKTtcbmxldCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpO1xubGV0IHRpbWVsaW5lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZUJ0bnMnKTtcblxubGV0IHNlbGVjdGVkQ2F0ZWdvcnkgPSAnQWxsIEluYm94JztcbmxldCBzZWxlY3RlZENhdGVnb3J5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRDYXRlZ29yeSk7XG5sZXQgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG5sZXQgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsQnRuXCIpO1xuXG5jb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG5cbmV4cG9ydCB7XG4gIGNvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLCBzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXkgIFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tFdkxpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgXG4gIGNhbmNlbFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSk7XG5cbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aXRsZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXNzaWduIHByb3BlcnR5IHZhbHVlcyBiYXNlZCBvZmYgaW5wdXRzXG4gICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlPYmplY3QgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gY2F0ZWdvcnlWYWx1ZSk7XG4gICAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGltcG9ydGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBjcmVhdGluZyBhIG5ldyB0YXNrIG9yIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG9uZVxuICAgICAgICAgIGlmICh0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCkge1xuICAgICAgICAgICAgICBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIFxuICAgICAgICB9IGVsc2UgeyB0aXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7IH1cbiAgICAgIFxuICAgIGZ1bmN0aW9uIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBDcmVhdGUgVGFzayBPYmplY3QgXG4gICAgICAgIGxldCBuZXdUYXNrID0gbmV3IFRhc2sodGFza0NvdW50ZXIsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgIFxuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgIFxuICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICBcbiAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgXG4gICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmlvcml0eScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaGVzdFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTMzMy5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiSGlnaFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTIyMi5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByaW9yaXR5U2VsZWN0LnZhbHVlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2Uge3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmdfZ3JleS5wbmdcIn1cbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5SW1nLmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5SW1nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG5CaWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmlkID0gdGFza0lkO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuc3JjID0gXCIuL2ltYWdlcy9kZWxldGUucG5nXCI7IC8vIENoYW5nZSB0byB5b3VyIGRlbGV0ZSBpbWFnZSdzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3N5bWJvbCcpO1xuICAgIFxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tJZCA9IGRlbGV0ZUJ0bkJpZ0Rpdi5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXNrSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSBkZWxldGVUYXNrKHRhc2tJZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZSk7IHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO3Rhc2tCaWdEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuQmlnRGl2KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxpbmVicmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XG4gICAgXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRhc2tCaWdEaXYpO3Rhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobGluZWJyZWFrKTt0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrQ29udGFpbmVyRGl2KTsgICAgXG4gICAgICAgIH0gYWRkVGFza0Rpdih0YXNrSWQsIHRpdGxlLCBjYXRlZ29yeSwgZHVlRGF0ZSwgdGFza0NvdW50ZXIsIHByaW9yaXR5U2VsZWN0KTtcbiAgICAgICAgXG4gICAgICAgIC8vSGVscGVyIEZ1bmN0aW9uXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgIFxuICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IGFsbEJ0bjtcbiAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSBjYXRlZ29yeVNlbGVjdC52YWx1ZTtcbiAgICBzZWxlY3RDYXRGaWx0ZXIoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICB9KTtcblxuICBkZWxldGVCdG5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgXG4gICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgZGVsZXRlVGFzayh0YXNrSWQpO1xuICB9KTsgIC8vIChpbnNpZGUgbW9kYWwpLiBPdXRzaWRlIG1vZGFsIGV2IGxpc3RlbmVyIGlzIGluc2lkZSBhZGRUYXNrRGl2IGV2bGlzdGVuZXIgJ0RlbGV0ZUJ0bkJpZ0RpdidcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBlcnJvciBjbGFzcyB3aGVuIHRoZSB0aXRsZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gIH0pO1xuICBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tJZCkge1xuICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz8nKSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbmNlbHMsIGp1c3QgY2xvc2UgdGhlIG1vZGFsXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgICAgaWYgKCF0YXNrRGl2KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBkaXYgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEZpbmQgdGhlIHRhc2sgb2JqZWN0IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyB0YXNrSWRcbiAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgbGV0IHRhc2tDYXRlZ29yeTtcbiAgICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgIGlmICh0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgIHRhc2tDYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLy8gUmVtb3ZlIHRoZSB0YXNrIGZyb20gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXlcbiAgICAgIHRhc2tDYXRlZ29yeS5yZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpO1xuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0NvdW50ZXJcbiAgICAgIHRhc2tDb3VudGVyLS07XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXIgPSBjYXRlZ29yaWVzLnJlZHVjZSgoY291bnQsIGNhdGVnb3J5KSA9PiBjb3VudCArIGNhdGVnb3J5LnRhc2tzLmxlbmd0aCwgMCk7XG4gIFxuICAgICAgLy8gRGVsZXRlIHRoZSB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBsZXQgdGFza0NvbnRhaW5lckRpdiA9IHRhc2tEaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgdGFza0NvbnRhaW5lckRpdi5yZW1vdmUoKTsgLy8gUmVtb3ZlIHRhc2tDb250YWluZXJEaXZcbiAgXG4gICAgICAvLyBIaWRlIHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBcbiAgICAgIC8vIENsZWFyIHRoZSBlZGl0aW5nVGFza0lkIHNpbmNlIHdlJ3ZlIGp1c3QgZGVsZXRlZCB0aGUgdGFza1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY2F0RXZMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGNhdFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzhhNTliOSc7XG4gICAgICBjb25zb2xlLmxvZyhjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcblxuICAgfSk7XG4gICBva0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcblxuICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ25ldycpIHtcblxuICAgICAgICAgICAvLyBHZXQgdGhlIGNhdGVnb3J5IG5hbWUgYW5kIGNvbG9yIGZyb20gdGhlIGZvcm0gaW5wdXRzXG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICBsZXQgY2F0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcblxuICAgICAgICAgICAvL1NldCBkZWZhdWx0IGNhdCBjb2xvciBwaWNrZXJcbiAgICAgICAgICAgY2F0Q29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGNhdGVnb3J5IGluc3RhbmNlXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeSA9IG5ldyBDYXRlZ29yeShjYXRUaXRsZSwgY2F0Q29sb3IpO1xuICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2gobmV3Q2F0ZWdvcnkpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsaXN0IGl0ZW1cbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlubmVyVGV4dCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uaWQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhdEJ0bnMnKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNhdENvbG9yO1xuICAgICAgICAgICBuZXdCdXR0b24uZGF0YXNldC5jYXRJZCA9IG5ld0NhdGVnb3J5LmNhdElkO1xuICAgXG4gICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihjYXRDb2xvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXJrJyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpZ2h0Jyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICBuZXdDYXRlZ29yeUVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3JpZXNMaXN0JykuYXBwZW5kQ2hpbGQobmV3Q2F0ZWdvcnlFbGVtZW50KTtcbiAgICAgICAgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG4gICAgICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgIC8vUmV0cmlldmUgdGhlIGNhdGVnb3J5IGZyb20gdGhlIGNhdGVnb3JpZXMgYXJyYXkgYmFzZWQgb24gdGhlIGNhdElEXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdElEKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBjYXRJRCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2F0SWQgaXMgbm90IGEgbnVtYmVyIGF0IFtkZXNjcmlwdGlvbiBvZiB0aGUgY29kZSBsb2NhdGlvbl0nLCBjYXRJRCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgbGV0IGVkaXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChjYXQgPT4gY2F0LmNhdElkID09PSBjYXRJRCk7XG4gICAgICAgXG4gICAgICAgICAgIC8vVXBkYXRlIHRoZSBjYXRlZ29yeSB2YWx1ZXNcbiAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5Lm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5jb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgICAgIFxuICAgICAgICAgICAgICAgLy9VcGRhdGUgdGhlIFVJIGVsZW1lbnQgKGJ1dHRvbiBpbiB0aGlzIGNhc2UpIHJlcHJlc2VudGluZyB0aGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgIGxldCBhc3NvY2lhdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW2RhdGEtY2F0LWlkPVwiJHtjYXRJRH1cIl1gKTtcbiAgICAgICAgICAgICAgIGlmIChhc3NvY2lhdGVkQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5pbm5lclRleHQgPSBlZGl0aW5nQ2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVkaXRpbmdDYXRlZ29yeS5jb2xvcjtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGNvbG9yIGJyaWdodG5lc3MgdG8gYWRqdXN0IHRleHQgY29sb3IgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGVkaXRpbmdDYXRlZ29yeS5jb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvL1VwZGF0ZSBwYWdlIHRpdGxlXG4gICAgICAgICAgIHBhZ2VUaXRsZS5pbm5lckhUTUwgPSBjYXRUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgY29uc29sZS5sb2coY29sb3JQaWNrZXIudmFsdWUpO1xuICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgICAgfVxuICAgICAgIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKTtcbiAgIFxuICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgIFxuICAgICAgIC8vIEhlbHBlciBGdW5jdGlvblxuICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKSB7XG4gICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBvcHRpb25zXG4gICAgICAgICAgIGxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpO1xuICAgICAgICAgICB3aGlsZSAoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QucmVtb3ZlQ2hpbGQoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLy8gQWRkIG5ldyBvcHRpb25zIGJhc2VkIG9uIHRoZSBjYXRlZ29yaWVzIGFycmF5XG4gICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgICAgIH0pO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY2FuY2VsQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgICAgXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgY3VycmVudE1vZGUgPSAnZWRpdCc7XG4gICAgICAgb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKTtcbiAgICAgICBmdW5jdGlvbiBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpe1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKTtcbiAgICAgICAgICAgbGV0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbiAgICAgICBcbiAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICBjYXRUaXRsZS52YWx1ZSA9IHBhZ2VUaXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY29sb3JEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBoZXhDb2xvciA9IHJnYlRvSGV4KHJnYkNvbG9yKTtcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9IGhleENvbG9yO1xuICAgIGNvbG9yUGlja2VyLmNsaWNrKCk7XG4gICAgICBcbiAgICB9KTtcbiAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7ICAgICAvLyBXaGVuIHlvdSBwaWNrIGEgY29sb3IsIHVwZGF0ZSB0aGUgZGlzcGxheVxuICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdEZpbHRlcnMoKXtcbiAgc2VsZWN0ZWRDYXRlZ29yeUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG4gIHNlbGVjdGVkVGltZWxpbmVCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKVxuICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gdGltZUZpbHRlckV2TGlzdGVuZXJzKCl7XG4gIC8vVGltZWxpbmUgYnV0dG9ucyBldmVudCBsaXN0ZW5lcnNcbiAgdG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZWN0ZWRUaW1lbGluZSA9IHRvZGF5O1xuICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSB0b2RheUJ0bjtcbiAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmUgPSBvbmVXZWVrTGF0ZXI7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gdGhpc1dlZWtCdG47XG4gICAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIHRoaXNNb250aEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9uZU1vbnRoTGF0ZXIgPSBuZXcgRGF0ZSgpO1xuICAgICAgb25lTW9udGhMYXRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDMwKTtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmUgPSBvbmVNb250aExhdGVyO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IHRoaXNNb250aEJ0bjtcbiAgICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgYWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG51bGw7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gYWxsQnRuO1xuICAgICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjYXRGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1Jlc2VsZWN0IGNhdGVnb3J5IGJ1dHRvbnMgdG8gcGljayB1cCBhbnkgbmV3bHkgYWRkZWQgb25lICBcbiAgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTsgXG4gIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChjYXRCdG4pID0+IHtcbiAgICBjYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gU2V0IHNlbGVjdGVkQ2F0ZWdvcnkgdG8gdGhlIGNsaWNrZWQgYnV0dG9uJ3MgdGV4dCBjb250ZW50XG4gICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB9KTtcbiAgfSk7IFxufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlTZXR0aW5ncygpe1xuICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBOYXYgQ29sbGFwc2UgJiBFeHBhbmRcbiAgICAgIGNvbnN0IG5hdkRpc3BsYXlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdikuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gc2NyZWVuV2lkdGggPCA3NTA7XG4gICAgXG4gICAgICBpZiAoaXNTbWFsbFNjcmVlbikge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIDMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMi8zJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcyNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyB0YXNrIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn07XG5cbmZ1bmN0aW9uIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KXtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCBjYXRlZ29yeSBidXR0b25zXG4gICAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcblxuICAgIC8vIEdldCBhbmQgYWRkICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgdG8gdGhlIGNsaWNrZWQgYnV0dG9uXG4gICAgc2VsZWN0ZWRDYXRlZ29yeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKTtcblxuICAgIC8vIFVwZGF0ZSBQYWdlXG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICByZXR1cm4gc2VsZWN0ZWRDYXRlZ29yeUJ0bjtcbn1cblxuZnVuY3Rpb24gc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKXtcbiAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCB0aW1lbGluZSBidXR0b25zXG4gICAgdGltZWxpbmVCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBQYWdlXG4gICAgdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICAgIHVwZGF0ZVBhZ2VUYXNrcyhzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICBcbiAgICBzZWxlY3RlZFRpbWVsaW5lQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgcmV0dXJuIHNlbGVjdGVkVGltZWxpbmVCdG47XG59XG5cbnNvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpZihzb3J0T3B0aW9ucy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpe1xuICAgIHNvcnRPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgc29ydEJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4IDVweCAwcHggMHB4JztcblxuICAgIH1lbHNlIHtcbiAgICAgICAgc29ydE9wdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgXG4gICAgICAgIHNvcnRCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJyc7XG4gICAgfVxufSk7XG5cbmRhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBzb3J0KCdkYXRlJyk7XG59KTtcblxuaW1wb3J0YW5jZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIHNvcnQoJ3ByaW9yaXR5Jyk7XG59KTtcbiIsImltcG9ydCB7Y2F0ZWdvcnlCdXR0b25zfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IHRhc2tDb3VudGVyIH0gZnJvbSAnLi90YXNrRnVuY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvciwgY2F0SWQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhdElkID0gY2F0SWQgfHwgKytsYXN0Q2F0SWQ7XG4gICAgfVxuICAgIGFkZFRhc2tUb0NhdCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgLy8gU2V0IHRoZSB0YXNrJ3MgSUQgdG8gbWF0Y2ggdGhlIGNvcnJlY3QgY291bnRlciB2YWx1ZVxuICAgICAgICB0YXNrLmlkID0gdGFza0NvdW50ZXI7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgfVxuICAgIHJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCkge1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH1cbn1cblxubGV0IGxhc3RDYXRJZCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnRuID0+IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmNhdElkKSkpO1xubGV0IGRlZmF1bHRDYXRlZ29yaWVzID0gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCk7XG5sZXQgY2F0ZWdvcmllcyA9IFsuLi5kZWZhdWx0Q2F0ZWdvcmllc107IFxuXG4vL0NoZWNrcyBpZiB3ZSBhcmUgZWRkaXRpbmcgb3IgY3JlYXRpbmcgYSBuZXcgY2F0ICBcbmxldCBjdXJyZW50TW9kZSA9IG51bGw7XG5sZXQgY2F0SUQ7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpIHtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllc0RpdiBidXR0b24nKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnV0dG9uID0+IHtcbiAgICAgICAgbGV0IGNhdElkID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuY2F0SWQpOyBcbiAgICAgICAgaWYgKGNhdElkID4gbGFzdENhdElkKSBsYXN0Q2F0SWQgPSBjYXRJZDtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShidXR0b24udGV4dENvbnRlbnQudHJpbSgpLCBudWxsLCBjYXRJZCk7IC8vIFBhc3NpbmcgY2F0SWQgdG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn0gXG5cbmV4cG9ydCB7Y2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlfTsiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5cbmxldCB0YXNrQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdFxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlOyBcbiAgICB9XG4gICAgdG9nZ2xlQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSAhdGhpcy5jb21wbGV0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7dGFza0NvdW50ZXJ9O1xuXG5cbiIsImltcG9ydCB7VGFza30gZnJvbScuL3Rhc2tGdW5jdGlvbnMnO1xuaW1wb3J0IHtDYXRlZ29yeX0gZnJvbScuL2NhdGVnb3J5RnVuY3Rpb25zJztcbmltcG9ydCB7dGFza0V2TGlzdGVuZXJzLCBzZXREZWZhdWx0RmlsdGVycywgdGltZUZpbHRlckV2TGlzdGVuZXJzLCBjYXRGaWx0ZXJFdkxpc3RlbmVycyxjYXRFdkxpc3RlbmVycywgZGlzcGxheVNldHRpbmdzfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7Y29udGVudCwgbmF2LG1vZGFsLHNwYW4sY2F0TW9kYWwsc3BhbkNhdE1vZGFsLHRhc2tzQ29udGFpbmVyLGZvcm0scGFnZVRpdGxlLGNvbGxhcHNlQnRuLGNyZWF0ZVRhc2tCdG4sb2tUYXNrQnRuLGNhbmNlbFRhc2tCdG4sZGVsZXRlQnRuTW9kYWwsbmV3Q2F0QnRuLG9rQ2F0QnRuLGNhbmNlbENhdEJ0bixpbmJveEJ0bixyZXNwb25zaWJpbGl0aWVzQnRuLGV2ZW50c0J0bixwcm9ncmFtbWluZ0J0bix0aXRsZUlucHV0LGNhdGVnb3J5U2VsZWN0LGR1ZURhdGVTZWxlY3QscHJpb3JpdHlTZWxlY3QsZGVzY3JpcHRpb25JbnB1dCxjYXRlZ29yeUJ1dHRvbnMsYWxsQnRuLCB0b2RheUJ0biwgdGhpc1dlZWtCdG4sIHRoaXNNb250aEJ0biwgcGFnZVRpbWVsaW5lLCBjb2xvclBpY2tlciwgY29sb3JEaXNwbGF5fSBmcm9tICcuL2RvbUVsZW1lbnRzJztcblxudGFza0V2TGlzdGVuZXJzKCk7XG5jYXRFdkxpc3RlbmVycygpO1xuc2V0RGVmYXVsdEZpbHRlcnMoKTtcbnRpbWVGaWx0ZXJFdkxpc3RlbmVycygpO1xuY2F0RmlsdGVyRXZMaXN0ZW5lcnMoKTtcbmRpc3BsYXlTZXR0aW5ncygpO1xuXG4iXSwibmFtZXMiOlsiaXNEYXJrQ29sb3IiLCJjb2xvciIsInJnYiIsInN0YXJ0c1dpdGgiLCJyIiwicGFyc2VJbnQiLCJzbGljZSIsImciLCJiIiwidmFsdWVzIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwic3BsaXQiLCJicmlnaHRuZXNzIiwiTWF0aCIsInJvdW5kIiwiY29uc29sZSIsImxvZyIsImZvcm1hdERhdGVGb3JJbnB1dCIsImRhdGVTdHJpbmciLCJkYXRlIiwiRGF0ZSIsIm9mZnNldCIsImdldFRpbWV6b25lT2Zmc2V0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwidXBkYXRlUGFnZVRpdGxlIiwic2VsZWN0ZWRDYXRlZ29yeUJ0biIsInBhZ2VUaXRsZSIsInRleHRDb250ZW50Iiwic2VsZWN0ZWRDYXRCdG4iLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiYmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsImZvbnRDb2xvciIsInN0eWxlIiwiZGF0YXNldCIsImNhdElkIiwidXBkYXRlUGFnZVRhc2tzIiwic2VsZWN0ZWRUaW1lbGluZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidGFza0NvbnRhaW5lckRpdiIsInRhc2siLCJ0YXNrSWQiLCJjYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJ0YXNrcyIsImZpbmQiLCJpZCIsImdldFRhc2tCeUlkIiwicXVlcnlTZWxlY3RvciIsInRhc2tEdWVEYXRlIiwiZHVlRGF0ZSIsInNldEhvdXJzIiwidGFza0NhdGVnb3J5IiwibmFtZSIsImRpc3BsYXkiLCJzb3J0QnlEYXRlT3JkZXIiLCJzb3J0QnlQcmlvcml0eU9yZGVyIiwic29ydCIsInNvcnRPcHRpb24iLCJ0YXNrQ29udGFpbmVyRGl2cyIsImRhdGFUb1NvcnQiLCJ0YXNrUHJpb3JpdHkiLCJzcmMiLCJ0YXNrUHJpb3JpdHlGaWxlbmFtZSIsImxhc3RJbmRleE9mIiwicHVzaCIsImEiLCJnZXRQcmlvcml0eVZhbHVlIiwidGFza1ByaW9yaXR5U3JjIiwicHJpb3JpdHlWYWx1ZUEiLCJzb3J0QnlQcmlvcml0eSIsInBhcmVudENvbnRhaW5lciIsInJlbW92ZUNoaWxkIiwiZGF0YSIsImFwcGVuZENoaWxkIiwiY29udGVudCIsIm5hdiIsIm1vZGFsIiwiY2F0TW9kYWwiLCJ0YXNrc0NvbnRhaW5lciIsImNvbGxhcHNlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJzb3J0T3B0aW9ucyIsInNvcnRCdG4iLCJkYXRlQnRuIiwiaW1wb3J0YW5jZUJ0biIsImNyZWF0ZVRhc2tCdG4iLCJva1Rhc2tCdG4iLCJjYW5jZWxUYXNrQnRuIiwiZGVsZXRlQnRuTW9kYWwiLCJuZXdDYXRCdG4iLCJva0NhdEJ0biIsImNhbmNlbENhdEJ0biIsImNvbG9yUGlja2VyIiwiY29sb3JEaXNwbGF5IiwiYWxsQnRuIiwidG9kYXlCdG4iLCJ0aGlzV2Vla0J0biIsInRoaXNNb250aEJ0biIsInBhZ2VUaW1lbGluZSIsInNwYW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3BhbkNhdE1vZGFsIiwidGl0bGVJbnB1dCIsImNhdGVnb3J5U2VsZWN0IiwiZHVlRGF0ZVNlbGVjdCIsInByaW9yaXR5U2VsZWN0IiwiZGVzY3JpcHRpb25JbnB1dCIsImNhdGVnb3J5QnV0dG9ucyIsInRpbWVsaW5lQnV0dG9ucyIsInNlbGVjdGVkVGltZWxpbmVCdG4iLCJ0b2RheSIsImdldEN1cnJlbnREYXRlIiwic2VsZWN0Q2F0RmlsdGVyIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwic2VsZWN0VGltZUZpbHRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3JkZXJSYWRpdXMiLCJDYXRlZ29yeSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImxhc3RDYXRJZCIsImFkZFRhc2tUb0NhdCIsInRhc2tDb3VudGVyIiwicmVtb3ZlVGFza0Zyb21DYXQiLCJmaWx0ZXIiLCJjYXRJRCIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiZXJyb3IiLCJyZWR1Y2UiLCJjb3VudCIsInBhcmVudE5vZGUiLCJ2YWx1ZSIsImRkIiwibW0iLCJ5eXl5IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlcG9ydFZhbGlkaXR5IiwiY2F0ZWdvcnlWYWx1ZSIsImltcG9ydGFuY2UiLCJ1bmRlZmluZWQiLCJlZGl0VGFzayIsIm5ld1Rhc2siLCJjcmVhdGVFbGVtZW50Iiwib3BlblRhc2tNb2RhbEZvckVkaXRpbmciLCJ0YXNrQmlnRGl2IiwidGFza1ByaW0iLCJjaGVja2JveCIsInR5cGUiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja2VkIiwidGFza1RpdGxlIiwidGFza1NlYyIsInRhc2tQcmlvcml0eUltZyIsImRlbGV0ZUJ0bkJpZ0RpdiIsImxpbmVicmVhayIsImFkZFRhc2tEaXYiLCJhZGRUYXNrIiwidGFza0V2TGlzdGVuZXJzIiwiY2F0VGl0bGUiLCJjYXRDb2xvciIsIm5ld0NhdGVnb3J5IiwibmV3Q2F0ZWdvcnlFbGVtZW50IiwibmV3QnV0dG9uIiwiaW5uZXJUZXh0IiwiaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzIiwiZWRpdGluZ0NhdGVnb3J5IiwiY2F0IiwiYXNzb2NpYXRlZEJ1dHRvbiIsImlubmVySFRNTCIsImZpcnN0Q2hpbGQiLCJvcHRpb24iLCJ1cGRhdGVDYXRlZ29yeURyb3Bkb3duIiwib3BlbkNhdE1vZGFsRm9yRWRpdGluZyIsImhleENvbG9yIiwibWF0Y2giLCJ0b1N0cmluZyIsInJnYlRvSGV4IiwiY2xpY2siLCJiYWNrZ3JvdW5kIiwib25lV2Vla0xhdGVyIiwic2V0RGF0ZSIsIm9uZU1vbnRoTGF0ZXIiLCJjYXRCdG4iLCJuYXZEaXNwbGF5U3R5bGUiLCJpbm5lcldpZHRoIiwiekluZGV4IiwiZ3JpZENvbHVtbiIsIm9uY2xpY2siLCJ0YXJnZXQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9