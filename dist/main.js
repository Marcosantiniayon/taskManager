(()=>{"use strict";function e(){const e=new Date;return e.setHours(0,0,0,0),e}function t(e){let t;return t=e.startsWith("#")?{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)}:e,Math.round((299*t.r+587*t.g+114*t.b)/1e3)<170}function n(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function l(e){let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l}function o(){thisWeekBtn.classList.remove("selectedFilter"),thisMonthBtn.classList.remove("selectedFilter"),allBtn.classList.remove("selectedFilter"),todayBtn.classList.remove("selectedFilter")}function s(e,t,l){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of _){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(n(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==t&&a.name!==t?l.style.display="none":l.style.display="block"})),pageTitle.textContent=t,pageTitle.dataset.catId=l}const a=document.querySelector(".content"),d=document.querySelector("nav"),i=document.querySelector("#modal"),c=document.querySelector("#catModal"),r=document.querySelector(".tasksContainer"),u=document.getElementById("collapseBtn"),m=document.getElementById("createTask"),g=document.getElementById("okTaskBtn"),y=document.getElementById("cancelTaskBtn"),p=document.getElementById("delete"),k=document.getElementById("newCatBtn"),v=document.getElementById("okCatBtn"),E=document.getElementById("cancelCatBtn"),f=(document.getElementById("inboxBtn"),document.getElementById("responsibilitiesBtn"),document.getElementById("eventsBtn"),document.getElementById("programmingBtn"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),h=document.getElementById("allBtn"),C=document.getElementById("todayBtn"),B=document.getElementById("thisWeekBtn"),L=document.getElementById("thisMonthBtn"),b=document.getElementById("pageTimeline");let w=document.getElementsByClassName("close")[0],D=document.getElementsByClassName("closeCatModal")[0],x=document.querySelector("form"),T=document.getElementById("pageTitle"),S=document.getElementById("title"),F=document.getElementById("category"),q=document.getElementById("dueDate"),M=document.getElementById("priority"),A=document.getElementById("description"),N=document.querySelectorAll(".catBtns"),$="All Inbox",H=e();class P{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++W}addTaskToCat(e){this.tasks.push(e),e.id=V,V++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let z,W=Math.max(...Array.from(N).map((e=>parseInt(e.dataset.catId)))),Y=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>W&&(W=t),new P(e.textContent.trim(),null,t)}))}(),_=[...Y],O=null,V=0;class j{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return i.style.display="none",void delete S.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete S.dataset.editingTaskId;for(let l of _)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),V--,V=_.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),i.style.display="none",delete S.dataset.editingTaskId}m.addEventListener("click",(function(){S.value="",F.value="All Inbox";let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,q.value=e,M.value="Low",A.value="",i.style.display="block"})),y.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none"})),g.addEventListener("click",(function(t){if(document.querySelector("form").reportValidity()){t.preventDefault(),S.classList.remove("error");let l=document.getElementById("title").value,o=document.getElementById("category").value,a=document.getElementById("category").value,d=_.find((e=>e.name===a)),c=document.getElementById("dueDate").value,u=document.getElementById("priority").value,m=document.getElementById("description").value;S.dataset.editingTaskId?function(e,t,l,o,a){let d,c=S.dataset.editingTaskId;for(let e of _)if(d=e.tasks.find((e=>e.id==c)),d)break;if(void 0===d)return void console.error(`No task found with id ${c}`);d.title=e,d.category=t,d.dueDate=l,d.priority=o,d.description=a,console.log("editing task, title: "+e+" id: "+c);let r=document.getElementById(c);r.querySelector(".taskTitle").textContent=e,r.querySelector(".taskCategory").textContent=`(${t.name})`,r.querySelector(".taskDueDate").textContent=n(l),r.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete S.dataset.editingTaskId,i.style.display="none",s(H,$)}(l,d,c,u,m):function(t,l,o,a,d,c){let u=new j(V,t,o,a,d,c);V++,console.log(o),o.addTaskToCat(u);let m=u.id;const g=document.createElement("div");function y(e){console.log(e),S.value=e.title,F.value=e.category.name,q.value=e.dueDate,M.value=e.priority,A.value=e.description,S.dataset.editingTaskId=e.id,i.style.display="block"}g.classList.add("taskContainerDiv"),function(t,l,o,s,a,d){const i=document.createElement("div");i.classList.add("taskBigDiv");const c=document.createElement("div");c.classList.add("taskDiv"),c.id=t,c.dataset.taskId=t,c.addEventListener("click",(function(){y(u)}));const m=document.createElement("div");m.classList.add("taskPrim"),c.appendChild(m);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),f.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),f.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",m.appendChild(p),m.appendChild(k),m.appendChild(v);const E=document.createElement("div");E.classList.add("taskSec"),c.appendChild(E);const f=document.createElement("div");f.classList.add("taskDueDate"),f.textContent=n(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=t,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),E.appendChild(f),E.appendChild(I),i.appendChild(c),i.appendChild(C);const B=document.createElement("hr");g.appendChild(i),g.appendChild(B),r.appendChild(g)}(m,t,l,a,0,M),s(H,$)}(l,o,d,c,u,m),i.style.display="none"}else S.classList.add("error")})),p.addEventListener("click",(function(t){t.stopPropagation();let n=S.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),S.addEventListener("input",(function(){this.classList.remove("error")}))}(),k.addEventListener("click",(function(){O="new",c.style.display="block"})),v.addEventListener("click",(function(e){if(e.preventDefault(),"new"===O){let e=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value,l=new Category(e,n);_.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=e,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,t(n)?s.style.color="white":s.style.color="black",o.appendChild(s),document.getElementById("categoriesList").appendChild(o)}else if("edit"===O){console.log(z),"number"!=typeof z&&console.error("catId is not a number at [description of the code location]",z);let e=_.find((e=>e.catId===z));if(e){e.name=document.getElementById("catTitle").value,e.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${z}"]`);n&&(n.innerText=e.name,n.style.backgroundColor=e.color,t(e.color)?(n.style.color="white",T.style.color="white"):n.style.color="black")}else console.error("Could not find category with ID:",z);T.innerHTML=catTitle.value,T.style.backgroundColor=f.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);_.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),c.style.display="none"})),E.addEventListener("click",(function(){})),T.addEventListener("click",(function(){console.log(this.dataset.catId),z=parseInt(this.dataset.catId),O="edit",function(e,t){console.log("Editing category with ID:",t),console.log(e.style.backgroundColor);let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,c.style.display="block"}(T,z)})),I.addEventListener("click",(function(){console.log(I.style.backgroundColor);let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);I.style.background=e,f.value=e,f.click()})),f.addEventListener("input",(function(){I.style.background=f.value})),function(){let e=document.getElementById("inboxBtn");e.classList.add("selectedFilter"),l(e),document.getElementById("allBtn").classList.add("selectedFilter")}(),C.addEventListener("click",(function(){const t=e();H=t,s(H,$),o(),C.classList.add("selectedFilter"),b.textContent=this.textContent})),B.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+7),H=n,s(H,$),o(),B.classList.add("selectedFilter"),b.textContent=this.textContent})),L.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+30),H=n,s(H,$),o(),L.classList.add("selectedFilter"),b.textContent=this.textContent})),h.addEventListener("click",(function(){H=null,s(H,$),o(),h.classList.add("selectedFilter"),b.textContent=this.textContent,h.classList.add("selectedFilter")})),N.forEach((e=>{e.addEventListener("click",(function(){N.forEach((e=>{e.classList.remove("selectedFilter")})),this.classList.add("selectedFilter"),$=this.textContent,z=parseInt(this.dataset.catId),l(this),s(H,$,z)}))})),u.addEventListener("click",(function(){const e=window.getComputedStyle(d).display;window.innerWidth<750?"none"===e?(d.style.display="block",d.style.zIndex="2",a.style.gridColumn="1 / 3",a.classList.add("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png"):"none"===e?(d.style.display="block",d.style.zIndex="",a.style.gridColumn="2/3",a.classList.remove("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png")})),w.onclick=function(){i.style.display="none",delete S.dataset.editingTaskId},D.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target==i?i.style.display="none":e.target==c&&(c.style.display="none")},x.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),g.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTWdLLE9BQVMsR0FDbkIvSCxFQUFRakMsTUFBTWlLLFdBQWEsTUFDM0JoSSxFQUFROUIsVUFBVUMsT0FBTyxXQUN6QmtDLEVBQVlzRSxJQUFNLDJCQUdsQjFFLEVBQUlsQyxNQUFNOEIsUUFBVSxPQUNwQkksRUFBSWxDLE1BQU1nSyxPQUFTLEdBQ25CL0gsRUFBUWpDLE1BQU1pSyxXQUFhLFNBQzNCaEksRUFBUTlCLFVBQVVDLE9BQU8sV0FDekJzRixRQUFRaUIsSUFBSSxVQUNackUsRUFBWXNFLElBQU0sdUJBSXhCLElBQ0YxRCxFQUFLZ0gsUUFBVSxXQUNYL0gsRUFBTW5DLE1BQU04QixRQUFVLGNBQ2Z1QixFQUFXNUIsUUFBUThELGFBQzlCLEVBQ0FuQyxFQUFhOEcsUUFBVSxXQUNuQjlILEVBQVNwQyxNQUFNOEIsUUFBVSxNQUM3QixFQUNBcEMsT0FBT3dLLFFBQVUsU0FBUzdELEdBQ2xCQSxFQUFNOEQsUUFBVWhJLEVBQ2xCQSxFQUFNbkMsTUFBTThCLFFBQVUsT0FDZHVFLEVBQU04RCxRQUFVL0gsSUFDdEJBLEVBQVNwQyxNQUFNOEIsUUFBVSxPQUVqQyxFQUNBLEVBQUtrRSxpQkFBaUIsV0FBVyxTQUFTSyxHQUNwQixVQUFkQSxFQUFNK0QsTUFDTi9ELEVBQU1DLGlCQUNON0QsRUFBVStHLFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgLy8gQ29udmVydCBoZXggY29sb3IgdG8gcmdiXG4gIGxldCByZ2I7XG4gIGlmIChjb2xvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgIGxldCByID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMSwgMyksIDE2KTtcbiAgICAgIGxldCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgIGxldCBiID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgIHJnYiA9IHsgciwgZywgYiB9O1xuICB9IGVsc2Uge1xuICAgICAgLy8gQXNzdW1lIGl0J3MgYWxyZWFkeSBhbiByZ2IgY29sb3JcbiAgICAgIHJnYiA9IGNvbG9yO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGJyaWdodG5lc3Mgb24gYSBzY2FsZSBmcm9tIDAgdG8gMjU1XG4gIGxldCBicmlnaHRuZXNzID0gTWF0aC5yb3VuZCgoKHJnYi5yICogMjk5KSArIChyZ2IuZyAqIDU4NykgKyAocmdiLmIgKiAxMTQpKSAvIDEwMDApO1xuICBcbiAgcmV0dXJuIGJyaWdodG5lc3MgPCAxNzA7IC8vIFJldHVybiB0cnVlIGlmIHRoZSBjb2xvciBpcyBkYXJrXG59XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvcklucHV0KGRhdGVTdHJpbmcpIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICBjb25zdCBvZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7IC8vIEdldCB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgb2Zmc2V0KTsgLy8gQWRqdXN0IHRoZSBkYXRlIGJ5IHRoZSB0aW1lem9uZSBvZmZzZXRcbiAgY29uc3QgbW0gPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgZGQgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIHJldHVybiBgJHttbX0vJHtkZH0vJHt5eXl5fWA7XG59XG5leHBvcnQgZnVuY3Rpb24gcmdiVG9IZXgocmdiKSB7XG4gIC8vIFNlcGFyYXRlIFJHQiB2YWx1ZXNcbiAgbGV0IHZhbHVlcyA9IHJnYi5tYXRjaCgvXnJnYlxcKChcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKylcXCkkLyk7XG5cbiAgLy8gQ29udmVydCBlYWNoIHZhbHVlIHRvIGhleGFkZWNpbWFsXG4gIGxldCBoZXhDb2xvciA9IFwiI1wiICsgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzFdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1szXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuXG4gIHJldHVybiBoZXhDb2xvcjtcbn1cbiAgIiwiaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9ySW5wdXQgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclBhZ2VDaGFuZ2VzKGN1cnJlbnRDYXRlZ29yeSl7XG4gICAgbGV0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Q2F0ZWdvcnkpO1xuICAgIGxldCBiZ0NvbG9yID0gY29tcHV0ZWRTdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgbGV0IGZvbnRDb2xvciA9IGNvbXB1dGVkU3R5bGUuY29sb3I7XG4gICAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XG4gICAgcGFnZVRpdGxlLnN0eWxlLmNvbG9yID0gZm9udENvbG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsdGVycygpe1xuICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdGhpc01vbnRoQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgYWxsQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdG9kYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoZW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSwgY2F0SUQpIHtcbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRhc2tDb250YWluZXJEaXYgZWxlbWVudHMgYW5kIGNoZWNrIHRoZWlyIHRhc2tzJyBkdWUgZGF0ZXNcbiAgICBjb25zdCBhbGxUYXNrQ29udGFpbmVyRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrQ29udGFpbmVyRGl2Jyk7XG4gICAgYWxsVGFza0NvbnRhaW5lckRpdnMuZm9yRWFjaCgodGFza0NvbnRhaW5lckRpdikgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRGl2ID0gdGFza0NvbnRhaW5lckRpdi5xdWVyeVNlbGVjdG9yKCcudGFza0RpdicpOyAvLyBHZXQgdGhlIHRhc2tEaXYgaW5zaWRlIHRoZSBjdXJyZW50IHRhc2tDb250YWluZXJEaXZcbiAgICAgICAgY29uc3QgdGFza0lkID0gdGFza0Rpdi5kYXRhc2V0LnRhc2tJZDtcbiAgICAgICAgY29uc3QgdGFzayA9IGdldFRhc2tCeUlkKHRhc2tJZCk7IC8vIFJldHJpZXZlIHRoZSB0YXNrIG9iamVjdCBieSBJRFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIGVuZERhdGVcbiAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSBuZXcgRGF0ZShmb3JtYXREYXRlRm9ySW5wdXQodGFzay5kdWVEYXRlKSk7XG4gICAgICAgIHRhc2tEdWVEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgY2F0ZWdvcnkgbWF0Y2hlcyB0aGUgc2VsZWN0ZWQgY2F0ZWdvcnlcbiAgICAgICAgY29uc3QgdGFza0NhdGVnb3J5ID0gdGFzay5jYXRlZ29yeTtcblxuICAgICAgICBpZiAoKGVuZERhdGUgPT09IG51bGwgfHwgdGFza0R1ZURhdGUgPD0gZW5kRGF0ZSkgJiYgKHNlbGVjdGVkQ2F0ZWdvcnkgPT09IFwiQWxsIEluYm94XCIgfHwgdGFza0NhdGVnb3J5Lm5hbWUgPT09IHNlbGVjdGVkQ2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAvLyBTaG93IHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgZW5kRGF0ZSwgYW5kIGNhdGVnb3J5IG1hdGNoZXNcbiAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBIaWRlIHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBvdXRzaWRlIHRoZSByYW5nZSBvciBjYXRlZ29yeSBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUYXNrQnlJZCh0YXNrSWQpIHtcbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNhdGVnb3J5XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdGFzayBpbiB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheSB3aXRoIHRoZSBtYXRjaGluZyBJRFxuICAgICAgICAgICAgICBjb25zdCB0YXNrID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrOyAvLyBSZXR1cm4gdGhlIHRhc2sgaWYgZm91bmRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIHRhc2sgd2l0aCB0aGUgZ2l2ZW4gSUQgaXMgZm91bmRcbiAgICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL2FwcGx5IHBhZ2UgdGl0bGUgYmFzZWQgb24gY2F0ZWdyeVxuICAgIHBhZ2VUaXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgcGFnZVRpdGxlLmRhdGFzZXQuY2F0SWQgPSBjYXRJRDtcbiAgfTsiLCJpbXBvcnQgeyBUYXNrLCB0YXNrQ291bnRlciB9IGZyb20gXCIuL3Rhc2tGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnREYXRlLCBmb3JtYXREYXRlRm9ySW5wdXQsIGlzRGFya0NvbG9yLCByZ2JUb0hleCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZmlsdGVyUGFnZUNoYW5nZXMsIHJlbW92ZUZpbHRlcnMsIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkgfSBmcm9tIFwiLi9kaXNwbGF5RnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGUgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbmF2Jyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xuY29uc3QgY2F0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0TW9kYWwnKTtcbmNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5jb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsYXBzZUJ0bicpO1xuY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVUYXNrJyk7XG5jb25zdCBva1Rhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tUYXNrQnRuJylcbmNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsVGFza0J0bicpO1xuY29uc3QgZGVsZXRlQnRuTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlJyk7XG5jb25zdCBuZXdDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3Q2F0QnRuJyk7XG5jb25zdCBva0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva0NhdEJ0bicpO1xuY29uc3QgY2FuY2VsQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbENhdEJ0bicpO1xuY29uc3QgaW5ib3hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5ib3hCdG4nKVxuY29uc3QgcmVzcG9uc2liaWxpdGllc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNwb25zaWJpbGl0aWVzQnRuJyk7XG5jb25zdCBldmVudHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXZlbnRzQnRuJyk7XG5jb25zdCBwcm9ncmFtbWluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmFtbWluZ0J0bicpO1xuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKTtcbmNvbnN0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbmNvbnN0IGFsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxCdG4nKTtcbmNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZGF5QnRuJyk7XG5jb25zdCB0aGlzV2Vla0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzV2Vla0J0bicpO1xuY29uc3QgdGhpc01vbnRoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNNb250aEJ0bicpO1xuY29uc3QgcGFnZVRpbWVsaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaW1lbGluZScpO1xubGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5sZXQgc3BhbkNhdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlQ2F0TW9kYWxcIilbMF07XG5sZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbmxldCBwYWdlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJyk7XG5cbmxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKVxubGV0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKTtcbmxldCBkdWVEYXRlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpO1xubGV0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKTtcbmxldCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKTtcbmxldCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpO1xuXG5sZXQgc2VsZWN0ZWRDYXRlZ29yeSA9IFwiQWxsIEluYm94XCI7XG5sZXQgc2VsZWN0ZWRFbmREYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcblxuZXhwb3J0IHtcbiAgY29udGVudCwgbmF2LG1vZGFsLHNwYW4sY2F0TW9kYWwsIHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheSAgXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IFwiQWxsIEluYm94XCI7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgY2FuY2VsVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gc3VibWl0dGluZ1xuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9KTtcbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpLnJlcG9ydFZhbGlkaXR5KCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBc3NpZ24gcHJvcGVydHkgdmFsdWVzIGJhc2VkIG9mZiBpbnB1dHNcbiAgICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGNhdGVnb3J5VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeU9iamVjdCA9IGNhdGVnb3JpZXMuZmluZChjYXRlZ29yeSA9PiBjYXRlZ29yeS5uYW1lID09PSBjYXRlZ29yeVZhbHVlKTtcbiAgICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgaW1wb3J0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS52YWx1ZTtcbiAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGNyZWF0aW5nIGEgbmV3IHRhc2sgb3IgdXBkYXRpbmcgYW4gZXhpc3Rpbmcgb25lXG4gICAgICAgICAgaWYgKHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkKSB7XG4gICAgICAgICAgICAgIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG4gICAgICAgICAgfSBlbHNlIHsgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOyB9XG4gICAgICBcbiAgICAgICAgICBmdW5jdGlvbiBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIFRhc2sgT2JqZWN0IFxuICAgICAgICAgICAgICBsZXQgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tDb3VudGVyLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coY2F0ZWdvcnlPYmplY3QpO1xuICAgICAgICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlJbWcuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbWcpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkJpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpOyB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgdGFza0JpZ0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTt0YXNrQmlnRGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkJpZ0Rpdik7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYnJlYWsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0YXNrQmlnRGl2KTt0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGxpbmVicmVhayk7dGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lckRpdik7ICAgIFxuICAgICAgICAgICAgICB9IGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgICAgICAgIH1cbiAgfSk7XG4gIGRlbGV0ZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICBcbiAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGVUYXNrKHRhc2tJZCk7XG4gIH0pOyAgLy8gKGluc2lkZSBtb2RhbCkuIE91dHNpZGUgbW9kYWwgZXYgbGlzdGVuZXIgaXMgaW5zaWRlIGFkZFRhc2tEaXYgZXZsaXN0ZW5lciAnRGVsZXRlQnRuQmlnRGl2J1xuICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVycm9yIGNsYXNzIHdoZW4gdGhlIHRpdGxlIGlucHV0IHZhbHVlIGNoYW5nZXNcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrPycpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FuY2VscywganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICBpZiAoIXRhc2tEaXYpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGRpdiBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgdGFzayBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIHRhc2tJZFxuICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICBsZXQgdGFza0NhdGVnb3J5O1xuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgaWYgKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgdGFza0NhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBSZW1vdmUgdGhlIHRhc2sgZnJvbSB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheVxuICAgICAgdGFza0NhdGVnb3J5LnJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCk7XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXItLTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlciA9IGNhdGVnb3JpZXMucmVkdWNlKChjb3VudCwgY2F0ZWdvcnkpID0+IGNvdW50ICsgY2F0ZWdvcnkudGFza3MubGVuZ3RoLCAwKTtcbiAgXG4gICAgICAvLyBEZWxldGUgdGhlIHRhc2tDb250YWluZXJEaXZcbiAgICAgIGxldCB0YXNrQ29udGFpbmVyRGl2ID0gdGFza0Rpdi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICB0YXNrQ29udGFpbmVyRGl2LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGFza0NvbnRhaW5lckRpdlxuICBcbiAgICAgIC8vIEhpZGUgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgICAgLy8gQ2xlYXIgdGhlIGVkaXRpbmdUYXNrSWQgc2luY2Ugd2UndmUganVzdCBkZWxldGVkIHRoZSB0YXNrXG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgIH0pO1xuICAgb2tDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG4gICBcbiAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgIC8vIEdldCB0aGUgY2F0ZWdvcnkgbmFtZSBhbmQgY29sb3IgZnJvbSB0aGUgZm9ybSBpbnB1dHNcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgIGxldCBjYXRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBjYXRlZ29yeSBpbnN0YW5jZVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoY2F0VGl0bGUsIGNhdENvbG9yKTtcbiAgICAgICAgICAgY2F0ZWdvcmllcy5wdXNoKG5ld0NhdGVnb3J5KTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGlzdCBpdGVtXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICBsZXQgbmV3QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pbm5lclRleHQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhdEJ0bnMnKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNhdENvbG9yO1xuICAgICAgICAgICBuZXdCdXR0b24uZGF0YXNldC5jYXRJZCA9IG5ld0NhdGVnb3J5LmNhdElkO1xuICAgXG4gICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihjYXRDb2xvcikpIHtcbiAgICAgICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgIG5ld0NhdGVnb3J5RWxlbWVudC5hcHBlbmRDaGlsZChuZXdCdXR0b24pO1xuICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yaWVzTGlzdCcpLmFwcGVuZENoaWxkKG5ld0NhdGVnb3J5RWxlbWVudCk7XG4gICAgICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgIC8vUmV0cmlldmUgdGhlIGNhdGVnb3J5IGZyb20gdGhlIGNhdGVnb3JpZXMgYXJyYXkgYmFzZWQgb24gdGhlIGNhdElEXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdElEKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBjYXRJRCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2F0SWQgaXMgbm90IGEgbnVtYmVyIGF0IFtkZXNjcmlwdGlvbiBvZiB0aGUgY29kZSBsb2NhdGlvbl0nLCBjYXRJRCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgbGV0IGVkaXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChjYXQgPT4gY2F0LmNhdElkID09PSBjYXRJRCk7XG4gICAgICAgXG4gICAgICAgICAgIC8vVXBkYXRlIHRoZSBjYXRlZ29yeSB2YWx1ZXNcbiAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5Lm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5jb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgICAgIFxuICAgICAgICAgICAgICAgLy9VcGRhdGUgdGhlIFVJIGVsZW1lbnQgKGJ1dHRvbiBpbiB0aGlzIGNhc2UpIHJlcHJlc2VudGluZyB0aGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgIGxldCBhc3NvY2lhdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW2RhdGEtY2F0LWlkPVwiJHtjYXRJRH1cIl1gKTtcbiAgICAgICAgICAgICAgIGlmIChhc3NvY2lhdGVkQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5pbm5lclRleHQgPSBlZGl0aW5nQ2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVkaXRpbmdDYXRlZ29yeS5jb2xvcjtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGNvbG9yIGJyaWdodG5lc3MgdG8gYWRqdXN0IHRleHQgY29sb3IgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGVkaXRpbmdDYXRlZ29yeS5jb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvL1VwZGF0ZSBwYWdlIHRpdGxlXG4gICAgICAgICAgIHBhZ2VUaXRsZS5pbm5lckhUTUwgPSBjYXRUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgICAgIH1cbiAgICAgICB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCk7XG4gICAgICAvLyAgZmlsdGVyQnRuc0V2TGlzdGVuZXJzKCk7XG4gICBcbiAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICBcbiAgICAgICBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCkge1xuICAgICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3Rpbmcgb3B0aW9uc1xuICAgICAgICAgICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnknKTtcbiAgICAgICAgICAgd2hpbGUgKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnJlbW92ZUNoaWxkKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC8vIEFkZCBuZXcgb3B0aW9ucyBiYXNlZCBvbiB0aGUgY2F0ZWdvcmllcyBhcnJheVxuICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICB9KTtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNhbmNlbENhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAgICBcbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFzZXQuY2F0SWQpO1xuICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICBjdXJyZW50TW9kZSA9ICdlZGl0JztcbiAgICAgICBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpO1xuICAgICAgIGZ1bmN0aW9uIG9wZW5DYXRNb2RhbEZvckVkaXRpbmcocGFnZVRpdGxlLCBjYXRJRCl7XG4gICBcbiAgICAgICAgICAgY29uc29sZS5sb2coJ0VkaXRpbmcgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICBcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJyk7XG4gICAgICAgICAgIGxldCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG4gICAgICAgXG4gICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBpbnB1dHMgdG8gdGhlIHRhc2sncyB2YWx1ZXNcbiAgICAgICAgICAgY2F0VGl0bGUudmFsdWUgPSBwYWdlVGl0bGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBcbiAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNvbG9yRGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuXG4gICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBoZXhDb2xvciA9IHJnYlRvSGV4KHJnYkNvbG9yKTtcbiAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9IGhleENvbG9yO1xuICAgIGNvbG9yUGlja2VyLnZhbHVlID0gaGV4Q29sb3I7XG5cbiAgICBcbiAgICBjb2xvclBpY2tlci5jbGljaygpO1xuICAgICAgXG4gICAgfSk7XG4gICBjb2xvclBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgeyAgICAgLy8gV2hlbiB5b3UgcGljayBhIGNvbG9yLCB1cGRhdGUgdGhlIGRpc3BsYXlcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpe1xuICBsZXQgY3VycmVudENhdGVnb3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luYm94QnRuJyk7XG4gIGN1cnJlbnRDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG4gIGZpbHRlclBhZ2VDaGFuZ2VzKGN1cnJlbnRDYXRlZ29yeSk7XG4gIGxldCBjdXJyZW50VGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG4gIGN1cnJlbnRUaW1lbGluZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgc2VsZWN0ZWRFbmREYXRlID0gdG9kYXk7XG4gICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICB0b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gb25lTW9udGhMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG51bGw7XG4gICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSlcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuXG4gIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGNhdEJ0bikgPT4ge1xuICAgIGNhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCBjYXRlZ29yeSBidXR0b25zXG4gICAgICAgIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIC8vIEFkZCAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIHRvIHRoZSBjbGlja2VkIGJ1dHRvblxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gIFxuICAgICAgICAvLyBTZXQgc2VsZWN0ZWRDYXRlZ29yeSB0byB0aGUgY2xpY2tlZCBidXR0b24ncyB0ZXh0IGNvbnRlbnRcbiAgICAgICAgc2VsZWN0ZWRDYXRlZ29yeSA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgXG4gICAgICAgIC8vIFNldCBzdHlsaW5nIHRvIHBhZ2UgdGl0bGVcbiAgICAgICAgZmlsdGVyUGFnZUNoYW5nZXModGhpcyk7XG4gICAgICAgIC8vIEFwcGx5IHRoZSBmaWx0ZXJcbiAgICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnksIGNhdElEKTtcbiAgICB9KTtcbiAgfSk7IFxufVxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEaXNwbGF5U2V0dGluZ3MoKXtcbiAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgLy8gTmF2IENvbGxhcHNlICYgRXhwYW5kXG4gICAgICBjb25zdCBuYXZEaXNwbGF5U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShuYXYpLmRpc3BsYXk7XG4gICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY29uc3QgaXNTbWFsbFNjcmVlbiA9IHNjcmVlbldpZHRoIDwgNzUwO1xuICAgIFxuICAgICAgaWYgKGlzU21hbGxTY3JlZW4pIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnMic7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAzJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuYXZEaXNwbGF5U3R5bGUgPT09ICdub25lJykge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzIvMyc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMjQwcHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kJyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEycHgnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIHNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyAvLyBDbG9zZXMgbW9kYWwgb24gY2xpY2tpbmcgWFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9OyBcbiAgc3BhbkNhdE1vZGFsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgLy8gQ2xvc2VzIGNhdG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSAgICAgXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgLy8gQ2xvc2VzIE1vZGFscyB3aGVuIGNsaWNraW5nIG91dHNpZGUgb2YgaXQgXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH0gZWxzZSBpZihldmVudC50YXJnZXQgPT0gY2F0TW9kYWwpIHtcbiAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH1cbiAgfVxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkgeyAvLyBFbnRlciBhY3RzIGFzIGEgY2xpY2tcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IFxuICAgICAgICAgIG9rVGFza0J0bi5jbGljaygpOyBcbiAgICAgIH1cbiAgfSk7XG4gIFxufVxuXG5cblxuIiwiaW1wb3J0IHtjYXRlZ29yeUJ1dHRvbnN9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHsgdGFza0NvdW50ZXIgfSBmcm9tICcuL3Rhc2tGdW5jdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgQ2F0ZWdvcnkge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbG9yLCBjYXRJZCA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY2F0SWQgPSBjYXRJZCB8fCArK2xhc3RDYXRJZDtcbiAgICB9XG4gICAgYWRkVGFza1RvQ2F0KHRhc2spIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAvLyBTZXQgdGhlIHRhc2sncyBJRCB0byBtYXRjaCB0aGUgY29ycmVjdCBjb3VudGVyIHZhbHVlXG4gICAgICAgIHRhc2suaWQgPSB0YXNrQ291bnRlcjtcbiAgICAgICAgdGFza0NvdW50ZXIrKztcbiAgICB9XG4gICAgcmVtb3ZlVGFza0Zyb21DYXQodGFza0lkKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gICAgfVxufVxuXG5sZXQgbGFzdENhdElkID0gTWF0aC5tYXgoLi4uQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidG4gPT4gcGFyc2VJbnQoYnRuLmRhdGFzZXQuY2F0SWQpKSk7XG5sZXQgZGVmYXVsdENhdGVnb3JpZXMgPSBpbml0aWFsaXplRGVmYXVsdENhdGVnb3JpZXMoKTtcbmxldCBjYXRlZ29yaWVzID0gWy4uLmRlZmF1bHRDYXRlZ29yaWVzXTsgXG5cbi8vQ2hlY2tzIGlmIHdlIGFyZSBlZGRpdGluZyBvciBjcmVhdGluZyBhIG5ldyBjYXQgIFxubGV0IGN1cnJlbnRNb2RlID0gbnVsbDtcbmxldCBjYXRJRDtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCkge1xuICAgIGNvbnN0IGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzRGl2IGJ1dHRvbicpO1xuICAgIGxldCBjYXRlZ29yaWVzID0gQXJyYXkuZnJvbShjYXRlZ29yeUJ1dHRvbnMpLm1hcChidXR0b24gPT4ge1xuICAgICAgICBsZXQgY2F0SWQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5jYXRJZCk7IFxuICAgICAgICBpZiAoY2F0SWQgPiBsYXN0Q2F0SWQpIGxhc3RDYXRJZCA9IGNhdElkO1xuICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KGJ1dHRvbi50ZXh0Q29udGVudC50cmltKCksIG51bGwsIGNhdElkKTsgLy8gUGFzc2luZyBjYXRJZCB0byB0aGUgY29uc3RydWN0b3JcbiAgICB9KTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufSBcblxuZXhwb3J0IHtjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGV9OyIsImltcG9ydCB7IGNhdGVnb3JpZXMgfSBmcm9tICcuL2NhdGVnb3J5RnVuY3Rpb25zJztcblxubGV0IHRhc2tDb3VudGVyID0gMDtcblxuZXhwb3J0IGNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIHByaW9yaXR5LCBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5T2JqZWN0XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7IFxuICAgIH1cbiAgICB0b2dnbGVDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9ICF0aGlzLmNvbXBsZXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IHt0YXNrQ291bnRlcn07XG5cblxuIiwiaW1wb3J0IHtUYXNrfSBmcm9tJy4vdGFza0Z1bmN0aW9ucyc7XG5pbXBvcnQge0NhdGVnb3J5fSBmcm9tJy4vY2F0ZWdvcnlGdW5jdGlvbnMnO1xuaW1wb3J0IHtpbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMsIGluaXRpYWxpemVEZWZhdWx0RmlsdGVycywgaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzLCBpbml0aWFsaXplRGlzcGxheVNldHRpbmdzIH0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQge2NvbnRlbnQsIG5hdixtb2RhbCxzcGFuLGNhdE1vZGFsLHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheX0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG4vLyBsZXQgdGFza0NvdW50ZXIgPSAwO1xuXG5pbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpO1xuaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycygpO1xuaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplRGlzcGxheVNldHRpbmdzKCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ0FURUdPUklFUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iXSwibmFtZXMiOlsiZ2V0Q3VycmVudERhdGUiLCJ0b2RheSIsIkRhdGUiLCJzZXRIb3VycyIsImlzRGFya0NvbG9yIiwiY29sb3IiLCJyZ2IiLCJzdGFydHNXaXRoIiwiciIsInBhcnNlSW50Iiwic2xpY2UiLCJnIiwiYiIsIk1hdGgiLCJyb3VuZCIsImZvcm1hdERhdGVGb3JJbnB1dCIsImRhdGVTdHJpbmciLCJkYXRlIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJmaWx0ZXJQYWdlQ2hhbmdlcyIsImN1cnJlbnRDYXRlZ29yeSIsImNvbXB1dGVkU3R5bGUiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiYmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsImZvbnRDb2xvciIsInBhZ2VUaXRsZSIsInN0eWxlIiwicmVtb3ZlRmlsdGVycyIsInRoaXNXZWVrQnRuIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGhpc01vbnRoQnRuIiwiYWxsQnRuIiwidG9kYXlCdG4iLCJmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5IiwiZW5kRGF0ZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrQ29udGFpbmVyRGl2IiwidGFzayIsInRhc2tJZCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRhc2tzIiwiZmluZCIsImlkIiwiZ2V0VGFza0J5SWQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YXNldCIsInRhc2tEdWVEYXRlIiwiZHVlRGF0ZSIsInRhc2tDYXRlZ29yeSIsIm5hbWUiLCJkaXNwbGF5IiwidGV4dENvbnRlbnQiLCJjYXRJZCIsImNvbnRlbnQiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJzZWxlY3RlZEVuZERhdGUiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJsYXN0Q2F0SWQiLCJhZGRUYXNrVG9DYXQiLCJwdXNoIiwidGFza0NvdW50ZXIiLCJyZW1vdmVUYXNrRnJvbUNhdCIsImZpbHRlciIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwiYnV0dG9uIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiY29uc29sZSIsImVycm9yIiwicmVkdWNlIiwiY291bnQiLCJsZW5ndGgiLCJwYXJlbnROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiZGQiLCJtbSIsInl5eXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwb3J0VmFsaWRpdHkiLCJjYXRlZ29yeVZhbHVlIiwiaW1wb3J0YW5jZSIsInVuZGVmaW5lZCIsImxvZyIsInNyYyIsImVkaXRUYXNrIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuVGFza01vZGFsRm9yRWRpdGluZyIsImFkZCIsInRhc2tCaWdEaXYiLCJ0YXNrUHJpbSIsImFwcGVuZENoaWxkIiwiY2hlY2tib3giLCJ0eXBlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hlY2tlZCIsInRhc2tUaXRsZSIsInRhc2tQcmlvcml0eSIsInRhc2tTZWMiLCJ0YXNrUHJpb3JpdHlJbWciLCJkZWxldGVCdG5CaWdEaXYiLCJsaW5lYnJlYWsiLCJhZGRUYXNrRGl2IiwiYWRkVGFzayIsImluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMiLCJjYXRUaXRsZSIsImNhdENvbG9yIiwibmV3Q2F0ZWdvcnkiLCJDYXRlZ29yeSIsIm5ld0NhdGVnb3J5RWxlbWVudCIsIm5ld0J1dHRvbiIsImlubmVyVGV4dCIsImVkaXRpbmdDYXRlZ29yeSIsImNhdCIsImFzc29jaWF0ZWRCdXR0b24iLCJpbm5lckhUTUwiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJvcHRpb24iLCJ1cGRhdGVDYXRlZ29yeURyb3Bkb3duIiwib3BlbkNhdE1vZGFsRm9yRWRpdGluZyIsImhleENvbG9yIiwidmFsdWVzIiwibWF0Y2giLCJ0b1N0cmluZyIsInJnYlRvSGV4IiwiYmFja2dyb3VuZCIsImNsaWNrIiwiaW5pdGlhbGl6ZURlZmF1bHRGaWx0ZXJzIiwib25lV2Vla0xhdGVyIiwic2V0RGF0ZSIsIm9uZU1vbnRoTGF0ZXIiLCJjYXRCdG4iLCJuYXZEaXNwbGF5U3R5bGUiLCJpbm5lcldpZHRoIiwiekluZGV4IiwiZ3JpZENvbHVtbiIsIm9uY2xpY2siLCJ0YXJnZXQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9