(()=>{"use strict";function e(){const e=new Date;return e.setHours(0,0,0,0),e}function t(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function n(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function l(e){let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l}function o(){thisWeekBtn.classList.remove("selectedFilter"),thisMonthBtn.classList.remove("selectedFilter"),allBtn.classList.remove("selectedFilter"),todayBtn.classList.remove("selectedFilter")}function s(e,t,l){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of V){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(n(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==t&&a.name!==t?l.style.display="none":l.style.display="block"})),pageTitle.textContent=t,pageTitle.dataset.catId=l}const a=document.querySelector(".content"),d=document.querySelector("nav"),i=document.querySelector("#modal"),c=document.querySelector("#catModal"),r=document.querySelector(".tasksContainer"),u=document.getElementById("collapseBtn"),m=document.getElementById("createTask"),g=document.getElementById("okTaskBtn"),y=document.getElementById("cancelTaskBtn"),p=document.getElementById("delete"),k=document.getElementById("newCatBtn"),v=document.getElementById("okCatBtn"),f=document.getElementById("cancelCatBtn"),E=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),I=document.getElementById("colorDisplay"),h=document.getElementById("allBtn"),C=document.getElementById("todayBtn"),B=document.getElementById("thisWeekBtn"),L=document.getElementById("thisMonthBtn"),b=document.getElementById("pageTimeline");let D=document.getElementsByClassName("close")[0],w=document.getElementsByClassName("closeCatModal")[0],x=document.querySelector("form"),T=document.getElementById("pageTitle"),S=document.getElementById("title"),q=document.getElementById("category"),F=document.getElementById("dueDate"),M=document.getElementById("priority"),A=document.getElementById("description"),N=document.querySelectorAll(".catBtns"),P="All Inbox",$=document.getElementById(P),H=null;function z(){N=document.querySelectorAll(".catBtns"),N.forEach((e=>{e.addEventListener("click",(function(){P=this.textContent,_=parseInt(this.dataset.catId),W(P),l(this),s(H,P,_)}))}))}function W(e){return N.forEach((e=>{e.classList.remove("selectedFilter")})),$=document.getElementById(e),$.classList.add("selectedFilter"),$}class Y{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++O}addTaskToCat(e){this.tasks.push(e),e.id=G,G++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let _,O=Math.max(...Array.from(N).map((e=>parseInt(e.dataset.catId)))),R=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>O&&(O=t),new Y(e.textContent.trim(),null,t)}))}(),V=[...R],j=null,G=0;class J{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return i.style.display="none",void delete S.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete S.dataset.editingTaskId;for(let l of V)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),G--,G=V.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),i.style.display="none",delete S.dataset.editingTaskId}m.addEventListener("click",(function(){S.value="",q.value="All Inbox";let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,F.value=e,M.value="Low",A.value="",i.style.display="block"})),y.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none"})),g.addEventListener("click",(function(t){if(document.querySelector("form").reportValidity()){t.preventDefault(),S.classList.remove("error");let l=document.getElementById("title").value,o=document.getElementById("category").value,a=document.getElementById("category").value,d=V.find((e=>e.name===a)),c=document.getElementById("dueDate").value,u=document.getElementById("priority").value,m=document.getElementById("description").value;S.dataset.editingTaskId?function(e,t,l,o,a){let d,c=S.dataset.editingTaskId;for(let e of V)if(d=e.tasks.find((e=>e.id==c)),d)break;if(void 0===d)return void console.error(`No task found with id ${c}`);d.title=e,d.category=t,d.dueDate=l,d.priority=o,d.description=a,console.log("editing task, title: "+e+" id: "+c);let r=document.getElementById(c);r.querySelector(".taskTitle").textContent=e,r.querySelector(".taskCategory").textContent=`(${t.name})`,r.querySelector(".taskDueDate").textContent=n(l),r.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete S.dataset.editingTaskId,i.style.display="none",s(H,P)}(l,d,c,u,m):function(t,l,o,a,d,c){let u=new J(G,t,o,a,d,c);G++,console.log(o),o.addTaskToCat(u);let m=u.id;const g=document.createElement("div");function y(e){console.log(e),S.value=e.title,q.value=e.category.name,F.value=e.dueDate,M.value=e.priority,A.value=e.description,S.dataset.editingTaskId=e.id,i.style.display="block"}g.classList.add("taskContainerDiv"),function(t,l,o,s,a,d){const i=document.createElement("div");i.classList.add("taskBigDiv");const c=document.createElement("div");c.classList.add("taskDiv"),c.id=t,c.dataset.taskId=t,c.addEventListener("click",(function(){y(u)}));const m=document.createElement("div");m.classList.add("taskPrim"),c.appendChild(m);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),E.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),E.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",m.appendChild(p),m.appendChild(k),m.appendChild(v);const f=document.createElement("div");f.classList.add("taskSec"),c.appendChild(f);const E=document.createElement("div");E.classList.add("taskDueDate"),E.textContent=n(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=t,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),f.appendChild(E),f.appendChild(I),i.appendChild(c),i.appendChild(C);const B=document.createElement("hr");g.appendChild(i),g.appendChild(B),r.appendChild(g)}(m,t,l,a,0,M),s(H,P)}(l,o,d,c,u,m),i.style.display="none"}else S.classList.add("error");P=q.value,W(P),console.log($),s(H,P),l($)})),p.addEventListener("click",(function(t){t.stopPropagation();let n=S.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),S.addEventListener("input",(function(){this.classList.remove("error")}))}(),k.addEventListener("click",(function(){j="new",c.style.display="block",catTitle.value="",I.style.backgroundColor="#8a59b9",console.log(I.style.backgroundColor)})),v.addEventListener("click",(function(e){if(e.preventDefault(),"new"===j){let e=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=I.style.backgroundColor,console.log(n);let l=new Y(e,n);V.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=e,s.id=e,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,t(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),o.appendChild(s),document.getElementById("categoriesList").appendChild(o),z()}else if("edit"===j){console.log(_),"number"!=typeof _&&console.error("catId is not a number at [description of the code location]",_);let e=V.find((e=>e.catId===_));if(e){e.name=document.getElementById("catTitle").value,e.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${_}"]`);n&&(n.innerText=e.name,n.style.backgroundColor=e.color,t(e.color)?(n.style.color="white",T.style.color="white",console.log(T.style.color)):(n.style.color="black",T.style.color="black",console.log(T.style.color)))}else console.error("Could not find category with ID:",_);T.innerHTML=catTitle.value,console.log(E.value),T.style.backgroundColor=E.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);V.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),c.style.display="none"})),f.addEventListener("click",(function(e){e.preventDefault(),c.style.display="none"})),T.addEventListener("click",(function(){_=parseInt(this.dataset.catId),j="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,c.style.display="block"}(T)})),I.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(I.style.backgroundColor);E.value=e,E.click()})),E.addEventListener("input",(function(){I.style.background=E.value})),$.classList.add("selectedFilter"),l($),document.getElementById("allBtn").classList.add("selectedFilter"),C.addEventListener("click",(function(){const t=e();H=t,s(H,P),o(),C.classList.add("selectedFilter"),b.textContent=this.textContent})),B.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+7),H=n,s(H,P),o(),B.classList.add("selectedFilter"),b.textContent=this.textContent})),L.addEventListener("click",(function(){const t=e(),n=new Date;n.setDate(t.getDate()+30),H=n,s(H,P),o(),L.classList.add("selectedFilter"),b.textContent=this.textContent})),h.addEventListener("click",(function(){H=null,s(H,P),o(),h.classList.add("selectedFilter"),b.textContent=this.textContent,h.classList.add("selectedFilter")})),z(),u.addEventListener("click",(function(){const e=window.getComputedStyle(d).display;window.innerWidth<750?"none"===e?(d.style.display="block",d.style.zIndex="2",a.style.gridColumn="1 / 3",a.classList.add("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png"):"none"===e?(d.style.display="block",d.style.zIndex="",a.style.gridColumn="2/3",a.classList.remove("overlay"),u.src="./images/collapse3.png"):(d.style.display="none",d.style.zIndex="",a.style.gridColumn="1 / -1",a.classList.remove("overlay"),console.log("expand"),u.src="./images/expand3.png")})),D.onclick=function(){i.style.display="none",delete S.dataset.editingTaskId},w.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target==i?i.style.display="none":e.target==c&&(c.style.display="none")},x.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),g.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUUsSUFBTSx1QkFJeEIsSUFDRjdELEVBQUs4RyxRQUFVLFdBQ1g3SCxFQUFNbkMsTUFBTThCLFFBQVUsY0FDZnVCLEVBQVc1QixRQUFRcUUsYUFDOUIsRUFDQTFDLEVBQWE0RyxRQUFVLFdBQ25CNUgsRUFBU3BDLE1BQU04QixRQUFVLE1BQzdCLEVBQ0FwQyxPQUFPc0ssUUFBVSxTQUFTdkQsR0FDbEJBLEVBQU13RCxRQUFVOUgsRUFDbEJBLEVBQU1uQyxNQUFNOEIsUUFBVSxPQUNkMkUsRUFBTXdELFFBQVU3SCxJQUN0QkEsRUFBU3BDLE1BQU04QixRQUFVLE9BRWpDLEVBQ0EsRUFBS2lDLGlCQUFpQixXQUFXLFNBQVMwQyxHQUNwQixVQUFkQSxFQUFNeUQsTUFDTnpELEVBQU1DLGlCQUNOakUsRUFBVThHLFFBRWxCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9oZWxwZXJGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kb21FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9jYXRlZ29yeUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy90YXNrRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2luZGV4My5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKXsgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyBTZXQgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgdG8gMCB0byBjb21wYXJlIG9ubHkgdGhlIGRhdGVzXG4gICAgcmV0dXJuIHRvZGF5O1xuICB9XG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrQ29sb3IoY29sb3IpIHtcbiAgbGV0IHJnYjtcbiAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgbGV0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgbGV0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgbGV0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgcmdiID0geyByLCBnLCBiIH07XG4gIH0gZWxzZSBpZiAoY29sb3Iuc3RhcnRzV2l0aCgncmdiKCcpKSB7XG4gICAgLy8gRXh0cmFjdCBSR0IgdmFsdWVzIGZyb20gYW4gUkdCIHN0cmluZ1xuICAgIGxldCB2YWx1ZXMgPSBjb2xvci5zdWJzdHJpbmcoNCwgY29sb3IubGVuZ3RoIC0gMSkuc3BsaXQoJywnKTtcbiAgICBsZXQgciA9IHBhcnNlSW50KHZhbHVlc1swXSwgMTApO1xuICAgIGxldCBnID0gcGFyc2VJbnQodmFsdWVzWzFdLCAxMCk7XG4gICAgbGV0IGIgPSBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKTtcbiAgICByZ2IgPSB7IHIsIGcsIGIgfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBicmlnaHRuZXNzIG9uIGEgc2NhbGUgZnJvbSAwIHRvIDI1NVxuICBsZXQgYnJpZ2h0bmVzcyA9IE1hdGgucm91bmQoKChyZ2IuciAqIDI5OSkgKyAocmdiLmcgKiA1ODcpICsgKHJnYi5iICogMTE0KSkgLyAxMDAwKTtcbiAgY29uc29sZS5sb2coYnJpZ2h0bmVzcyk7XG4gIHJldHVybiBicmlnaHRuZXNzIDwgMTcwOyAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29sb3IgaXMgZGFya1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JJbnB1dChkYXRlU3RyaW5nKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgY29uc3Qgb2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyAvLyBHZXQgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzXG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG9mZnNldCk7IC8vIEFkanVzdCB0aGUgZGF0ZSBieSB0aGUgdGltZXpvbmUgb2Zmc2V0XG4gIGNvbnN0IG1tID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRkID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCB5eXl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gYCR7bW19LyR7ZGR9LyR7eXl5eX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAvLyBTZXBhcmF0ZSBSR0IgdmFsdWVzXG4gIGxldCB2YWx1ZXMgPSByZ2IubWF0Y2goL15yZ2JcXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspXFwpJC8pO1xuXG4gIC8vIENvbnZlcnQgZWFjaCB2YWx1ZSB0byBoZXhhZGVjaW1hbFxuICBsZXQgaGV4Q29sb3IgPSBcIiNcIiArIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1sxXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzJdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbM10sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIGhleENvbG9yO1xufVxuICAiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSBcIi4vY2F0ZWdvcnlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JJbnB1dCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuLy8gaW1wb3J0IHsgY3VycmVudENhdGVnb3J5IH0gZnJvbSBcIi4vZG9tRWxlbWVudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclBhZ2VDaGFuZ2VzKGNhdGVnb3J5QnV0dG9uKXtcbiAgICBsZXQgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhdGVnb3J5QnV0dG9uKTtcbiAgICBsZXQgYmdDb2xvciA9IGNvbXB1dGVkU3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBmb250Q29sb3IgPSBjb21wdXRlZFN0eWxlLmNvbG9yO1xuICAgIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9IGZvbnRDb2xvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbHRlcnMoKXtcbiAgICB0aGlzV2Vla0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIGFsbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHRvZGF5QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KGVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnksIGNhdElEKSB7XG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0YXNrQ29udGFpbmVyRGl2IGVsZW1lbnRzIGFuZCBjaGVjayB0aGVpciB0YXNrcycgZHVlIGRhdGVzXG4gICAgY29uc3QgYWxsVGFza0NvbnRhaW5lckRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFza0NvbnRhaW5lckRpdicpO1xuICAgIGFsbFRhc2tDb250YWluZXJEaXZzLmZvckVhY2goKHRhc2tDb250YWluZXJEaXYpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0RpdiA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEaXYnKTsgLy8gR2V0IHRoZSB0YXNrRGl2IGluc2lkZSB0aGUgY3VycmVudCB0YXNrQ29udGFpbmVyRGl2XG4gICAgICAgIGNvbnN0IHRhc2tJZCA9IHRhc2tEaXYuZGF0YXNldC50YXNrSWQ7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBnZXRUYXNrQnlJZCh0YXNrSWQpOyAvLyBSZXRyaWV2ZSB0aGUgdGFzayBvYmplY3QgYnkgSURcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFzaydzIGR1ZSBkYXRlIGlzIGJldHdlZW4gc3RhcnREYXRlIGFuZCBlbmREYXRlXG4gICAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gbmV3IERhdGUoZm9ybWF0RGF0ZUZvcklucHV0KHRhc2suZHVlRGF0ZSkpO1xuICAgICAgICB0YXNrRHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFzaydzIGNhdGVnb3J5IG1hdGNoZXMgdGhlIHNlbGVjdGVkIGNhdGVnb3J5XG4gICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IHRhc2suY2F0ZWdvcnk7XG5cbiAgICAgICAgaWYgKChlbmREYXRlID09PSBudWxsIHx8IHRhc2tEdWVEYXRlIDw9IGVuZERhdGUpICYmIChzZWxlY3RlZENhdGVnb3J5ID09PSBcIkFsbCBJbmJveFwiIHx8IHRhc2tDYXRlZ29yeS5uYW1lID09PSBzZWxlY3RlZENhdGVnb3J5KSkge1xuICAgICAgICAgICAgLy8gU2hvdyB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIGVuZERhdGUsIGFuZCBjYXRlZ29yeSBtYXRjaGVzXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSGlkZSB0aGUgdGFza0NvbnRhaW5lckRpdiBpZiBpdHMgZHVlIGRhdGUgaXMgb3V0c2lkZSB0aGUgcmFuZ2Ugb3IgY2F0ZWdvcnkgZG9lc24ndCBtYXRjaFxuICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGFza0J5SWQodGFza0lkKSB7XG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXRlZ29yeVxuICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhc2sgaW4gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXkgd2l0aCB0aGUgbWF0Y2hpbmcgSURcbiAgICAgICAgICAgICAgY29uc3QgdGFzayA9IGNhdGVnb3J5LnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzazsgLy8gUmV0dXJuIHRoZSB0YXNrIGlmIGZvdW5kXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCBpZiBubyB0YXNrIHdpdGggdGhlIGdpdmVuIElEIGlzIGZvdW5kXG4gICAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9hcHBseSBwYWdlIHRpdGxlIGJhc2VkIG9uIGNhdGVncnlcbiAgICBwYWdlVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZENhdGVnb3J5O1xuICAgIHBhZ2VUaXRsZS5kYXRhc2V0LmNhdElkID0gY2F0SUQ7XG4gIH07IiwiaW1wb3J0IHsgVGFzaywgdGFza0NvdW50ZXIgfSBmcm9tIFwiLi90YXNrRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50RGF0ZSwgZm9ybWF0RGF0ZUZvcklucHV0LCBpc0RhcmtDb2xvciwgcmdiVG9IZXggfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGZpbHRlclBhZ2VDaGFuZ2VzLCByZW1vdmVGaWx0ZXJzLCBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5IH0gZnJvbSBcIi4vZGlzcGxheUZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgQ2F0ZWdvcnksIGNhdGVnb3JpZXMsIGNhdElELCBjdXJyZW50TW9kZSB9IGZyb20gXCIuL2NhdGVnb3J5RnVuY3Rpb25zXCI7XG5cblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG5jb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCduYXYnKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJyk7XG5jb25zdCBjYXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXRNb2RhbCcpO1xuY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3NDb250YWluZXInKTtcbmNvbnN0IGNvbGxhcHNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbGxhcHNlQnRuJyk7XG5jb25zdCBjcmVhdGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZVRhc2snKTtcbmNvbnN0IG9rVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva1Rhc2tCdG4nKVxuY29uc3QgY2FuY2VsVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxUYXNrQnRuJyk7XG5jb25zdCBkZWxldGVCdG5Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcbmNvbnN0IG5ld0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdDYXRCdG4nKTtcbmNvbnN0IG9rQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29rQ2F0QnRuJyk7XG5jb25zdCBjYW5jZWxDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsQ2F0QnRuJyk7XG5jb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbGwgSW5ib3gnKVxuY29uc3QgcmVzcG9uc2liaWxpdGllc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSZXNwb25zaWJpbGl0aWVzJyk7XG5jb25zdCBldmVudHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRXZlbnRzICYgU29jaWFsJyk7XG5jb25zdCBwcm9ncmFtbWluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9ncmFtbWluZyBDb3Vyc2UnKTtcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJyk7XG5jb25zdCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG5jb25zdCBhbGxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG5jb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheUJ0bicpO1xuY29uc3QgdGhpc1dlZWtCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc1dlZWtCdG4nKTtcbmNvbnN0IHRoaXNNb250aEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzTW9udGhCdG4nKTtcbmNvbnN0IHBhZ2VUaW1lbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGltZWxpbmUnKTtcbmxldCBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xubGV0IHNwYW5DYXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZUNhdE1vZGFsXCIpWzBdO1xubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5sZXQgcGFnZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpO1xuXG5sZXQgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIilcbmxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIik7XG5sZXQgZHVlRGF0ZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKTtcbmxldCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIik7XG5sZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG5sZXQgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTtcblxubGV0IHNlbGVjdGVkQ2F0ZWdvcnkgPSAnQWxsIEluYm94JztcbmxldCBzZWxlY3RlZENhdGVnb3J5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRDYXRlZ29yeSk7XG5sZXQgc2VsZWN0ZWRFbmREYXRlID0gbnVsbDtcblxuZXhwb3J0IHtcbiAgY29udGVudCwgbmF2LG1vZGFsLHNwYW4sY2F0TW9kYWwsIHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheSAgXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IFwiQWxsIEluYm94XCI7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgXG4gIGNhbmNlbFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSk7XG5cbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aXRsZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXNzaWduIHByb3BlcnR5IHZhbHVlcyBiYXNlZCBvZmYgaW5wdXRzXG4gICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlPYmplY3QgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gY2F0ZWdvcnlWYWx1ZSk7XG4gICAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGltcG9ydGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBjcmVhdGluZyBhIG5ldyB0YXNrIG9yIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG9uZVxuICAgICAgICAgIGlmICh0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCkge1xuICAgICAgICAgICAgICBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIFxuICAgICAgICB9IGVsc2UgeyB0aXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7IH1cbiAgICAgIFxuICAgIGZ1bmN0aW9uIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBDcmVhdGUgVGFzayBPYmplY3QgXG4gICAgICAgIGxldCBuZXdUYXNrID0gbmV3IFRhc2sodGFza0NvdW50ZXIsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgIFxuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBjb25zb2xlLmxvZyhjYXRlZ29yeU9iamVjdCk7XG4gICAgICAgIGNhdGVnb3J5T2JqZWN0LmFkZFRhc2tUb0NhdChuZXdUYXNrKTtcbiAgICAgICAgbGV0IHRhc2tJZCA9IG5ld1Rhc2suaWRcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRhaW5lciBkaXYgZm9yIHRoZSB0YXNrIGFuZCB0aGUgbGluZSBicmVha1xuICAgICAgICBjb25zdCB0YXNrQ29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCgndGFza0NvbnRhaW5lckRpdicpO1xuICAgIFxuICAgICAgICAvLyBBZGQgVGFzayBEaXZcbiAgICAgICAgZnVuY3Rpb24gYWRkVGFza0Rpdih0YXNrSWQsIHRpdGxlLCBjYXRlZ29yeSwgZHVlRGF0ZSwgdGFza0NvdW50ZXIsIHByaW9yaXR5U2VsZWN0KXtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tCaWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2tCaWdEaXYuY2xhc3NMaXN0LmFkZCgndGFza0JpZ0RpdicpO1xuICAgICAgICAgICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrRGl2Jyk7XG4gICAgICAgICAgICB0YXNrRGl2LmlkID0gdGFza0lkO1xuICAgICAgICAgICAgdGFza0Rpdi5kYXRhc2V0LnRhc2tJZCA9IHRhc2tJZDtcbiAgICBcbiAgICAgICAgICAgIHRhc2tEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvcGVuVGFza01vZGFsRm9yRWRpdGluZyhuZXdUYXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFza1ByaW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YXNrUHJpbS5jbGFzc0xpc3QuYWRkKCd0YXNrUHJpbScpO1xuICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrUHJpbSk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCd0YXNrVGl0bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0NhdGVnb3J5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCd0YXNrQ2F0ZWdvcnknKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LnRleHRDb250ZW50ID0gXCIoXCIgKyBjYXRlZ29yeSArIFwiKVwiO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhc2tQcmltLmFwcGVuZENoaWxkKGNoZWNrYm94KTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrVGl0bGUpO3Rhc2tQcmltLmFwcGVuZENoaWxkKHRhc2tDYXRlZ29yeSk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCB0YXNrU2VjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1NlYy5jbGFzc0xpc3QuYWRkKCd0YXNrU2VjJyk7XG4gICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tTZWMpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLnRleHRDb250ZW50ID0gZm9ybWF0RGF0ZUZvcklucHV0KGR1ZURhdGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgndGFza0R1ZURhdGUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHlJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIkhpZ2hcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0yMjIucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihwcmlvcml0eVNlbGVjdC52YWx1ZSA9PSBcIk1lZGl1bVwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTExMS5wbmdcIn1cbiAgICAgICAgICAgICAgICBlbHNlIHt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nX2dyZXkucG5nXCJ9XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eUltZy5jbGFzc0xpc3QuYWRkKCdzeW1ib2wnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eUltZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LnNyYyA9IFwiLi9pbWFnZXMvZGVsZXRlLnBuZ1wiOyAvLyBDaGFuZ2UgdG8geW91ciBkZWxldGUgaW1hZ2UncyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5jbGFzc0xpc3QuYWRkKCdzeW1ib2wnKTtcbiAgICBcbiAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRhc2tJZCBmcm9tIHRoZSBlZGl0aW5nVGFza0lkIGRhdGEgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXNrSWQgPSBkZWxldGVCdG5CaWdEaXYuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gdGFzayBpcyBjdXJyZW50bHkgYmVpbmcgZWRpdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZGVsZXRlVGFzayh0YXNrSWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhc2tTZWMuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpOyB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgdGFza0JpZ0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTt0YXNrQmlnRGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkJpZ0Rpdik7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBsaW5lYnJlYWsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuICAgIFxuICAgICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0YXNrQmlnRGl2KTt0YXNrQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGxpbmVicmVhayk7dGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lckRpdik7ICAgIFxuICAgICAgICB9IGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCk7XG4gICAgICAgIFxuICAgICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWxGb3JFZGl0aW5nKHRhc2spe1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGZvcm0gaW5wdXRzIHRvIHRoZSB0YXNrJ3MgdmFsdWVzXG4gICAgICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gdGFzay5jYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gdGFzay5wcmlvcml0eTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIG9uIHRoZSB0aXRsZSBpbnB1dCB0byB0aGUgdGFzaydzIGlkIHNvIHdlIGtub3cgd2hpY2ggdGFzayBpcyBiZWluZyBlZGl0ZWRcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkID0gdGFzay5pZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVkaXRUYXNrKHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBFZGl0aW5nIFRhc2sgT2JqZWN0XG4gICAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICAgIGZvcihsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgdGFza09iamVjdCA9IGNhdGVnb3J5LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZih0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFzayBvYmplY3QncyB2YWx1ZXNcbiAgICAgICAgdGFza09iamVjdC50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0YXNrT2JqZWN0LmNhdGVnb3J5ID0gY2F0ZWdvcnlPYmplY3Q7XG4gICAgICAgIHRhc2tPYmplY3QuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRhc2tPYmplY3QucHJpb3JpdHkgPSBpbXBvcnRhbmNlO1xuICAgICAgICB0YXNrT2JqZWN0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdGFza0lkIGFuZCB0YXNrRGl2IGhlcmVcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXRpbmcgdGFzaywgdGl0bGU6ICcgKyB0aXRsZSArICcgaWQ6ICcgKyB0YXNrSWQpO1xuICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0RpdidzIHRleHRDb250ZW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJykudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0NhdGVnb3J5JykudGV4dENvbnRlbnQgPSBgKCR7Y2F0ZWdvcnlPYmplY3QubmFtZX0pYDtcbiAgICAgICAgdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcudGFza0R1ZURhdGUnKS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgbGV0IHRhc2tQcmlvcml0eUltZyA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcignLnN5bWJvbCcpO1xuICAgICAgICAgICAgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hlc3RcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0zMzMucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSBpZihpbXBvcnRhbmNlID09IFwiTWVkaXVtXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMTExLnBuZ1wifVxuICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgIFxuICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIH1cbiAgICBcbiAgICBzZWxlY3RlZENhdGVnb3J5ID0gY2F0ZWdvcnlTZWxlY3QudmFsdWU7XG4gICAgc2VsZWN0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpO1xuXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIGZpbHRlclBhZ2VDaGFuZ2VzKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pO1xuICB9KTtcblxuICBkZWxldGVCdG5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgICAvLyBHZXQgdGFza0lkIGZyb20gdGhlIGVkaXRpbmdUYXNrSWQgZGF0YSBhdHRyaWJ1dGVcbiAgICAgIGxldCB0YXNrSWQgPSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgXG4gICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrIGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgZGVsZXRlVGFzayh0YXNrSWQpO1xuICB9KTsgIC8vIChpbnNpZGUgbW9kYWwpLiBPdXRzaWRlIG1vZGFsIGV2IGxpc3RlbmVyIGlzIGluc2lkZSBhZGRUYXNrRGl2IGV2bGlzdGVuZXIgJ0RlbGV0ZUJ0bkJpZ0RpdidcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBlcnJvciBjbGFzcyB3aGVuIHRoZSB0aXRsZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gIH0pO1xuICBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tJZCkge1xuICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz8nKSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbmNlbHMsIGp1c3QgY2xvc2UgdGhlIG1vZGFsXG4gICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgbGV0IHRhc2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXNrSWQpO1xuICAgICAgaWYgKCF0YXNrRGl2KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgTm8gdGFzayBkaXYgZm91bmQgd2l0aCBpZCAke3Rhc2tJZH1gKTtcbiAgICAgICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEZpbmQgdGhlIHRhc2sgb2JqZWN0IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyB0YXNrSWRcbiAgICAgIGxldCB0YXNrT2JqZWN0O1xuICAgICAgbGV0IHRhc2tDYXRlZ29yeTtcbiAgICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSB0YXNrSWQpO1xuICAgICAgICAgIGlmICh0YXNrT2JqZWN0KSB7XG4gICAgICAgICAgICAgIHRhc2tDYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLy8gUmVtb3ZlIHRoZSB0YXNrIGZyb20gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXlcbiAgICAgIHRhc2tDYXRlZ29yeS5yZW1vdmVUYXNrRnJvbUNhdCh0YXNrSWQpO1xuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFza0NvdW50ZXJcbiAgICAgIHRhc2tDb3VudGVyLS07XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXIgPSBjYXRlZ29yaWVzLnJlZHVjZSgoY291bnQsIGNhdGVnb3J5KSA9PiBjb3VudCArIGNhdGVnb3J5LnRhc2tzLmxlbmd0aCwgMCk7XG4gIFxuICAgICAgLy8gRGVsZXRlIHRoZSB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBsZXQgdGFza0NvbnRhaW5lckRpdiA9IHRhc2tEaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgdGFza0NvbnRhaW5lckRpdi5yZW1vdmUoKTsgLy8gUmVtb3ZlIHRhc2tDb250YWluZXJEaXZcbiAgXG4gICAgICAvLyBIaWRlIHRoZSBtb2RhbFxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBcbiAgICAgIC8vIENsZWFyIHRoZSBlZGl0aW5nVGFza0lkIHNpbmNlIHdlJ3ZlIGp1c3QgZGVsZXRlZCB0aGUgdGFza1xuICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzKCl7XG4gIG5ld0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgY3VycmVudE1vZGUgPSAnbmV3JztcbiAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBjYXRUaXRsZS52YWx1ZSA9IFwiXCI7XG4gICAgICBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM4YTU5YjknO1xuICAgICAgY29uc29sZS5sb2coY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcik7XG5cbiAgIH0pO1xuICAgb2tDYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBzdWJtaXR0aW5nXG5cbiAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICduZXcnKSB7XG5cbiAgICAgICAgICAgLy8gR2V0IHRoZSBjYXRlZ29yeSBuYW1lIGFuZCBjb2xvciBmcm9tIHRoZSBmb3JtIGlucHV0c1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgbGV0IGNhdENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yUGlja2VyJykudmFsdWU7XG5cbiAgICAgICAgICAgLy9TZXQgZGVmYXVsdCBjYXQgY29sb3IgcGlja2VyXG4gICAgICAgICAgIGNhdENvbG9yID0gY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBjYXRlZ29yeSBpbnN0YW5jZVxuICAgICAgICAgICBsZXQgbmV3Q2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoY2F0VGl0bGUsIGNhdENvbG9yKTtcbiAgICAgICAgICAgY2F0ZWdvcmllcy5wdXNoKG5ld0NhdGVnb3J5KTtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGlzdCBpdGVtXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICBsZXQgbmV3QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5pbm5lclRleHQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlkID0gY2F0VGl0bGU7XG4gICAgICAgICAgIG5ld0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXRCdG5zJyk7XG4gICAgICAgICAgIG5ld0J1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjYXRDb2xvcjtcbiAgICAgICAgICAgbmV3QnV0dG9uLmRhdGFzZXQuY2F0SWQgPSBuZXdDYXRlZ29yeS5jYXRJZDtcbiAgIFxuICAgICAgICAgICBpZiAoaXNEYXJrQ29sb3IoY2F0Q29sb3IpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGFyaycpO1xuICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaWdodCcpO1xuICAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgfVxuICAgICAgICAgICBcbiAgICAgICAgbmV3Q2F0ZWdvcnlFbGVtZW50LmFwcGVuZENoaWxkKG5ld0J1dHRvbik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yaWVzTGlzdCcpLmFwcGVuZENoaWxkKG5ld0NhdGVnb3J5RWxlbWVudCk7XG4gICAgICAgIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpO1xuICAgICAgIH0gZWxzZSBpZiAoY3VycmVudE1vZGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAvL1JldHJpZXZlIHRoZSBjYXRlZ29yeSBmcm9tIHRoZSBjYXRlZ29yaWVzIGFycmF5IGJhc2VkIG9uIHRoZSBjYXRJRFxuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRJRCk7XG4gICAgICAgICAgIGlmICh0eXBlb2YgY2F0SUQgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhdElkIGlzIG5vdCBhIG51bWJlciBhdCBbZGVzY3JpcHRpb24gb2YgdGhlIGNvZGUgbG9jYXRpb25dJywgY2F0SUQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIGxldCBlZGl0aW5nQ2F0ZWdvcnkgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ID0+IGNhdC5jYXRJZCA9PT0gY2F0SUQpO1xuICAgICAgIFxuICAgICAgICAgICAvL1VwZGF0ZSB0aGUgY2F0ZWdvcnkgdmFsdWVzXG4gICAgICAgICAgIGlmIChlZGl0aW5nQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJykudmFsdWU7XG4gICAgICAgICAgICAgICBlZGl0aW5nQ2F0ZWdvcnkuY29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcbiAgICAgICBcbiAgICAgICAgICAgICAgIC8vVXBkYXRlIHRoZSBVSSBlbGVtZW50IChidXR0b24gaW4gdGhpcyBjYXNlKSByZXByZXNlbnRpbmcgdGhlIGNhdGVnb3J5XG4gICAgICAgICAgICAgICBsZXQgYXNzb2NpYXRlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJ1dHRvbltkYXRhLWNhdC1pZD1cIiR7Y2F0SUR9XCJdYCk7XG4gICAgICAgICAgICAgICBpZiAoYXNzb2NpYXRlZEJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uaW5uZXJUZXh0ID0gZWRpdGluZ0NhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlZGl0aW5nQ2F0ZWdvcnkuY29sb3I7XG4gICAgICAgXG4gICAgICAgICAgICAgICAgICAgLy9DaGVjayBjb2xvciBicmlnaHRuZXNzIHRvIGFkanVzdCB0ZXh0IGNvbG9yIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihlZGl0aW5nQ2F0ZWdvcnkuY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWRCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlVGl0bGUuc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGNhdGVnb3J5IHdpdGggSUQ6JywgY2F0SUQpO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgLy9VcGRhdGUgcGFnZSB0aXRsZVxuICAgICAgICAgICBwYWdlVGl0bGUuaW5uZXJIVE1MID0gY2F0VGl0bGUudmFsdWU7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNvbG9yUGlja2VyLnZhbHVlKTtcbiAgICAgICAgICAgcGFnZVRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgICAgIH1cbiAgICAgICB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCk7XG4gICBcbiAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICBcbiAgICAgICAvLyBIZWxwZXIgRnVuY3Rpb25cbiAgICAgICBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeURyb3Bkb3duKCkge1xuICAgICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3Rpbmcgb3B0aW9uc1xuICAgICAgICAgICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnknKTtcbiAgICAgICAgICAgd2hpbGUgKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LnJlbW92ZUNoaWxkKGNhdGVnb3J5U2VsZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC8vIEFkZCBuZXcgb3B0aW9ucyBiYXNlZCBvbiB0aGUgY2F0ZWdvcmllcyBhcnJheVxuICAgICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICB9KTtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNhbmNlbENhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7ICAgIFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICB9KTtcbiAgIHBhZ2VUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgY2F0SUQgPSBwYXJzZUludCh0aGlzLmRhdGFzZXQuY2F0SWQpO1xuICAgICAgIGN1cnJlbnRNb2RlID0gJ2VkaXQnO1xuICAgICAgIG9wZW5DYXRNb2RhbEZvckVkaXRpbmcocGFnZVRpdGxlLCBjYXRJRCk7XG4gICAgICAgZnVuY3Rpb24gb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKXtcbiAgICAgICAgICAgbGV0IGNhdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdFRpdGxlJyk7XG4gICAgICAgICAgIGxldCBjb2xvckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JEaXNwbGF5Jyk7XG4gICAgICAgXG4gICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBpbnB1dHMgdG8gdGhlIHRhc2sncyB2YWx1ZXNcbiAgICAgICAgICAgY2F0VGl0bGUudmFsdWUgPSBwYWdlVGl0bGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBcbiAgICAgICAgICAgLy8gU2hvdyB0aGUgbW9kYWxcbiAgICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICB9XG4gICB9KTtcbiAgIGNvbG9yRGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIC8vIEdldCB0aGUgUkdCIGNvbG9yICYgY29udmVydCB0byBoZXguIFRoZW4gc2V0IHRoZSBjb2xvclBpY2tlciB2YWx1ZSB0byB0aGUgaGV4XG4gICAgbGV0IHJnYkNvbG9yID0gY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICBsZXQgaGV4Q29sb3IgPSByZ2JUb0hleChyZ2JDb2xvcik7XG4gICAgY29sb3JQaWNrZXIudmFsdWUgPSBoZXhDb2xvcjtcbiAgICBjb2xvclBpY2tlci5jbGljaygpO1xuICAgICAgXG4gICAgfSk7XG4gICBjb2xvclBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgeyAgICAgLy8gV2hlbiB5b3UgcGljayBhIGNvbG9yLCB1cGRhdGUgdGhlIGRpc3BsYXlcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpe1xuICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJylcbiAgZmlsdGVyUGFnZUNoYW5nZXMoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBjdXJyZW50VGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG4gIGN1cnJlbnRUaW1lbGluZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgc2VsZWN0ZWRFbmREYXRlID0gdG9kYXk7XG4gICAgZmlsdGVyVGFza3NCeURhdGVBbmRDYXRlZ29yeShzZWxlY3RlZEVuZERhdGUsIHNlbGVjdGVkQ2F0ZWdvcnkpO1xuICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICB0b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG5cbn0pO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcbiAgICAgIGNvbnN0IG9uZVdlZWtMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVXZWVrTGF0ZXIuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRFbmREYXRlID0gb25lTW9udGhMYXRlcjtcbiAgICAgIGZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkoc2VsZWN0ZWRFbmREYXRlLCBzZWxlY3RlZENhdGVnb3J5KTtcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIHRoaXNNb250aEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG4gIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGVjdGVkRW5kRGF0ZSA9IG51bGw7XG4gICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSlcbiAgICAgIHJlbW92ZUZpbHRlcnMoKTtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgIGFsbEJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCl7XG4gIC8vUmVzZWxlY3QgY2F0ZWdvcnkgYnV0dG9ucyB0byBwaWNrIHVwIGFueSBuZXdseSBhZGRlZCBvbmUgIFxuICBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0QnRucycpOyBcbiAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGNhdEJ0bikgPT4ge1xuICAgIGNhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTZXQgc2VsZWN0ZWRDYXRlZ29yeSB0byB0aGUgY2xpY2tlZCBidXR0b24ncyB0ZXh0IGNvbnRlbnRcbiAgICAgICAgc2VsZWN0ZWRDYXRlZ29yeSA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgIGNhdElEID0gcGFyc2VJbnQodGhpcy5kYXRhc2V0LmNhdElkKTtcbiAgICAgICAgc2VsZWN0RmlsdGVyKHNlbGVjdGVkQ2F0ZWdvcnkpXG4gICAgICAgIGZpbHRlclBhZ2VDaGFuZ2VzKHRoaXMpO1xuICAgICAgICBmaWx0ZXJUYXNrc0J5RGF0ZUFuZENhdGVnb3J5KHNlbGVjdGVkRW5kRGF0ZSwgc2VsZWN0ZWRDYXRlZ29yeSwgY2F0SUQpO1xuICAgIH0pO1xuICB9KTsgXG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncygpe1xuICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvLyBOYXYgQ29sbGFwc2UgJiBFeHBhbmRcbiAgICAgIGNvbnN0IG5hdkRpc3BsYXlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5hdikuZGlzcGxheTtcbiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gc2NyZWVuV2lkdGggPCA3NTA7XG4gICAgXG4gICAgICBpZiAoaXNTbWFsbFNjcmVlbikge1xuICAgICAgICBpZiAobmF2RGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcyJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIDMnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9jb2xsYXBzZTMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE0MHB4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAtMSc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZCcpO1xuICAgICAgICAgIGNvbGxhcHNlQnRuLnNyYyA9ICcuL2ltYWdlcy9leHBhbmQzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxMnB4JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMi8zJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcyNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyB0YXNrIG1vZGFsIG9uIGNsaWNraW5nIFhcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgfTsgXG4gIHNwYW5DYXRNb2RhbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IC8vIENsb3NlcyBjYXRtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gICAgIFxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIENsb3NlcyBNb2RhbHMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGl0IFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9IGVsc2UgaWYoZXZlbnQudGFyZ2V0ID09IGNhdE1vZGFsKSB7XG4gICAgICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gIH1cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gRW50ZXIgYWN0cyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICBva1Rhc2tCdG4uY2xpY2soKTsgXG4gICAgICB9XG4gIH0pO1xuICBcbn07XG5cbmZ1bmN0aW9uIHNlbGVjdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KXtcbiAgICAvLyBSZW1vdmUgJ3NlbGVjdGVkRmlsdGVyJyBjbGFzcyBmcm9tIGFsbCBjYXRlZ29yeSBidXR0b25zXG4gICAgY2F0ZWdvcnlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbiAgICB9KTtcbiAgICBzZWxlY3RlZENhdGVnb3J5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgLy8gQWRkICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgdG8gdGhlIGNsaWNrZWQgYnV0dG9uXG4gICAgc2VsZWN0ZWRDYXRlZ29yeUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHJldHVybiBzZWxlY3RlZENhdGVnb3J5QnRuO1xufSIsImltcG9ydCB7Y2F0ZWdvcnlCdXR0b25zfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IHRhc2tDb3VudGVyIH0gZnJvbSAnLi90YXNrRnVuY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvciwgY2F0SWQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhdElkID0gY2F0SWQgfHwgKytsYXN0Q2F0SWQ7XG4gICAgfVxuICAgIGFkZFRhc2tUb0NhdCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgLy8gU2V0IHRoZSB0YXNrJ3MgSUQgdG8gbWF0Y2ggdGhlIGNvcnJlY3QgY291bnRlciB2YWx1ZVxuICAgICAgICB0YXNrLmlkID0gdGFza0NvdW50ZXI7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgfVxuICAgIHJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCkge1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH1cbn1cblxubGV0IGxhc3RDYXRJZCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnRuID0+IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmNhdElkKSkpO1xubGV0IGRlZmF1bHRDYXRlZ29yaWVzID0gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCk7XG5sZXQgY2F0ZWdvcmllcyA9IFsuLi5kZWZhdWx0Q2F0ZWdvcmllc107IFxuXG4vL0NoZWNrcyBpZiB3ZSBhcmUgZWRkaXRpbmcgb3IgY3JlYXRpbmcgYSBuZXcgY2F0ICBcbmxldCBjdXJyZW50TW9kZSA9IG51bGw7XG5sZXQgY2F0SUQ7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpIHtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllc0RpdiBidXR0b24nKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnV0dG9uID0+IHtcbiAgICAgICAgbGV0IGNhdElkID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuY2F0SWQpOyBcbiAgICAgICAgaWYgKGNhdElkID4gbGFzdENhdElkKSBsYXN0Q2F0SWQgPSBjYXRJZDtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShidXR0b24udGV4dENvbnRlbnQudHJpbSgpLCBudWxsLCBjYXRJZCk7IC8vIFBhc3NpbmcgY2F0SWQgdG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn0gXG5cbmV4cG9ydCB7Y2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlfTsiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5cbmxldCB0YXNrQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdFxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlOyBcbiAgICB9XG4gICAgdG9nZ2xlQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSAhdGhpcy5jb21wbGV0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7dGFza0NvdW50ZXJ9O1xuXG5cbiIsImltcG9ydCB7VGFza30gZnJvbScuL3Rhc2tGdW5jdGlvbnMnO1xuaW1wb3J0IHtDYXRlZ29yeX0gZnJvbScuL2NhdGVnb3J5RnVuY3Rpb25zJztcbmltcG9ydCB7aW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplRGVmYXVsdEZpbHRlcnMsIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMsIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncyB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHtjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCxzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXl9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG5pbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpO1xuaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycygpO1xuaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplRGlzcGxheVNldHRpbmdzKCk7XG5cbiJdLCJuYW1lcyI6WyJnZXRDdXJyZW50RGF0ZSIsInRvZGF5IiwiRGF0ZSIsInNldEhvdXJzIiwiaXNEYXJrQ29sb3IiLCJjb2xvciIsInJnYiIsInN0YXJ0c1dpdGgiLCJyIiwicGFyc2VJbnQiLCJzbGljZSIsImciLCJiIiwidmFsdWVzIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwic3BsaXQiLCJicmlnaHRuZXNzIiwiTWF0aCIsInJvdW5kIiwiY29uc29sZSIsImxvZyIsImZvcm1hdERhdGVGb3JJbnB1dCIsImRhdGVTdHJpbmciLCJkYXRlIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJmaWx0ZXJQYWdlQ2hhbmdlcyIsImNhdGVnb3J5QnV0dG9uIiwiY29tcHV0ZWRTdHlsZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJiZ0NvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZm9udENvbG9yIiwicGFnZVRpdGxlIiwic3R5bGUiLCJyZW1vdmVGaWx0ZXJzIiwidGhpc1dlZWtCdG4iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0aGlzTW9udGhCdG4iLCJhbGxCdG4iLCJ0b2RheUJ0biIsImZpbHRlclRhc2tzQnlEYXRlQW5kQ2F0ZWdvcnkiLCJlbmREYXRlIiwic2VsZWN0ZWRDYXRlZ29yeSIsImNhdElEIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRhc2tDb250YWluZXJEaXYiLCJ0YXNrIiwidGFza0lkIiwiY2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwidGFza3MiLCJmaW5kIiwiaWQiLCJnZXRUYXNrQnlJZCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwidGFza0R1ZURhdGUiLCJkdWVEYXRlIiwidGFza0NhdGVnb3J5IiwibmFtZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImNhdElkIiwiY29udGVudCIsIm5hdiIsIm1vZGFsIiwiY2F0TW9kYWwiLCJ0YXNrc0NvbnRhaW5lciIsImNvbGxhcHNlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVUYXNrQnRuIiwib2tUYXNrQnRuIiwiY2FuY2VsVGFza0J0biIsImRlbGV0ZUJ0bk1vZGFsIiwibmV3Q2F0QnRuIiwib2tDYXRCdG4iLCJjYW5jZWxDYXRCdG4iLCJjb2xvclBpY2tlciIsImNvbG9yRGlzcGxheSIsInBhZ2VUaW1lbGluZSIsInNwYW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3BhbkNhdE1vZGFsIiwidGl0bGVJbnB1dCIsImNhdGVnb3J5U2VsZWN0IiwiZHVlRGF0ZVNlbGVjdCIsInByaW9yaXR5U2VsZWN0IiwiZGVzY3JpcHRpb25JbnB1dCIsImNhdGVnb3J5QnV0dG9ucyIsInNlbGVjdGVkQ2F0ZWdvcnlCdG4iLCJzZWxlY3RlZEVuZERhdGUiLCJpbml0aWFsaXplQ2F0RmlsdGVyRXZMaXN0ZW5lcnMiLCJjYXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwidGhpcyIsInNlbGVjdEZpbHRlciIsImJ1dHRvbiIsImFkZCIsIkNhdGVnb3J5IiwiY29uc3RydWN0b3IiLCJsYXN0Q2F0SWQiLCJhZGRUYXNrVG9DYXQiLCJwdXNoIiwidGFza0NvdW50ZXIiLCJyZW1vdmVUYXNrRnJvbUNhdCIsImZpbHRlciIsIm1heCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImJ0biIsImRlZmF1bHRDYXRlZ29yaWVzIiwidHJpbSIsImluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcyIsImN1cnJlbnRNb2RlIiwiVGFzayIsInRpdGxlIiwiY2F0ZWdvcnlPYmplY3QiLCJwcmlvcml0eSIsImRlc2NyaXB0aW9uIiwiY29tcGxldGUiLCJ0b2dnbGVDb21wbGV0ZSIsImRlbGV0ZVRhc2siLCJjb25maXJtIiwiZWRpdGluZ1Rhc2tJZCIsInRhc2tPYmplY3QiLCJ0YXNrRGl2IiwiZXJyb3IiLCJyZWR1Y2UiLCJjb3VudCIsInBhcmVudE5vZGUiLCJ2YWx1ZSIsImRkIiwibW0iLCJ5eXl5IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlcG9ydFZhbGlkaXR5IiwiY2F0ZWdvcnlWYWx1ZSIsImltcG9ydGFuY2UiLCJ1bmRlZmluZWQiLCJzcmMiLCJlZGl0VGFzayIsIm5ld1Rhc2siLCJjcmVhdGVFbGVtZW50Iiwib3BlblRhc2tNb2RhbEZvckVkaXRpbmciLCJ0YXNrQmlnRGl2IiwidGFza1ByaW0iLCJhcHBlbmRDaGlsZCIsImNoZWNrYm94IiwidHlwZSIsInN0b3BQcm9wYWdhdGlvbiIsImNoZWNrZWQiLCJ0YXNrVGl0bGUiLCJ0YXNrUHJpb3JpdHkiLCJ0YXNrU2VjIiwidGFza1ByaW9yaXR5SW1nIiwiZGVsZXRlQnRuQmlnRGl2IiwibGluZWJyZWFrIiwiYWRkVGFza0RpdiIsImFkZFRhc2siLCJpbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzIiwiY2F0VGl0bGUiLCJjYXRDb2xvciIsIm5ld0NhdGVnb3J5IiwibmV3Q2F0ZWdvcnlFbGVtZW50IiwibmV3QnV0dG9uIiwiaW5uZXJUZXh0IiwiZWRpdGluZ0NhdGVnb3J5IiwiY2F0IiwiYXNzb2NpYXRlZEJ1dHRvbiIsImlubmVySFRNTCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm9wdGlvbiIsInVwZGF0ZUNhdGVnb3J5RHJvcGRvd24iLCJvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nIiwiaGV4Q29sb3IiLCJtYXRjaCIsInRvU3RyaW5nIiwicmdiVG9IZXgiLCJjbGljayIsImJhY2tncm91bmQiLCJvbmVXZWVrTGF0ZXIiLCJzZXREYXRlIiwib25lTW9udGhMYXRlciIsIm5hdkRpc3BsYXlTdHlsZSIsImlubmVyV2lkdGgiLCJ6SW5kZXgiLCJncmlkQ29sdW1uIiwib25jbGljayIsInRhcmdldCIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=