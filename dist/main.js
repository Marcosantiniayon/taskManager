(()=>{"use strict";function e(e){let t;if(e.startsWith("#"))t={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};else if(e.startsWith("rgb(")){let n=e.substring(4,e.length-1).split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}let n=Math.round((299*t.r+587*t.g+114*t.b)/1e3);return console.log(n),n<170}function t(e){const t=new Date(e),n=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()+n),`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`}function n(e){pageTitle.textContent=e.textContent;let t=window.getComputedStyle(e),n=t.backgroundColor,l=t.color;pageTitle.style.backgroundColor=n,pageTitle.style.color=l,pageTitle.dataset.catId=e.dataset.catId}function l(e,n){document.querySelectorAll(".taskContainerDiv").forEach((l=>{const o=function(e){for(const t of G){const n=t.tasks.find((t=>t.id==e));if(n)return n}return null}(l.querySelector(".taskDiv").dataset.taskId),s=new Date(t(o.dueDate));s.setHours(0,0,0,0);const a=o.category;!(null===e||s<=e)||"All Inbox"!==n&&a.name!==n?l.style.display="none":l.style.display="block"}))}const o=document.querySelector(".content"),s=document.querySelector("nav"),a=document.querySelector("#modal"),d=document.querySelector("#catModal"),c=document.querySelector(".tasksContainer"),i=document.getElementById("collapseBtn"),r=document.getElementById("createTask"),u=document.getElementById("okTaskBtn"),m=document.getElementById("cancelTaskBtn"),g=document.getElementById("delete"),y=document.getElementById("newCatBtn"),p=document.getElementById("okCatBtn"),k=document.getElementById("cancelCatBtn"),v=(document.getElementById("All Inbox"),document.getElementById("Responsibilities"),document.getElementById("Events & Social"),document.getElementById("Programming Course"),document.getElementById("colorPicker")),f=document.getElementById("colorDisplay"),E=document.getElementById("allBtn"),I=document.getElementById("todayBtn"),h=document.getElementById("thisWeekBtn"),C=document.getElementById("thisMonthBtn"),B=document.getElementById("pageTimeline");let L=document.getElementsByClassName("close")[0],b=document.getElementsByClassName("closeCatModal")[0],D=document.querySelector("form"),w=document.getElementById("pageTitle"),x=document.getElementById("title"),T=document.getElementById("category"),S=document.getElementById("dueDate"),q=document.getElementById("priority"),M=document.getElementById("description"),A=document.querySelectorAll(".catBtns"),F=document.querySelectorAll(".timelineBtns"),N="All Inbox",P=document.getElementById(N),$=null,H=document.getElementById("allBtn");const z=function(){const e=new Date;return e.setHours(0,0,0,0),e}();function W(){A=document.querySelectorAll(".catBtns"),A.forEach((e=>{e.addEventListener("click",(function(){N=this.textContent,R=parseInt(this.dataset.catId),Y(N)}))}))}function Y(e){return A.forEach((e=>{e.classList.remove("selectedFilter")})),P=document.getElementById(e),P.classList.add("selectedFilter"),n(P),l($,e),P}function _(e,t){return console.log(t),F.forEach((e=>{e.classList.remove("selectedFilter")})),n(P),l(e,N),t.classList.add("selectedFilter"),t}class O{constructor(e,t,n=null){this.name=e,this.color=t,this.tasks=[],this.catId=n||++V}addTaskToCat(e){this.tasks.push(e),e.id=K,K++}removeTaskFromCat(e){this.tasks=this.tasks.filter((t=>t.id!==e))}}let R,V=Math.max(...Array.from(A).map((e=>parseInt(e.dataset.catId)))),j=function(){const e=document.querySelectorAll(".categoriesDiv button");return Array.from(e).map((e=>{let t=parseInt(e.dataset.catId);return t>V&&(V=t),new O(e.textContent.trim(),null,t)}))}(),G=[...j],J=null,K=0;class Q{constructor(e,t,n,l,o,s){this.id=e,this.title=t,this.category=n,this.dueDate=l,this.priority=o,this.description=s,this.complete=!1}toggleComplete(){this.complete=!this.complete}}!function(){function e(e){if(!confirm("Are you sure you want to delete this task?"))return a.style.display="none",void delete x.dataset.editingTaskId;let t,n,l=document.getElementById(e);if(!l)return console.error(`No task div found with id ${e}`),void delete x.dataset.editingTaskId;for(let l of G)if(t=l.tasks.find((t=>t.id==e)),t){n=l;break}n.removeTaskFromCat(e),K--,K=G.reduce(((e,t)=>e+t.tasks.length),0),l.parentNode.parentNode.remove(),a.style.display="none",delete x.dataset.editingTaskId}r.addEventListener("click",(function(){x.value="",T.value=N;let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();e=l+"-"+n+"-"+t,S.value=e,q.value="Low",M.value="",a.style.display="block"})),m.addEventListener("click",(function(e){e.preventDefault(),a.style.display="none"})),u.addEventListener("click",(function(l){if(document.querySelector("form").reportValidity()){l.preventDefault(),x.classList.remove("error");let n=document.getElementById("title").value,o=document.getElementById("category").value,s=document.getElementById("category").value,d=G.find((e=>e.name===s)),i=document.getElementById("dueDate").value,r=document.getElementById("priority").value,u=document.getElementById("description").value;x.dataset.editingTaskId?function(e,n,l,o,s){let d,c=x.dataset.editingTaskId;for(let e of G)if(d=e.tasks.find((e=>e.id==c)),d)break;if(void 0===d)return void console.error(`No task found with id ${c}`);d.title=e,d.category=n,d.dueDate=l,d.priority=o,d.description=s,console.log("editing task, title: "+e+" id: "+c);let i=document.getElementById(c);i.querySelector(".taskTitle").textContent=e,i.querySelector(".taskCategory").textContent=`(${n.name})`,i.querySelector(".taskDueDate").textContent=t(l),i.querySelector(".symbol").src="Highest"==o?"./images/warning-333.png":"High"==o?"./images/warning-222.png":"Medium"==o?"./images/warning-111.png":"./images/warning_grey.png",delete x.dataset.editingTaskId,a.style.display="none"}(n,d,i,r,u):function(n,l,o,s,d,i){let r=new Q(K,n,o,s,d,i);K++,o.addTaskToCat(r);let u=r.id;const m=document.createElement("div");function g(e){console.log(e),x.value=e.title,T.value=e.category.name,S.value=e.dueDate,q.value=e.priority,M.value=e.description,x.dataset.editingTaskId=e.id,a.style.display="block"}m.classList.add("taskContainerDiv"),function(n,l,o,s,a,d){const i=document.createElement("div");i.classList.add("taskBigDiv");const u=document.createElement("div");u.classList.add("taskDiv"),u.id=n,u.dataset.taskId=n,u.addEventListener("click",(function(){g(r)}));const y=document.createElement("div");y.classList.add("taskPrim"),u.appendChild(y);const p=document.createElement("input");p.type="checkbox",p.addEventListener("click",(function(e){e.stopPropagation(),this.checked?(k.classList.add("complete"),v.classList.add("complete"),E.classList.add("complete"),I.classList.add("complete")):(k.classList.remove("complete"),v.classList.remove("complete"),E.classList.remove("complete"),I.classList.remove("complete"))}));const k=document.createElement("div");k.classList.add("taskTitle"),k.textContent=l;const v=document.createElement("div");v.classList.add("taskCategory"),v.textContent="("+o+")",y.appendChild(p),y.appendChild(k),y.appendChild(v);const f=document.createElement("div");f.classList.add("taskSec"),u.appendChild(f);const E=document.createElement("div");E.classList.add("taskDueDate"),E.textContent=t(s);const I=document.createElement("div");I.classList.add("taskDueDate");const h=document.createElement("img");"Highest"==d.value?h.src="./images/warning-333.png":"High"==d.value?h.src="./images/warning-222.png":"Medium"==d.value?h.src="./images/warning-111.png":h.src="./images/warning_grey.png",h.classList.add("symbol"),I.appendChild(h);const C=document.createElement("img");C.id=n,C.src="./images/delete.png",C.classList.add("symbol"),C.addEventListener("click",(function(t){t.stopPropagation();let n=C.id;n?e(n):console.log("No task is currently being edited")})),f.appendChild(E),f.appendChild(I),i.appendChild(u),i.appendChild(C);const B=document.createElement("hr");m.appendChild(i),m.appendChild(B),c.appendChild(m)}(u,n,l,s,0,q)}(n,o,d,i,r,u),a.style.display="none"}else x.classList.add("error");$=null,H=E,_($,H),N=T.value,Y(N),n(P)})),g.addEventListener("click",(function(t){t.stopPropagation();let n=x.dataset.editingTaskId;n?e(n):console.log("No task is currently being edited")})),x.addEventListener("input",(function(){this.classList.remove("error")}))}(),y.addEventListener("click",(function(){J="new",d.style.display="block",catTitle.value="",f.style.backgroundColor="#8a59b9",console.log(f.style.backgroundColor)})),p.addEventListener("click",(function(t){if(t.preventDefault(),"new"===J){let t=document.getElementById("catTitle").value,n=document.getElementById("colorPicker").value;n=f.style.backgroundColor,console.log(n);let l=new O(t,n);G.push(l);let o=document.createElement("li"),s=document.createElement("button");s.innerText=t,s.id=t,s.classList.add("catBtns"),s.style.backgroundColor=n,s.dataset.catId=l.catId,e(n)?(console.log(n),console.log("dark"),s.style.color="white"):(console.log(n),console.log("light"),s.style.color="black"),o.appendChild(s),document.getElementById("categoriesList").appendChild(o),W()}else if("edit"===J){console.log(R),"number"!=typeof R&&console.error("catId is not a number at [description of the code location]",R);let t=G.find((e=>e.catId===R));if(t){t.name=document.getElementById("catTitle").value,t.color=document.getElementById("colorPicker").value;let n=document.querySelector(`button[data-cat-id="${R}"]`);n&&(n.innerText=t.name,n.style.backgroundColor=t.color,e(t.color)?(n.style.color="white",w.style.color="white",console.log(w.style.color)):(n.style.color="black",w.style.color="black",console.log(w.style.color)))}else console.error("Could not find category with ID:",R);w.innerHTML=catTitle.value,console.log(v.value),w.style.backgroundColor=v.value}!function(){let e=document.getElementById("category");for(;e.firstChild;)e.removeChild(e.firstChild);G.forEach((t=>{let n=document.createElement("option");n.value=t.name,n.textContent=t.name,e.appendChild(n)}))}(),d.style.display="none"})),k.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),w.addEventListener("click",(function(){R=parseInt(this.dataset.catId),J="edit",function(e,t){let n=document.getElementById("catTitle"),l=document.getElementById("colorDisplay");n.value=e.textContent,l.style.backgroundColor=e.style.backgroundColor,d.style.display="block"}(w)})),f.addEventListener("click",(function(){let e=function(e){let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)}(f.style.backgroundColor);v.value=e,v.click()})),v.addEventListener("input",(function(){f.style.background=v.value})),P.classList.add("selectedFilter"),n(P),document.getElementById("allBtn").classList.add("selectedFilter"),I.addEventListener("click",(function(){$=z,H=I,_($,H),B.textContent=this.textContent})),h.addEventListener("click",(function(){const e=new Date;e.setDate(z.getDate()+7),$=e,H=h,_($,H),B.textContent=this.textContent})),C.addEventListener("click",(function(){const e=new Date;e.setDate(z.getDate()+30),$=e,H=C,_($,H),B.textContent=this.textContent})),E.addEventListener("click",(function(){$=null,H=E,_($,H),B.textContent=this.textContent})),W(),i.addEventListener("click",(function(){const e=window.getComputedStyle(s).display;window.innerWidth<750?"none"===e?(s.style.display="block",s.style.zIndex="2",o.style.gridColumn="1 / 3",o.classList.add("overlay"),i.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),i.src="./images/expand3.png"):"none"===e?(s.style.display="block",s.style.zIndex="",o.style.gridColumn="2/3",o.classList.remove("overlay"),i.src="./images/collapse3.png"):(s.style.display="none",s.style.zIndex="",o.style.gridColumn="1 / -1",o.classList.remove("overlay"),console.log("expand"),i.src="./images/expand3.png")})),L.onclick=function(){a.style.display="none",delete x.dataset.editingTaskId},b.onclick=function(){d.style.display="none"},window.onclick=function(e){e.target==a?a.style.display="none":e.target==d&&(d.style.display="none")},D.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),u.click())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBaEQsRUFBYWtILFFBQVUsV0FDbkJsSSxFQUFTNUIsTUFBTXdCLFFBQVUsTUFDN0IsRUFDQTdCLE9BQU9tSyxRQUFVLFNBQVN2RCxHQUNsQkEsRUFBTXdELFFBQVVwSSxFQUNsQkEsRUFBTTNCLE1BQU13QixRQUFVLE9BQ2QrRSxFQUFNd0QsUUFBVW5JLElBQ3RCQSxFQUFTNUIsTUFBTXdCLFFBQVUsT0FFakMsRUFDQSxFQUFLaUMsaUJBQWlCLFdBQVcsU0FBUzhDLEdBQ3BCLFVBQWRBLEVBQU15RCxNQUNOekQsRUFBTUMsaUJBQ052RSxFQUFVb0gsUUFFbEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2hlbHBlckZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90YXNrbWFuYWdlci8uL3NyYy9kaXNwbGF5RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2RvbUVsZW1lbnRzLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL2NhdGVnb3J5RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3Rhc2ttYW5hZ2VyLy4vc3JjL3Rhc2tGdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdGFza21hbmFnZXIvLi9zcmMvaW5kZXgzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpeyBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7IC8vIFNldCBob3VycywgbWludXRlcywgc2Vjb25kcywgYW5kIG1pbGxpc2Vjb25kcyB0byAwIHRvIGNvbXBhcmUgb25seSB0aGUgZGF0ZXNcbiAgICByZXR1cm4gdG9kYXk7XG4gIH1cbmV4cG9ydCBmdW5jdGlvbiBpc0RhcmtDb2xvcihjb2xvcikge1xuICBsZXQgcmdiO1xuICBpZiAoY29sb3Iuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICBsZXQgciA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgICBsZXQgZyA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDMsIDUpLCAxNik7XG4gICAgICBsZXQgYiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDUsIDcpLCAxNik7XG4gICAgICByZ2IgPSB7IHIsIGcsIGIgfTtcbiAgfSBlbHNlIGlmIChjb2xvci5zdGFydHNXaXRoKCdyZ2IoJykpIHtcbiAgICAvLyBFeHRyYWN0IFJHQiB2YWx1ZXMgZnJvbSBhbiBSR0Igc3RyaW5nXG4gICAgbGV0IHZhbHVlcyA9IGNvbG9yLnN1YnN0cmluZyg0LCBjb2xvci5sZW5ndGggLSAxKS5zcGxpdCgnLCcpO1xuICAgIGxldCByID0gcGFyc2VJbnQodmFsdWVzWzBdLCAxMCk7XG4gICAgbGV0IGcgPSBwYXJzZUludCh2YWx1ZXNbMV0sIDEwKTtcbiAgICBsZXQgYiA9IHBhcnNlSW50KHZhbHVlc1syXSwgMTApO1xuICAgIHJnYiA9IHsgciwgZywgYiB9O1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGJyaWdodG5lc3Mgb24gYSBzY2FsZSBmcm9tIDAgdG8gMjU1XG4gIGxldCBicmlnaHRuZXNzID0gTWF0aC5yb3VuZCgoKHJnYi5yICogMjk5KSArIChyZ2IuZyAqIDU4NykgKyAocmdiLmIgKiAxMTQpKSAvIDEwMDApO1xuICBjb25zb2xlLmxvZyhicmlnaHRuZXNzKTtcbiAgcmV0dXJuIGJyaWdodG5lc3MgPCAxNzA7IC8vIFJldHVybiB0cnVlIGlmIHRoZSBjb2xvciBpcyBkYXJrXG59XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvcklucHV0KGRhdGVTdHJpbmcpIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICBjb25zdCBvZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7IC8vIEdldCB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgb2Zmc2V0KTsgLy8gQWRqdXN0IHRoZSBkYXRlIGJ5IHRoZSB0aW1lem9uZSBvZmZzZXRcbiAgY29uc3QgbW0gPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgY29uc3QgZGQgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIHJldHVybiBgJHttbX0vJHtkZH0vJHt5eXl5fWA7XG59XG5leHBvcnQgZnVuY3Rpb24gcmdiVG9IZXgocmdiKSB7XG4gIC8vIFNlcGFyYXRlIFJHQiB2YWx1ZXNcbiAgbGV0IHZhbHVlcyA9IHJnYi5tYXRjaCgvXnJnYlxcKChcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKylcXCkkLyk7XG5cbiAgLy8gQ29udmVydCBlYWNoIHZhbHVlIHRvIGhleGFkZWNpbWFsXG4gIGxldCBoZXhDb2xvciA9IFwiI1wiICsgKFwiMFwiICsgcGFyc2VJbnQodmFsdWVzWzFdLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludCh2YWx1ZXNbMl0sIDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHZhbHVlc1szXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICByZXR1cm4gaGV4Q29sb3I7XG59XG4gICIsImltcG9ydCB7IGNhdGVnb3JpZXMgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZUZvcklucHV0IH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG4vLyBpbXBvcnQgeyBjdXJyZW50Q2F0ZWdvcnkgfSBmcm9tIFwiLi9kb21FbGVtZW50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGFnZVRpdGxlKHNlbGVjdGVkQ2F0ZWdvcnlCdG4pe1xuICAvL0FwcGx5IHBhZ2UgdGl0bGUgYmFzZWQgb24gY2F0ZWdyeVxuICBwYWdlVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZENhdGVnb3J5QnRuLnRleHRDb250ZW50O1xuXG4gIC8vIENoYW5nZSBwYWdlIHRpdGxlIGFjY29yZGluZyB0byBzZWxlY3RlZCBidXR0b25cbiAgbGV0IHNlbGVjdGVkQ2F0QnRuID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBiZ0NvbG9yID0gc2VsZWN0ZWRDYXRCdG4uYmFja2dyb3VuZENvbG9yO1xuICBsZXQgZm9udENvbG9yID0gc2VsZWN0ZWRDYXRCdG4uY29sb3I7XG4gIHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICBwYWdlVGl0bGUuc3R5bGUuY29sb3IgPSBmb250Q29sb3I7XG4gIHBhZ2VUaXRsZS5kYXRhc2V0LmNhdElkID0gc2VsZWN0ZWRDYXRlZ29yeUJ0bi5kYXRhc2V0LmNhdElkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGFnZVRhc2tzKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkQ2F0ZWdvcnkpIHtcbiAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0YXNrQ29udGFpbmVyRGl2IGVsZW1lbnRzIGFuZCBjaGVjayB0aGVpciB0YXNrcycgZHVlIGRhdGVzXG4gIGNvbnN0IGFsbFRhc2tDb250YWluZXJEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2tDb250YWluZXJEaXYnKTtcbiAgYWxsVGFza0NvbnRhaW5lckRpdnMuZm9yRWFjaCgodGFza0NvbnRhaW5lckRpdikgPT4ge1xuICAgICAgY29uc3QgdGFza0RpdiA9IHRhc2tDb250YWluZXJEaXYucXVlcnlTZWxlY3RvcignLnRhc2tEaXYnKTsgLy8gR2V0IHRoZSB0YXNrRGl2IGluc2lkZSB0aGUgY3VycmVudCB0YXNrQ29udGFpbmVyRGl2XG4gICAgICBjb25zdCB0YXNrSWQgPSB0YXNrRGl2LmRhdGFzZXQudGFza0lkO1xuICAgICAgXG4gICAgICBjb25zdCB0YXNrID0gZ2V0VGFza0J5SWQodGFza0lkKTsgLy8gUmV0cmlldmUgdGhlIHRhc2sgb2JqZWN0IGJ5IElEXG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXNrJ3MgZHVlIGRhdGUgaXMgYmV0d2VlbiBzdGFydERhdGUgYW5kIHNlbGVjdGVkVGltZWxpbmVcbiAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gbmV3IERhdGUoZm9ybWF0RGF0ZUZvcklucHV0KHRhc2suZHVlRGF0ZSkpO1xuICAgICAgdGFza0R1ZURhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgIC8vIEFzc2lnbiB0aGUgdGFzayBjYXRlZ29yeSB0byB0YXNrQ2F0ZWdvcnlcbiAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IHRhc2suY2F0ZWdvcnk7XG5cbiAgICAgIGlmICgoc2VsZWN0ZWRUaW1lbGluZSA9PT0gbnVsbCB8fCB0YXNrRHVlRGF0ZSA8PSBzZWxlY3RlZFRpbWVsaW5lKSAmJiAoc2VsZWN0ZWRDYXRlZ29yeSA9PT0gXCJBbGwgSW5ib3hcIiB8fCB0YXNrQ2F0ZWdvcnkubmFtZSA9PT0gc2VsZWN0ZWRDYXRlZ29yeSkpIHtcbiAgICAgICAgICAvLyBTaG93IHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBiZXR3ZWVuIHN0YXJ0RGF0ZSBhbmQgZW5kRGF0ZSwgYW5kIGNhdGVnb3J5IG1hdGNoZXNcbiAgICAgICAgICB0YXNrQ29udGFpbmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBIaWRlIHRoZSB0YXNrQ29udGFpbmVyRGl2IGlmIGl0cyBkdWUgZGF0ZSBpcyBvdXRzaWRlIHRoZSByYW5nZSBvciBjYXRlZ29yeSBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgdGFza0NvbnRhaW5lckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfVxuXG4gICAgICAvL0hlbHBlciBmdW5jdGlvblxuICAgICAgZnVuY3Rpb24gZ2V0VGFza0J5SWQodGFza0lkKSB7XG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggY2F0ZWdvcnlcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhc2sgaW4gdGhlIGNhdGVnb3J5J3MgdGFza3MgYXJyYXkgd2l0aCB0aGUgbWF0Y2hpbmcgSURcbiAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICByZXR1cm4gdGFzazsgLy8gUmV0dXJuIHRoZSB0YXNrIGlmIGZvdW5kXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCBpZiBubyB0YXNrIHdpdGggdGhlIGdpdmVuIElEIGlzIGZvdW5kXG4gICAgICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsdGVycygpe1xuICAgIHRoaXNXZWVrQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdGhpc01vbnRoQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgYWxsQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgdG9kYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRGaWx0ZXInKTtcbn1cblxuXG4iLCJpbXBvcnQgeyBUYXNrLCB0YXNrQ291bnRlciB9IGZyb20gXCIuL3Rhc2tGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnREYXRlLCBmb3JtYXREYXRlRm9ySW5wdXQsIGlzRGFya0NvbG9yLCByZ2JUb0hleCB9IGZyb20gXCIuL2hlbHBlckZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdXBkYXRlUGFnZVRpdGxlLCByZW1vdmVGaWx0ZXJzLCB1cGRhdGVQYWdlVGFza3N9IGZyb20gXCIuL2Rpc3BsYXlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IENhdGVnb3J5LCBjYXRlZ29yaWVzLCBjYXRJRCwgY3VycmVudE1vZGUgfSBmcm9tIFwiLi9jYXRlZ29yeUZ1bmN0aW9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbmF2Jyk7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xuY29uc3QgY2F0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0TW9kYWwnKTtcbmNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzQ29udGFpbmVyJyk7XG5jb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsYXBzZUJ0bicpO1xuY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVUYXNrJyk7XG5jb25zdCBva1Rhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2tUYXNrQnRuJylcbmNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsVGFza0J0bicpO1xuY29uc3QgZGVsZXRlQnRuTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlJyk7XG5jb25zdCBuZXdDYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3Q2F0QnRuJyk7XG5jb25zdCBva0NhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdva0NhdEJ0bicpO1xuY29uc3QgY2FuY2VsQ2F0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbENhdEJ0bicpO1xuY29uc3QgaW5ib3hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWxsIEluYm94JylcbmNvbnN0IHJlc3BvbnNpYmlsaXRpZXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUmVzcG9uc2liaWxpdGllcycpO1xuY29uc3QgZXZlbnRzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0V2ZW50cyAmIFNvY2lhbCcpO1xuY29uc3QgcHJvZ3JhbW1pbmdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUHJvZ3JhbW1pbmcgQ291cnNlJyk7XG5jb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpO1xuY29uc3QgY29sb3JEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yRGlzcGxheScpO1xuY29uc3QgYWxsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbEJ0bicpO1xuY29uc3QgdG9kYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kYXlCdG4nKTtcbmNvbnN0IHRoaXNXZWVrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXNXZWVrQnRuJyk7XG5jb25zdCB0aGlzTW9udGhCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhpc01vbnRoQnRuJyk7XG5jb25zdCBwYWdlVGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpbWVsaW5lJyk7XG5sZXQgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcbmxldCBzcGFuQ2F0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VDYXRNb2RhbFwiKVswXTtcbmxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xubGV0IHBhZ2VUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGl0bGUnKTtcblxubGV0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpXG5sZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpO1xubGV0IGR1ZURhdGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIik7XG5sZXQgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpO1xubGV0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xubGV0IGNhdGVnb3J5QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRCdG5zJyk7XG5sZXQgdGltZWxpbmVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVsaW5lQnRucycpO1xuXG5sZXQgc2VsZWN0ZWRDYXRlZ29yeSA9ICdBbGwgSW5ib3gnO1xubGV0IHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcbmxldCBzZWxlY3RlZFRpbWVsaW5lID0gbnVsbDtcbmxldCBzZWxlY3RlZFRpbWVsaW5lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxCdG5cIik7XG5cbmNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGUoKTtcblxuZXhwb3J0IHtcbiAgY29udGVudCwgbmF2LG1vZGFsLHNwYW4sY2F0TW9kYWwsIHNwYW5DYXRNb2RhbCx0YXNrc0NvbnRhaW5lcixmb3JtLHBhZ2VUaXRsZSxjb2xsYXBzZUJ0bixjcmVhdGVUYXNrQnRuLG9rVGFza0J0bixjYW5jZWxUYXNrQnRuLGRlbGV0ZUJ0bk1vZGFsLG5ld0NhdEJ0bixva0NhdEJ0bixjYW5jZWxDYXRCdG4saW5ib3hCdG4scmVzcG9uc2liaWxpdGllc0J0bixldmVudHNCdG4scHJvZ3JhbW1pbmdCdG4sdGl0bGVJbnB1dCxjYXRlZ29yeVNlbGVjdCxkdWVEYXRlU2VsZWN0LHByaW9yaXR5U2VsZWN0LGRlc2NyaXB0aW9uSW5wdXQsY2F0ZWdvcnlCdXR0b25zLGFsbEJ0biwgdG9kYXlCdG4sIHRoaXNXZWVrQnRuLCB0aGlzTW9udGhCdG4sIHBhZ2VUaW1lbGluZSwgY29sb3JQaWNrZXIsIGNvbG9yRGlzcGxheSAgXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycygpe1xuICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8vIEJyaW5ncyB1cCBuZXcgdGFzayBtb2RhbCBcbiAgICAgIC8vIFNldCBkZWZhdWx0IGlucHV0c1xuICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFzIFwibW0tZGQteXl5eVwiXG4gICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkO1xuICAgICAgZHVlRGF0ZVNlbGVjdC52YWx1ZSA9IHRvZGF5XG4gICAgICBcbiAgICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gXCJMb3dcIjtcbiAgICAgIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBcIlwiO1xuICBcbiAgICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgXG4gIGNhbmNlbFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSk7XG5cbiAgb2tUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgLy9DYWxscyBhZGRUYXNrIG9yIGVkaXRUYXNrXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aXRsZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXNzaWduIHByb3BlcnR5IHZhbHVlcyBiYXNlZCBvZmYgaW5wdXRzXG4gICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhdGVnb3J5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBjYXRlZ29yeVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKS52YWx1ZTtcbiAgICAgICAgICBsZXQgY2F0ZWdvcnlPYmplY3QgPSBjYXRlZ29yaWVzLmZpbmQoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkubmFtZSA9PT0gY2F0ZWdvcnlWYWx1ZSk7XG4gICAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgICAgICAgbGV0IGltcG9ydGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBjcmVhdGluZyBhIG5ldyB0YXNrIG9yIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG9uZVxuICAgICAgICAgIGlmICh0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZCkge1xuICAgICAgICAgICAgICBlZGl0VGFzayh0aXRsZSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhZGRUYXNrKHRpdGxlLCBjYXRlZ29yeSwgY2F0ZWdvcnlPYmplY3QsIGR1ZURhdGUsIGltcG9ydGFuY2UsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIFxuICAgICAgICB9IGVsc2UgeyB0aXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7IH1cbiAgICAgIFxuICAgIGZ1bmN0aW9uIGFkZFRhc2sodGl0bGUsIGNhdGVnb3J5LCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBDcmVhdGUgVGFzayBPYmplY3QgXG4gICAgICAgIGxldCBuZXdUYXNrID0gbmV3IFRhc2sodGFza0NvdW50ZXIsIHRpdGxlLCBjYXRlZ29yeU9iamVjdCwgZHVlRGF0ZSwgaW1wb3J0YW5jZSwgZGVzY3JpcHRpb24pO1xuICAgIFxuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBjYXRlZ29yeU9iamVjdC5hZGRUYXNrVG9DYXQobmV3VGFzayk7XG4gICAgICAgIGxldCB0YXNrSWQgPSBuZXdUYXNrLmlkXG4gICAgICAgIFxuICAgICAgICAvLyBDb250YWluZXIgZGl2IGZvciB0aGUgdGFzayBhbmQgdGhlIGxpbmUgYnJlYWtcbiAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tDb250YWluZXJEaXYnKTtcbiAgICBcbiAgICAgICAgLy8gQWRkIFRhc2sgRGl2XG4gICAgICAgIGZ1bmN0aW9uIGFkZFRhc2tEaXYodGFza0lkLCB0aXRsZSwgY2F0ZWdvcnksIGR1ZURhdGUsIHRhc2tDb3VudGVyLCBwcmlvcml0eVNlbGVjdCl7XG4gICAgICAgICAgICBjb25zdCB0YXNrQmlnRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YXNrQmlnRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCaWdEaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFza0RpdicpO1xuICAgICAgICAgICAgdGFza0Rpdi5pZCA9IHRhc2tJZDtcbiAgICAgICAgICAgIHRhc2tEaXYuZGF0YXNldC50YXNrSWQgPSB0YXNrSWQ7XG4gICAgXG4gICAgICAgICAgICB0YXNrRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb3BlblRhc2tNb2RhbEZvckVkaXRpbmcobmV3VGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcmltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1ByaW0uY2xhc3NMaXN0LmFkZCgndGFza1ByaW0nKTtcbiAgICAgICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFza1RpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDYXRlZ29yeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXRlZ29yeS50ZXh0Q29udGVudCA9IFwiKFwiICsgY2F0ZWdvcnkgKyBcIilcIjtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrUHJpbS5hcHBlbmRDaGlsZChjaGVja2JveCk7dGFza1ByaW0uYXBwZW5kQ2hpbGQodGFza1RpdGxlKTt0YXNrUHJpbS5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnkpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGFza1NlYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tTZWMuY2xhc3NMaXN0LmFkZCgndGFza1NlYycpO1xuICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU2VjKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGVGb3JJbnB1dChkdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEdWVEYXRlJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoZXN0XCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMzMzLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJIaWdoXCIpe3Rhc2tQcmlvcml0eUltZy5zcmMgPSBcIi4vaW1hZ2VzL3dhcm5pbmctMjIyLnBuZ1wifVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJpb3JpdHlTZWxlY3QudmFsdWUgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICAgICAgZWxzZSB7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZ19ncmV5LnBuZ1wifVxuICAgICAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlJbWcuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlJbWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkJpZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuaWQgPSB0YXNrSWQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bkJpZ0Rpdi5zcmMgPSBcIi4vaW1hZ2VzL2RlbGV0ZS5wbmdcIjsgLy8gQ2hhbmdlIHRvIHlvdXIgZGVsZXRlIGltYWdlJ3MgcGF0aFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdG5CaWdEaXYuY2xhc3NMaXN0LmFkZCgnc3ltYm9sJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuQmlnRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza0lkID0gZGVsZXRlQnRuQmlnRGl2LmlkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YXNrU2VjLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTsgdGFza1NlYy5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHRhc2tCaWdEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7dGFza0JpZ0Rpdi5hcHBlbmRDaGlsZChkZWxldGVCdG5CaWdEaXYpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGluZWJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICBcbiAgICAgICAgICAgIHRhc2tDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQodGFza0JpZ0Rpdik7dGFza0NvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChsaW5lYnJlYWspO3Rhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tDb250YWluZXJEaXYpOyAgICBcbiAgICAgICAgfSBhZGRUYXNrRGl2KHRhc2tJZCwgdGl0bGUsIGNhdGVnb3J5LCBkdWVEYXRlLCB0YXNrQ291bnRlciwgcHJpb3JpdHlTZWxlY3QpO1xuICAgICAgICBcbiAgICAgICAgLy9IZWxwZXIgRnVuY3Rpb25cbiAgICAgICAgZnVuY3Rpb24gb3BlblRhc2tNb2RhbEZvckVkaXRpbmcodGFzayl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBpbnB1dHMgdG8gdGhlIHRhc2sncyB2YWx1ZXNcbiAgICAgICAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSB0YXNrLnRpdGxlO1xuICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QudmFsdWUgPSB0YXNrLmNhdGVnb3J5Lm5hbWU7XG4gICAgICAgICAgICBkdWVEYXRlU2VsZWN0LnZhbHVlID0gdGFzay5kdWVEYXRlO1xuICAgICAgICAgICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSB0YXNrLnByaW9yaXR5O1xuICAgICAgICAgICAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHRhc2suZGVzY3JpcHRpb247XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgZGF0YSBhdHRyaWJ1dGUgb24gdGhlIHRpdGxlIGlucHV0IHRvIHRoZSB0YXNrJ3MgaWQgc28gd2Uga25vdyB3aGljaCB0YXNrIGlzIGJlaW5nIGVkaXRlZFxuICAgICAgICAgICAgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQgPSB0YXNrLmlkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZWRpdFRhc2sodGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBpbXBvcnRhbmNlLCBkZXNjcmlwdGlvbil7XG4gICAgICAgIC8vIEVkaXRpbmcgVGFzayBPYmplY3RcbiAgICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICBsZXQgdGFza09iamVjdDtcbiAgICAgICAgZm9yKGxldCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0ID0gY2F0ZWdvcnkudGFza3MuZmluZCh0YXNrID0+IHRhc2suaWQgPT0gdGFza0lkKTtcbiAgICAgICAgICAgIGlmKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFza09iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGZvdW5kIHdpdGggaWQgJHt0YXNrSWR9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrIG9iamVjdCdzIHZhbHVlc1xuICAgICAgICB0YXNrT2JqZWN0LnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRhc2tPYmplY3QuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdDtcbiAgICAgICAgdGFza09iamVjdC5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGFza09iamVjdC5wcmlvcml0eSA9IGltcG9ydGFuY2U7XG4gICAgICAgIHRhc2tPYmplY3QuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB0YXNrSWQgYW5kIHRhc2tEaXYgaGVyZVxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdGluZyB0YXNrLCB0aXRsZTogJyArIHRpdGxlICsgJyBpZDogJyArIHRhc2tJZCk7XG4gICAgICAgIGxldCB0YXNrRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFza0lkKTtcbiAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrRGl2J3MgdGV4dENvbnRlbnQgdG8gcmVmbGVjdCB0aGUgbmV3IHZhbHVlc1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrVGl0bGUnKS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrQ2F0ZWdvcnknKS50ZXh0Q29udGVudCA9IGAoJHtjYXRlZ29yeU9iamVjdC5uYW1lfSlgO1xuICAgICAgICB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRHVlRGF0ZScpLnRleHRDb250ZW50ID0gZm9ybWF0RGF0ZUZvcklucHV0KGR1ZURhdGUpO1xuICAgICAgICBsZXQgdGFza1ByaW9yaXR5SW1nID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKCcuc3ltYm9sJyk7XG4gICAgICAgICAgICBpZihpbXBvcnRhbmNlID09IFwiSGlnaGVzdFwiKXt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nLTMzMy5wbmdcIn1cbiAgICAgICAgICAgIGVsc2UgaWYoaW1wb3J0YW5jZSA9PSBcIkhpZ2hcIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0yMjIucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIGlmKGltcG9ydGFuY2UgPT0gXCJNZWRpdW1cIil7dGFza1ByaW9yaXR5SW1nLnNyYyA9IFwiLi9pbWFnZXMvd2FybmluZy0xMTEucG5nXCJ9XG4gICAgICAgICAgICBlbHNlIHt0YXNrUHJpb3JpdHlJbWcuc3JjID0gXCIuL2ltYWdlcy93YXJuaW5nX2dyZXkucG5nXCJ9XG4gICAgXG4gICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgICBzZWxlY3RlZFRpbWVsaW5lID0gbnVsbDtcbiAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gYWxsQnRuO1xuICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgc2VsZWN0ZWRDYXRlZ29yeSA9IGNhdGVnb3J5U2VsZWN0LnZhbHVlO1xuICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIH0pO1xuXG4gIGRlbGV0ZUJ0bk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICAgIC8vIEdldCB0YXNrSWQgZnJvbSB0aGUgZWRpdGluZ1Rhc2tJZCBkYXRhIGF0dHJpYnV0ZVxuICAgICAgbGV0IHRhc2tJZCA9IHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICBcbiAgICAgIGlmICghdGFza0lkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2sgaXMgY3VycmVudGx5IGJlaW5nIGVkaXRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGVUYXNrKHRhc2tJZCk7XG4gIH0pOyAgLy8gKGluc2lkZSBtb2RhbCkuIE91dHNpZGUgbW9kYWwgZXYgbGlzdGVuZXIgaXMgaW5zaWRlIGFkZFRhc2tEaXYgZXZsaXN0ZW5lciAnRGVsZXRlQnRuQmlnRGl2J1xuICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVycm9yIGNsYXNzIHdoZW4gdGhlIHRpdGxlIGlucHV0IHZhbHVlIGNoYW5nZXNcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0YXNrPycpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FuY2VscywganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgZGVsZXRlIHRpdGxlSW5wdXQuZGF0YXNldC5lZGl0aW5nVGFza0lkO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhc2tJZCk7XG4gICAgICBpZiAoIXRhc2tEaXYpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyB0YXNrIGRpdiBmb3VuZCB3aXRoIGlkICR7dGFza0lkfWApO1xuICAgICAgICAgIGRlbGV0ZSB0aXRsZUlucHV0LmRhdGFzZXQuZWRpdGluZ1Rhc2tJZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgdGFzayBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIHRhc2tJZFxuICAgICAgbGV0IHRhc2tPYmplY3Q7XG4gICAgICBsZXQgdGFza0NhdGVnb3J5O1xuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgICAgIHRhc2tPYmplY3QgPSBjYXRlZ29yeS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09IHRhc2tJZCk7XG4gICAgICAgICAgaWYgKHRhc2tPYmplY3QpIHtcbiAgICAgICAgICAgICAgdGFza0NhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBSZW1vdmUgdGhlIHRhc2sgZnJvbSB0aGUgY2F0ZWdvcnkncyB0YXNrcyBhcnJheVxuICAgICAgdGFza0NhdGVnb3J5LnJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCk7XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB0YXNrQ291bnRlclxuICAgICAgdGFza0NvdW50ZXItLTtcbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tDb3VudGVyXG4gICAgICB0YXNrQ291bnRlciA9IGNhdGVnb3JpZXMucmVkdWNlKChjb3VudCwgY2F0ZWdvcnkpID0+IGNvdW50ICsgY2F0ZWdvcnkudGFza3MubGVuZ3RoLCAwKTtcbiAgXG4gICAgICAvLyBEZWxldGUgdGhlIHRhc2tDb250YWluZXJEaXZcbiAgICAgIGxldCB0YXNrQ29udGFpbmVyRGl2ID0gdGFza0Rpdi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICB0YXNrQ29udGFpbmVyRGl2LnJlbW92ZSgpOyAvLyBSZW1vdmUgdGFza0NvbnRhaW5lckRpdlxuICBcbiAgICAgIC8vIEhpZGUgdGhlIG1vZGFsXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgICAgLy8gQ2xlYXIgdGhlIGVkaXRpbmdUYXNrSWQgc2luY2Ugd2UndmUganVzdCBkZWxldGVkIHRoZSB0YXNrXG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgbmV3Q2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBjdXJyZW50TW9kZSA9ICduZXcnO1xuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGNhdFRpdGxlLnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbG9yRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzhhNTliOSc7XG4gICAgICBjb25zb2xlLmxvZyhjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcblxuICAgfSk7XG4gICBva0NhdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIHN1Ym1pdHRpbmdcblxuICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ25ldycpIHtcblxuICAgICAgICAgICAvLyBHZXQgdGhlIGNhdGVnb3J5IG5hbWUgYW5kIGNvbG9yIGZyb20gdGhlIGZvcm0gaW5wdXRzXG4gICAgICAgICAgIGxldCBjYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRUaXRsZScpLnZhbHVlO1xuICAgICAgICAgICBsZXQgY2F0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKS52YWx1ZTtcblxuICAgICAgICAgICAvL1NldCBkZWZhdWx0IGNhdCBjb2xvciBwaWNrZXJcbiAgICAgICAgICAgY2F0Q29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICBjb25zb2xlLmxvZyhjYXRDb2xvcik7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGNhdGVnb3J5IGluc3RhbmNlXG4gICAgICAgICAgIGxldCBuZXdDYXRlZ29yeSA9IG5ldyBDYXRlZ29yeShjYXRUaXRsZSwgY2F0Q29sb3IpO1xuICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2gobmV3Q2F0ZWdvcnkpO1xuICAgXG4gICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsaXN0IGl0ZW1cbiAgICAgICAgICAgbGV0IG5ld0NhdGVnb3J5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgIGxldCBuZXdCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmlubmVyVGV4dCA9IGNhdFRpdGxlO1xuICAgICAgICAgICBuZXdCdXR0b24uaWQgPSBjYXRUaXRsZTtcbiAgICAgICAgICAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhdEJ0bnMnKTtcbiAgICAgICAgICAgbmV3QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNhdENvbG9yO1xuICAgICAgICAgICBuZXdCdXR0b24uZGF0YXNldC5jYXRJZCA9IG5ld0NhdGVnb3J5LmNhdElkO1xuICAgXG4gICAgICAgICAgIGlmIChpc0RhcmtDb2xvcihjYXRDb2xvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdENvbG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXJrJyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0Q29sb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpZ2h0Jyk7XG4gICAgICAgICAgICBuZXdCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICBuZXdDYXRlZ29yeUVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3JpZXNMaXN0JykuYXBwZW5kQ2hpbGQobmV3Q2F0ZWdvcnlFbGVtZW50KTtcbiAgICAgICAgaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG4gICAgICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgIC8vUmV0cmlldmUgdGhlIGNhdGVnb3J5IGZyb20gdGhlIGNhdGVnb3JpZXMgYXJyYXkgYmFzZWQgb24gdGhlIGNhdElEXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNhdElEKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBjYXRJRCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignY2F0SWQgaXMgbm90IGEgbnVtYmVyIGF0IFtkZXNjcmlwdGlvbiBvZiB0aGUgY29kZSBsb2NhdGlvbl0nLCBjYXRJRCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgbGV0IGVkaXRpbmdDYXRlZ29yeSA9IGNhdGVnb3JpZXMuZmluZChjYXQgPT4gY2F0LmNhdElkID09PSBjYXRJRCk7XG4gICAgICAgXG4gICAgICAgICAgIC8vVXBkYXRlIHRoZSBjYXRlZ29yeSB2YWx1ZXNcbiAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgZWRpdGluZ0NhdGVnb3J5Lm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKS52YWx1ZTtcbiAgICAgICAgICAgICAgIGVkaXRpbmdDYXRlZ29yeS5jb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvclBpY2tlcicpLnZhbHVlO1xuICAgICAgIFxuICAgICAgICAgICAgICAgLy9VcGRhdGUgdGhlIFVJIGVsZW1lbnQgKGJ1dHRvbiBpbiB0aGlzIGNhc2UpIHJlcHJlc2VudGluZyB0aGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgIGxldCBhc3NvY2lhdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW2RhdGEtY2F0LWlkPVwiJHtjYXRJRH1cIl1gKTtcbiAgICAgICAgICAgICAgIGlmIChhc3NvY2lhdGVkQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5pbm5lclRleHQgPSBlZGl0aW5nQ2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVkaXRpbmdDYXRlZ29yeS5jb2xvcjtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGNvbG9yIGJyaWdodG5lc3MgdG8gYWRqdXN0IHRleHQgY29sb3IgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgaWYgKGlzRGFya0NvbG9yKGVkaXRpbmdDYXRlZ29yeS5jb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgYXNzb2NpYXRlZEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUaXRsZS5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VUaXRsZS5zdHlsZS5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgY2F0ZWdvcnkgd2l0aCBJRDonLCBjYXRJRCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvL1VwZGF0ZSBwYWdlIHRpdGxlXG4gICAgICAgICAgIHBhZ2VUaXRsZS5pbm5lckhUTUwgPSBjYXRUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgY29uc29sZS5sb2coY29sb3JQaWNrZXIudmFsdWUpO1xuICAgICAgICAgICBwYWdlVGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XG4gICAgICAgfVxuICAgICAgIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKTtcbiAgIFxuICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgIFxuICAgICAgIC8vIEhlbHBlciBGdW5jdGlvblxuICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5RHJvcGRvd24oKSB7XG4gICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBvcHRpb25zXG4gICAgICAgICAgIGxldCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpO1xuICAgICAgICAgICB3aGlsZSAoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3QucmVtb3ZlQ2hpbGQoY2F0ZWdvcnlTZWxlY3QuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLy8gQWRkIG5ldyBvcHRpb25zIGJhc2VkIG9uIHRoZSBjYXRlZ29yaWVzIGFycmF5XG4gICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgICAgIH0pO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY2FuY2VsQ2F0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsgICAgXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgIH0pO1xuICAgcGFnZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgY3VycmVudE1vZGUgPSAnZWRpdCc7XG4gICAgICAgb3BlbkNhdE1vZGFsRm9yRWRpdGluZyhwYWdlVGl0bGUsIGNhdElEKTtcbiAgICAgICBmdW5jdGlvbiBvcGVuQ2F0TW9kYWxGb3JFZGl0aW5nKHBhZ2VUaXRsZSwgY2F0SUQpe1xuICAgICAgICAgICBsZXQgY2F0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0VGl0bGUnKTtcbiAgICAgICAgICAgbGV0IGNvbG9yRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvckRpc3BsYXknKTtcbiAgICAgICBcbiAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGlucHV0cyB0byB0aGUgdGFzaydzIHZhbHVlc1xuICAgICAgICAgICBjYXRUaXRsZS52YWx1ZSA9IHBhZ2VUaXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhZ2VUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaG93IHRoZSBtb2RhbFxuICAgICAgICAgICBjYXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgIH1cbiAgIH0pO1xuICAgY29sb3JEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gR2V0IHRoZSBSR0IgY29sb3IgJiBjb252ZXJ0IHRvIGhleC4gVGhlbiBzZXQgdGhlIGNvbG9yUGlja2VyIHZhbHVlIHRvIHRoZSBoZXhcbiAgICBsZXQgcmdiQ29sb3IgPSBjb2xvckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIGxldCBoZXhDb2xvciA9IHJnYlRvSGV4KHJnYkNvbG9yKTtcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9IGhleENvbG9yO1xuICAgIGNvbG9yUGlja2VyLmNsaWNrKCk7XG4gICAgICBcbiAgICB9KTtcbiAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7ICAgICAvLyBXaGVuIHlvdSBwaWNrIGEgY29sb3IsIHVwZGF0ZSB0aGUgZGlzcGxheVxuICAgICAgY29sb3JEaXNwbGF5LnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclBpY2tlci52YWx1ZTtcbiAgICB9KTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRGaWx0ZXJzKCl7XG4gIHNlbGVjdGVkQ2F0ZWdvcnlCdG4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWRGaWx0ZXInKVxuICB1cGRhdGVQYWdlVGl0bGUoc2VsZWN0ZWRDYXRlZ29yeUJ0bik7XG4gIGxldCBjdXJyZW50VGltZWxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsQnRuJyk7XG4gIGN1cnJlbnRUaW1lbGluZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMoKXtcbiAgLy9UaW1lbGluZSBidXR0b25zIGV2ZW50IGxpc3RlbmVyc1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBzZWxlY3RlZFRpbWVsaW5lID0gdG9kYXk7XG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0biA9IHRvZGF5QnRuO1xuICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcblxufSk7XG4gIHRoaXNXZWVrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgb25lV2Vla0xhdGVyID0gbmV3IERhdGUoKTtcbiAgICAgIG9uZVdlZWtMYXRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDcpO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG9uZVdlZWtMYXRlcjtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSB0aGlzV2Vla0J0bjtcbiAgICAgIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgICBwYWdlVGltZWxpbmUudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICB9KTtcbiAgdGhpc01vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgb25lTW9udGhMYXRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBvbmVNb250aExhdGVyLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApO1xuICAgICAgc2VsZWN0ZWRUaW1lbGluZSA9IG9uZU1vbnRoTGF0ZXI7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lQnRuID0gdGhpc01vbnRoQnRuO1xuICAgICAgc2VsZWN0VGltZUZpbHRlcihzZWxlY3RlZFRpbWVsaW5lLCBzZWxlY3RlZFRpbWVsaW5lQnRuKTtcbiAgICAgIHBhZ2VUaW1lbGluZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dENvbnRlbnQ7XG4gIH0pO1xuICBhbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxlY3RlZFRpbWVsaW5lID0gbnVsbDtcbiAgICAgIHNlbGVjdGVkVGltZWxpbmVCdG4gPSBhbGxCdG47XG4gICAgICBzZWxlY3RUaW1lRmlsdGVyKHNlbGVjdGVkVGltZWxpbmUsIHNlbGVjdGVkVGltZWxpbmVCdG4pO1xuICAgICAgcGFnZVRpbWVsaW5lLnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgfSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycygpe1xuICAvL1Jlc2VsZWN0IGNhdGVnb3J5IGJ1dHRvbnMgdG8gcGljayB1cCBhbnkgbmV3bHkgYWRkZWQgb25lICBcbiAgY2F0ZWdvcnlCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdEJ0bnMnKTsgXG4gIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChjYXRCdG4pID0+IHtcbiAgICBjYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gU2V0IHNlbGVjdGVkQ2F0ZWdvcnkgdG8gdGhlIGNsaWNrZWQgYnV0dG9uJ3MgdGV4dCBjb250ZW50XG4gICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICBjYXRJRCA9IHBhcnNlSW50KHRoaXMuZGF0YXNldC5jYXRJZCk7XG4gICAgICAgIHNlbGVjdENhdEZpbHRlcihzZWxlY3RlZENhdGVnb3J5KTtcbiAgICB9KTtcbiAgfSk7IFxufVxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEaXNwbGF5U2V0dGluZ3MoKXtcbiAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgLy8gTmF2IENvbGxhcHNlICYgRXhwYW5kXG4gICAgICBjb25zdCBuYXZEaXNwbGF5U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShuYXYpLmRpc3BsYXk7XG4gICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY29uc3QgaXNTbWFsbFNjcmVlbiA9IHNjcmVlbldpZHRoIDwgNzUwO1xuICAgIFxuICAgICAgaWYgKGlzU21hbGxTY3JlZW4pIHtcbiAgICAgICAgaWYgKG5hdkRpc3BsYXlTdHlsZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnMic7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzEgLyAzJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvY29sbGFwc2UzLnBuZyc7XG4gICAgICAgIC8vICAgY29sbGFwc2VCdG4uc3R5bGUubWFyZ2luTGVmdCA9ICcxNDBweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgbmF2LnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmQnKTtcbiAgICAgICAgICBjb2xsYXBzZUJ0bi5zcmMgPSAnLi9pbWFnZXMvZXhwYW5kMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTJweCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuYXZEaXNwbGF5U3R5bGUgPT09ICdub25lJykge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBuYXYuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5ncmlkQ29sdW1uID0gJzIvMyc7XG4gICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5Jyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2NvbGxhcHNlMy5wbmcnO1xuICAgICAgICAvLyAgIGNvbGxhcHNlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMjQwcHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIG5hdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgICBjb250ZW50LnN0eWxlLmdyaWRDb2x1bW4gPSAnMSAvIC0xJztcbiAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kJyk7XG4gICAgICAgICAgY29sbGFwc2VCdG4uc3JjID0gJy4vaW1hZ2VzL2V4cGFuZDMucG5nJztcbiAgICAgICAgLy8gICBjb2xsYXBzZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEycHgnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIHNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyAvLyBDbG9zZXMgdGFzayBtb2RhbCBvbiBjbGlja2luZyBYXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBkZWxldGUgdGl0bGVJbnB1dC5kYXRhc2V0LmVkaXRpbmdUYXNrSWQ7XG4gIH07IFxuICBzcGFuQ2F0TW9kYWwub25jbGljayA9IGZ1bmN0aW9uKCkgeyAvLyBDbG9zZXMgY2F0bW9kYWwgb24gY2xpY2tpbmcgWFxuICAgICAgY2F0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9ICAgICBcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyAvLyBDbG9zZXMgTW9kYWxzIHdoZW4gY2xpY2tpbmcgb3V0c2lkZSBvZiBpdCBcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfSBlbHNlIGlmKGV2ZW50LnRhcmdldCA9PSBjYXRNb2RhbCkge1xuICAgICAgICAgIGNhdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuICB9XG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vIEVudGVyIGFjdHMgYXMgYSBjbGlja1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgXG4gICAgICAgICAgb2tUYXNrQnRuLmNsaWNrKCk7IFxuICAgICAgfVxuICB9KTtcbiAgXG59O1xuXG5mdW5jdGlvbiBzZWxlY3RDYXRGaWx0ZXIoc2VsZWN0ZWRDYXRlZ29yeSl7XG4gICAgLy8gUmVtb3ZlICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgZnJvbSBhbGwgY2F0ZWdvcnkgYnV0dG9uc1xuICAgIGNhdGVnb3J5QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgYW5kIGFkZCAnc2VsZWN0ZWRGaWx0ZXInIGNsYXNzIHRvIHRoZSBjbGlja2VkIGJ1dHRvblxuICAgIHNlbGVjdGVkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RlZENhdGVnb3J5KTtcbiAgICBzZWxlY3RlZENhdGVnb3J5QnRuLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkRmlsdGVyJyk7XG5cbiAgICAvLyBVcGRhdGUgUGFnZVxuICAgIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgICB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgcmV0dXJuIHNlbGVjdGVkQ2F0ZWdvcnlCdG47XG59XG5cbmZ1bmN0aW9uIHNlbGVjdFRpbWVGaWx0ZXIoc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRUaW1lbGluZUJ0bil7XG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRUaW1lbGluZUJ0bik7XG4gICAgLy8gUmVtb3ZlICdzZWxlY3RlZEZpbHRlcicgY2xhc3MgZnJvbSBhbGwgdGltZWxpbmUgYnV0dG9uc1xuICAgIHRpbWVsaW5lQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkRmlsdGVyJyk7XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgUGFnZVxuICAgIHVwZGF0ZVBhZ2VUaXRsZShzZWxlY3RlZENhdGVnb3J5QnRuKTtcbiAgICB1cGRhdGVQYWdlVGFza3Moc2VsZWN0ZWRUaW1lbGluZSwgc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgXG4gICAgc2VsZWN0ZWRUaW1lbGluZUJ0bi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZEZpbHRlcicpO1xuICAgIHJldHVybiBzZWxlY3RlZFRpbWVsaW5lQnRuO1xufSIsImltcG9ydCB7Y2F0ZWdvcnlCdXR0b25zfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IHRhc2tDb3VudGVyIH0gZnJvbSAnLi90YXNrRnVuY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvciwgY2F0SWQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhdElkID0gY2F0SWQgfHwgKytsYXN0Q2F0SWQ7XG4gICAgfVxuICAgIGFkZFRhc2tUb0NhdCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgLy8gU2V0IHRoZSB0YXNrJ3MgSUQgdG8gbWF0Y2ggdGhlIGNvcnJlY3QgY291bnRlciB2YWx1ZVxuICAgICAgICB0YXNrLmlkID0gdGFza0NvdW50ZXI7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgfVxuICAgIHJlbW92ZVRhc2tGcm9tQ2F0KHRhc2tJZCkge1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH1cbn1cblxubGV0IGxhc3RDYXRJZCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnRuID0+IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmNhdElkKSkpO1xubGV0IGRlZmF1bHRDYXRlZ29yaWVzID0gaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzKCk7XG5sZXQgY2F0ZWdvcmllcyA9IFsuLi5kZWZhdWx0Q2F0ZWdvcmllc107IFxuXG4vL0NoZWNrcyBpZiB3ZSBhcmUgZWRkaXRpbmcgb3IgY3JlYXRpbmcgYSBuZXcgY2F0ICBcbmxldCBjdXJyZW50TW9kZSA9IG51bGw7XG5sZXQgY2F0SUQ7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0Q2F0ZWdvcmllcygpIHtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllc0RpdiBidXR0b24nKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oY2F0ZWdvcnlCdXR0b25zKS5tYXAoYnV0dG9uID0+IHtcbiAgICAgICAgbGV0IGNhdElkID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuY2F0SWQpOyBcbiAgICAgICAgaWYgKGNhdElkID4gbGFzdENhdElkKSBsYXN0Q2F0SWQgPSBjYXRJZDtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShidXR0b24udGV4dENvbnRlbnQudHJpbSgpLCBudWxsLCBjYXRJZCk7IC8vIFBhc3NpbmcgY2F0SWQgdG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn0gXG5cbmV4cG9ydCB7Y2F0ZWdvcmllcywgY2F0SUQsIGN1cnJlbnRNb2RlfTsiLCJpbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnLi9jYXRlZ29yeUZ1bmN0aW9ucyc7XG5cbmxldCB0YXNrQ291bnRlciA9IDA7XG5cbmV4cG9ydCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIGNhdGVnb3J5T2JqZWN0LCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iamVjdFxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlOyBcbiAgICB9XG4gICAgdG9nZ2xlQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSAhdGhpcy5jb21wbGV0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7dGFza0NvdW50ZXJ9O1xuXG5cbiIsImltcG9ydCB7VGFza30gZnJvbScuL3Rhc2tGdW5jdGlvbnMnO1xuaW1wb3J0IHtDYXRlZ29yeX0gZnJvbScuL2NhdGVnb3J5RnVuY3Rpb25zJztcbmltcG9ydCB7aW5pdGlhbGl6ZVRhc2tFdmVudExpc3RlbmVycywgaW5pdGlhbGl6ZUNhdEV2ZW50TGlzdGVuZXJzLCBpbml0aWFsaXplRGVmYXVsdEZpbHRlcnMsIGluaXRpYWxpemVUaW1lRmlsdGVyRXZMaXN0ZW5lcnMsIGluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycywgaW5pdGlhbGl6ZURpc3BsYXlTZXR0aW5ncyB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuaW1wb3J0IHtjb250ZW50LCBuYXYsbW9kYWwsc3BhbixjYXRNb2RhbCxzcGFuQ2F0TW9kYWwsdGFza3NDb250YWluZXIsZm9ybSxwYWdlVGl0bGUsY29sbGFwc2VCdG4sY3JlYXRlVGFza0J0bixva1Rhc2tCdG4sY2FuY2VsVGFza0J0bixkZWxldGVCdG5Nb2RhbCxuZXdDYXRCdG4sb2tDYXRCdG4sY2FuY2VsQ2F0QnRuLGluYm94QnRuLHJlc3BvbnNpYmlsaXRpZXNCdG4sZXZlbnRzQnRuLHByb2dyYW1taW5nQnRuLHRpdGxlSW5wdXQsY2F0ZWdvcnlTZWxlY3QsZHVlRGF0ZVNlbGVjdCxwcmlvcml0eVNlbGVjdCxkZXNjcmlwdGlvbklucHV0LGNhdGVnb3J5QnV0dG9ucyxhbGxCdG4sIHRvZGF5QnRuLCB0aGlzV2Vla0J0biwgdGhpc01vbnRoQnRuLCBwYWdlVGltZWxpbmUsIGNvbG9yUGlja2VyLCBjb2xvckRpc3BsYXl9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG5pbml0aWFsaXplVGFza0V2ZW50TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplQ2F0RXZlbnRMaXN0ZW5lcnMoKTtcbmluaXRpYWxpemVEZWZhdWx0RmlsdGVycygpO1xuaW5pdGlhbGl6ZVRpbWVGaWx0ZXJFdkxpc3RlbmVycygpO1xuaW5pdGlhbGl6ZUNhdEZpbHRlckV2TGlzdGVuZXJzKCk7XG5pbml0aWFsaXplRGlzcGxheVNldHRpbmdzKCk7XG5cbiJdLCJuYW1lcyI6WyJpc0RhcmtDb2xvciIsImNvbG9yIiwicmdiIiwic3RhcnRzV2l0aCIsInIiLCJwYXJzZUludCIsInNsaWNlIiwiZyIsImIiLCJ2YWx1ZXMiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJzcGxpdCIsImJyaWdodG5lc3MiLCJNYXRoIiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0RGF0ZUZvcklucHV0IiwiZGF0ZVN0cmluZyIsImRhdGUiLCJEYXRlIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJ1cGRhdGVQYWdlVGl0bGUiLCJzZWxlY3RlZENhdGVnb3J5QnRuIiwicGFnZVRpdGxlIiwidGV4dENvbnRlbnQiLCJzZWxlY3RlZENhdEJ0biIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJiZ0NvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZm9udENvbG9yIiwic3R5bGUiLCJkYXRhc2V0IiwiY2F0SWQiLCJ1cGRhdGVQYWdlVGFza3MiLCJzZWxlY3RlZFRpbWVsaW5lIiwic2VsZWN0ZWRDYXRlZ29yeSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrQ29udGFpbmVyRGl2IiwidGFzayIsInRhc2tJZCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRhc2tzIiwiZmluZCIsImlkIiwiZ2V0VGFza0J5SWQiLCJxdWVyeVNlbGVjdG9yIiwidGFza0R1ZURhdGUiLCJkdWVEYXRlIiwic2V0SG91cnMiLCJ0YXNrQ2F0ZWdvcnkiLCJuYW1lIiwiZGlzcGxheSIsImNvbnRlbnQiLCJuYXYiLCJtb2RhbCIsImNhdE1vZGFsIiwidGFza3NDb250YWluZXIiLCJjb2xsYXBzZUJ0biIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFza0J0biIsIm9rVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJkZWxldGVCdG5Nb2RhbCIsIm5ld0NhdEJ0biIsIm9rQ2F0QnRuIiwiY2FuY2VsQ2F0QnRuIiwiY29sb3JQaWNrZXIiLCJjb2xvckRpc3BsYXkiLCJwYWdlVGltZWxpbmUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNwYW5DYXRNb2RhbCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImR1ZURhdGVTZWxlY3QiLCJwcmlvcml0eVNlbGVjdCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXRlZ29yeUJ1dHRvbnMiLCJ0aW1lbGluZUJ1dHRvbnMiLCJzZWxlY3RlZFRpbWVsaW5lQnRuIiwidG9kYXkiLCJnZXRDdXJyZW50RGF0ZSIsImluaXRpYWxpemVDYXRGaWx0ZXJFdkxpc3RlbmVycyIsImNhdEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGlzIiwiY2F0SUQiLCJzZWxlY3RDYXRGaWx0ZXIiLCJidXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzZWxlY3RUaW1lRmlsdGVyIiwiQ2F0ZWdvcnkiLCJjb25zdHJ1Y3RvciIsImxhc3RDYXRJZCIsImFkZFRhc2tUb0NhdCIsInB1c2giLCJ0YXNrQ291bnRlciIsInJlbW92ZVRhc2tGcm9tQ2F0IiwiZmlsdGVyIiwibWF4IiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiYnRuIiwiZGVmYXVsdENhdGVnb3JpZXMiLCJ0cmltIiwiaW5pdGlhbGl6ZURlZmF1bHRDYXRlZ29yaWVzIiwiY3VycmVudE1vZGUiLCJUYXNrIiwidGl0bGUiLCJjYXRlZ29yeU9iamVjdCIsInByaW9yaXR5IiwiZGVzY3JpcHRpb24iLCJjb21wbGV0ZSIsInRvZ2dsZUNvbXBsZXRlIiwiZGVsZXRlVGFzayIsImNvbmZpcm0iLCJlZGl0aW5nVGFza0lkIiwidGFza09iamVjdCIsInRhc2tEaXYiLCJlcnJvciIsInJlZHVjZSIsImNvdW50IiwicGFyZW50Tm9kZSIsInZhbHVlIiwiZGQiLCJtbSIsInl5eXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwb3J0VmFsaWRpdHkiLCJjYXRlZ29yeVZhbHVlIiwiaW1wb3J0YW5jZSIsInVuZGVmaW5lZCIsInNyYyIsImVkaXRUYXNrIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuVGFza01vZGFsRm9yRWRpdGluZyIsInRhc2tCaWdEaXYiLCJ0YXNrUHJpbSIsImFwcGVuZENoaWxkIiwiY2hlY2tib3giLCJ0eXBlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hlY2tlZCIsInRhc2tUaXRsZSIsInRhc2tQcmlvcml0eSIsInRhc2tTZWMiLCJ0YXNrUHJpb3JpdHlJbWciLCJkZWxldGVCdG5CaWdEaXYiLCJsaW5lYnJlYWsiLCJhZGRUYXNrRGl2IiwiYWRkVGFzayIsImluaXRpYWxpemVUYXNrRXZlbnRMaXN0ZW5lcnMiLCJjYXRUaXRsZSIsImNhdENvbG9yIiwibmV3Q2F0ZWdvcnkiLCJuZXdDYXRlZ29yeUVsZW1lbnQiLCJuZXdCdXR0b24iLCJpbm5lclRleHQiLCJlZGl0aW5nQ2F0ZWdvcnkiLCJjYXQiLCJhc3NvY2lhdGVkQnV0dG9uIiwiaW5uZXJIVE1MIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwib3B0aW9uIiwidXBkYXRlQ2F0ZWdvcnlEcm9wZG93biIsIm9wZW5DYXRNb2RhbEZvckVkaXRpbmciLCJoZXhDb2xvciIsIm1hdGNoIiwidG9TdHJpbmciLCJyZ2JUb0hleCIsImNsaWNrIiwiYmFja2dyb3VuZCIsIm9uZVdlZWtMYXRlciIsInNldERhdGUiLCJvbmVNb250aExhdGVyIiwibmF2RGlzcGxheVN0eWxlIiwiaW5uZXJXaWR0aCIsInpJbmRleCIsImdyaWRDb2x1bW4iLCJvbmNsaWNrIiwidGFyZ2V0Iiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==